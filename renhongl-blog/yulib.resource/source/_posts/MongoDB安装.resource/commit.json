{"compress":true,"commitItems":[["fe6e6c71-8474-4cd7-ab32-022cfad66136",1548836553761,"---\ntitle: MongoDB安装\ndate: 2017-01-05 22:11:56\ntags:\n    - Mongo\n---\n\n简介\n\n记录一些和Mongo DB有关的笔记（部分修改自runoob）。\n\n\n## 安装Mongo后的基本配置\nMongoDB将数据目录存储在 db 目录下。但是这个数据目录不会主动创建，在安装完成后需要创建它。请注意，数据目录应该放在根目录下（(如： C:\\ 或者 D:\\ 等 )。\n在本教程中，已经在C：盘 安装了 mongodb，现在创建一个data的目录然后在data目录里创建db目录。\n\n  ```\n  c:\\>cd c:\\\n\n  c:\\>mkdir data\n\n  c:\\>cd data\n\n  c:\\data>mkdir db\n\n  c:\\data>cd db\n\n  c:\\data\\db>\n  ```\n\n也可以通过window的资源管理器中创建这些目录，而不一定通过命令行。\n\n为了从命令提示符下运行MongoDB服务器，必须从MongoDB目录的bin目录中执行mongod.exe文件。为了方便，可以将mongod.exe添加到环境变量中。\n\n  ```\n  mongod.exe --dbpath c:\\data\\db\n  ```\n\n如果执行成功，会输出如下信息：\n\n  ```\n  2015-09-25T15:54:09.212+0800 I CONTROL  Hotfix KB2731284 or later update is not\n  installed, will zero-out data files\n  2015-09-25T15:54:09.229+0800 I JOURNAL  [initandlisten] journal dir=c:\\data\\db\\j\n  ournal\n  2015-09-25T15:54:09.237+0800 I JOURNAL  [initandlisten] recover : no journal fil\n  es present, no recovery needed\n  2015-09-25T15:54:09.290+0800 I JOURNAL  [durability] Durability thread started\n  2015-09-25T15:54:09.294+0800 I CONTROL  [initandlisten] MongoDB starting : pid=2\n  488 port=27017 dbpath=c:\\data\\db 64-bit host=WIN-1VONBJOCE88\n  2015-09-25T15:54:09.296+0800 I CONTROL  [initandlisten] targetMinOS: Windows 7/W\n  indows Server 2008 R2\n  2015-09-25T15:54:09.298+0800 I CONTROL  [initandlisten] db version v3.0.6\n  ……\n  ```\n\n## 将MongoDB作为服务启动\n\n请注意，必须有**管理权限**才能运行下面的命令。执行以下命令将MongoDB服务器作为Windows服务运行：\n\n  ```\n  mongod.exe --bind_ip 127.0.0.1 --logpath C:\\data\\dbConf\\mongodb.log --logappend --dbpath \n  C:\\data\\db --port 27017 --serviceName mongo --serviceDisplayName mongo --install\n  ```\n\n参数说明：\n\n  ```\n  --bind_ip 绑定服务IP，若绑定127.0.0.1，则只能本机访问，不指定默认本地所有IP\n  --logpath\t定MongoDB日志文件，注意是指定文件不是目录\n  --logappend\t使用追加的方式写日志\n  --dbpath\t指定数据库路径\n  --port\t指定服务端口号，默认端口27017\n  --serviceName\t指定服务名称\n  --serviceDisplayName\t指定服务名称，有多个mongodb服务时执行。\n  --install\t指定作为一个Windows服务安装。\n  ```\n\n再次强调，必须使用通过管理员方式打开的控制台，才能成功。如果不知道怎么通过管理员身份打开控制台，请进入c:/Windows/System32/找到cmd.exe，右键点击使用管理员身份运行。\n\n安装完之后，继续运行：\n\n  ```\n  net start mongo (mongo是刚才的服务名称)\n  ```\n\n如果出现类似**启动服务成功**的提示，那么就完成了；如果出现**没有此服务**的提示，那就是没有安装成功，需要检查以上步骤。\n\n## MongoDB后台管理 Shell\n安装完成后，想要测试数据库是否可以连接，可以使用MongoDB自带的js shell，打开一个cmd，输入`mongo`即可连接。\n\n",[[1548836499682,["P1211678@NCS-100918JJ01",[[1,70,"# "]],[70,70],[72,72]]],[1548836502371,["P1211678@NCS-100918JJ01",[[-1,112,"#"]],[113,113],[112,112]]],[1548836510931,["P1211678@NCS-100918JJ01",[[1,276,"bash"]],[276,276],[280,280]]],[1548836516980,["P1211678@NCS-100918JJ01",[[1,513,"bash"]],[513,513],[517,517]]],[1548836518989,["P1211678@NCS-100918JJ01",[[-1,513,"bash"]],[517,517],[513,513]]],[1548836519457,["P1211678@NCS-100918JJ01",[[1,513,"cmd"]],[513,513],[516,516]]],[1548836520496,["P1211678@NCS-100918JJ01",[[-1,513,"cmd"]],[516,516],[513,513]]],[1548836521096,["P1211678@NCS-100918JJ01",[[1,513,"bash"]],[513,513],[517,517]]],[1548836526666,["P1211678@NCS-100918JJ01",[[1,580,"bash"]],[580,580],[584,584]]],[1548836531112,["P1211678@NCS-100918JJ01",[[-1,1336,"#"]],[1337,1337],[1336,1336]]],[1548836533353,["P1211678@NCS-100918JJ01",[[1,1416,"bash"]],[1416,1416],[1420,1420]]],[1548836538943,["P1211678@NCS-100918JJ01",[[1,1615,"bash"]],[1615,1615],[1619,1619]]],[1548836543466,["P1211678@NCS-100918JJ01",[[1,2003,"bash"]],[2003,2003],[2007,2007]]],[1548836546996,["P1211678@NCS-100918JJ01",[[-1,2115,"#"]],[2116,2116],[2115,2115]]]],null,"P1211678@NCS-100918JJ01"]]}