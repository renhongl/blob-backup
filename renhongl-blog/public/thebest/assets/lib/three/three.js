// threejs.org/license
(function(k,xa){"object"===typeof exports&&"undefined"!==typeof module?xa(exports):"function"===typeof define&&define.amd?define(["exports"],xa):xa(k.THREE={})})(this,function(k){function xa(){}function C(a,b){this.x=a||0;this.y=b||0}function M(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("three.matrix4: 0="==c.minFilter&&(c.minFilter=1006);this.texture=new" the="" constructor="" no="" longer="" reads="" arguments.="" use="" .set()="" instead.")}function="" ja(a,b,c,d){this._x="a||0;this._y=b||0;this._z=c||0;this._w=void" 0!="=d?d:1}function" p(a,="" b,c){this.x="a||0;this.y=b||0;this.z=c||0}function" sa(){this.elements="[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3:" y(a,b,c,d,e,f,g,h,l,m){object.defineproperty(this,"id",{value:xf++});this.uuid="S.generateUUID();this.name="";this.image=void" e?e:1006;this.minfilter="void" c(0,0);this.repeat="new" c(1,1);this.center="new" c(0,0);this.rotation="0;this.matrixAutoUpdate=!0;this.matrix=new" sa;this.generatemipmaps="!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void" ea(a,b,c,d){this.x="a||0;this.y=b||0;this.z=c||0;this.w=void" hb(a,="" b,c){this.width="a;this.height=b;this.scissor=new" ea(0,0,a,b);this.scissortest="!1;this.viewport=new" ea(0,0,a,b);c="c||{};void" y(void="" 0,void="" 0,c.wraps,c.wrapt,c.magfilter,c.minfilter,c.format,c.type,c.anisotropy,c.encoding);this.depthbuffer="void" ib(a,b,c){hb.call(this,a,b,c);this.activemipmaplevel="this.activeCubeFace=0}function" ib(a,b,c,d,e,f,g,h,l,m,u,n){y.call(this,null,f,g,h,l,m,d,e,u,n);this.image="{data:a,width:b,height:c};this.magFilter=void" va(a,b){this.min="void" p(infinity,infinity,infinity);this.max="void" p(-infinity,-infinity,-infinity)}function="" ea(a,b){this.center="void" p;this.radius="void" fa(a,b){this.normal="void" a?a:new="" p(1,0,0);this.constant="void" ld(a,b,c,d,e,f){this.planes="[void" fa,void="" fa]}function="" i(a,b,c){return="" void="" yf(a){function="" b(b,c){var="" d="b.array,e=b.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(c,h);a.bufferData(c,d,e);b.onUploadCallback();c=a.FLOAT;d" instanceof="" float32array?c="a.FLOAT:d" float64array?console.warn("three.webglattributes:="" unsupported="" data="" buffer="" format:="" float64array."):d="" uint16array?c="a.UNSIGNED_SHORT:d" int16array?c="a.SHORT:d" uint32array?c="a.UNSIGNED_INT:d" int32array?c="a.INT:d" int8array?c="a.BYTE:d" uint8array&&(c="a.UNSIGNED_BYTE);return{buffer:h,type:c,bytesPerElement:d.BYTES_PER_ELEMENT,version:b.version}}var" c="new" weakmap;return{get:function(a){a.isinterleavedbufferattribute&&(a="a.data);return" c.get(a)},="" remove:function(b){b.isinterleavedbufferattribute&&(b="b.data);var" f="c.get(d);if(void" if(f.version<d.version){var="" g="d,h=g.array,l=g.updateRange;a.bindBuffer(e,f.buffer);!1===g.dynamic?a.bufferData(e,h,a.STATIC_DRAW):-1===l.count?a.bufferSubData(e,0,h):0===l.count?console.error("THREE.WebGLObjects.updateBuffer:" dynamic="" three.bufferattribute="" marked="" as="" needsupdate="" but="" updaterange.count="" is="" 0,="" ensure="" you="" are="" using="" set="" methods="" or="" updating="" manually."):="" (a.buffersubdata(e,l.offset*h.bytes_per_element,h.subarray(l.offset,l.offset+l.count)),l.count="-1);f.version=d.version}}}}function" jb(a,b,c,d){this._x="a||0;this._y=b||0;this._z=c||0;this._order=d||jb.DefaultOrder}function" sd(){this.mask="1}function" a(){object.defineproperty(this,"id",{value:zf++});this.uuid="S.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=A.DefaultUp.clone();var" a="new" p,b="new" jb,c="new" ja,d="new" p(1,1,1);b.onchange(function(){c.setfromeuler(b,="" !1)});c.onchange(function(){b.setfromquaternion(c,void="" 0,!1)});object.defineproperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelviewmatrix:{value:new="" m},normalmatrix:{value:new="" sa}});this.matrix="new" m;this.matrixworld="new" m;this.matrixautoupdate="A.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new" sd;this.visible="!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=" 0;this.userdata="{}}function" qa(){a.call(this);this.type="Camera" ;this.matrixworldinverse="new" m;this.projectionmatrix="new" m}function="" jb(a,b,c,d,e,f){qa.call(this);this.type="OrthographicCamera" ;this.zoom="1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void" wa(a,b,c,d,e,f){this.a="a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new" p;this.vertexnormals="Array.isArray(d)?d:[];this.color=e&&e.isColor?" e:new="" i;this.vertexcolors="Array.isArray(e)?e:[];this.materialIndex=void" n(){object.defineproperty(this,"id",{value:af+="2});this.uuid=S.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=" this.uvsneedupdate="this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function" t(a,b,c){if(array.isarray(a))throw="" new="" typeerror("three.bufferattribute:="" array="" should="" be="" typed="" array.");this.name="" ;this.array="a;this.itemSize=b;this.count=void" rc(a,b,c){t.call(this,new="" int8array(a),b,c)}function="" sc(a,b,c){t.call(this,new="" uint8array(a),b,c)}function="" tc(a,b,c){t.call(this,new="" uint8clampedarray(a),="" b,c)}function="" uc(a,b,c){t.call(this,new="" int16array(a),b,c)}function="" kb(a,b,c){t.call(this,new="" uint16array(a),b,c)}function="" vc(a,b,c){t.call(this,new="" int32array(a),b,c)}function="" lb(a,b,c){t.call(this,new="" uint32array(a),b,c)}function="" z(a,b,c){t.call(this,new="" float32array(a),b,c)}function="" wc(a,b,c){t.call(this,new="" float64array(a),b,c)}function="" ce(){this.vertices="[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=" this.boundingbox="null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function" de(a){if(0="==a.length)return-Infinity;for(var" b="a[0],c=1,d=a.length;c<d;++c)a[c]">b&&(b=a[c]);return b}function F(){Object.defineProperty(this,"id",{value:Bf+=2});this.uuid=S.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange=
    {start:0,count:Infinity}}function Kb(a,b,c,d,e,f){N.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new mb(a,b,c,d,e,f));this.mergeVertices()}function mb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,k,P,H,ta){var q=f/P,v=g/H,x=f/2,K=g/2,w=k/2;g=P+1;var y=H+1,B=f=0,G,C,z=new p;for(C=0;C<y;c++){var 0="==m&&(m=new" a="C*v-K;for(G=0;G<g;G++)z[a]=(G*q-x)*d,z[b]=A*e,z[c]=w,m.push(z.x,z.y,z.z),z[a]=0,z[b]=0,z[c]=0<k?1:-1,u.push(z.x," z.y,z.z),n.push(g="" p),n.push(1-c="" h),f+="1}for(C=0;C<H;C++)for(G=0;G<P;G++)a=t+G+g*(C+1),b=t+(G+1)+g*(C+1),c=t+(G+1)+g*C,l.push(t+G+g*C,a,c),l.push(a,b,c),B+=6;h.addGroup(r,B,ta);r+=B;t+=f}F.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var" h="this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var" l="[],m=[],u=[],n=[],t=0,r=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a," f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setindex(l);this.addattribute("position",new="" z(m,3));this.addattribute("normal",new="" z(u,3));this.addattribute("uv",new="" z(n,2))}function="" xc(a,b,c,d){n.call(this);this.type="PlaneGeometry" ;this.parameters="{width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new" pb(a,b,c,d));this.mergevertices()}function="" pb(a,b,c,d){f.call(this);this.type="PlaneBufferGeometry" e="a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var" g="c+1,h=d+1,l=a/c,m=b/d,u=[],n=[],t=[],r=[];for(a=0;a<h;a++){var" q="a*m-f;for(b=0;b<g;b++)n.push(b*l-e,-q,0),t.push(0,0,1),r.push(b/c),r.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,u.push(b+g*a,e,h),u.push(e,f,h);this.setIndex(u);this.addAttribute("position",new" z(n,3));this.addattribute("normal",new="" z(t,="" 3));this.addattribute("uv",new="" z(r,2))}function="" o(){object.defineproperty(this,"id",{value:cf++});this.uuid="S.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=" this.clipintersection="!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function" za(a){o.call(this);this.type="MeshBasicMaterial" ;this.color="new" i(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=" null;this.combine="0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)}function" va(a){o.call(this);this.type="ShaderMaterial" ;this.defines="{};this.uniforms={};this.vertexShader="void" main()="" {\n\tgl_position="projectionMatrix" *="" modelviewmatrix="" vec4(="" position,="" 1.0="" );\n}";this.fragmentshader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}" ;="" this.linewidth="1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void" 0;this.uniformsneedupdate="!1;void" 0!="=a&&(void" attributes="" should="" now="" be="" defined="" in="" three.buffergeometry="" instead."),this.setvalues(a))}="" function="" qb(a,b){this.origin="void" p;this.direction="void" p}function="" lb(a,b){this.start="void" p;this.end="void" aa(a,b,c){this.a="void" p;this.b="void" p;this.c="void" oa(a,b){a.call(this);this.type="Mesh" ;this.geometry="void" f;this.material="void" za({color:16777215*math.random()});this.drawmode="0;this.updateMorphTargets()}function" df(a,b,c,d){function="" e(a,c){b.buffers.color.setclear(a.r,="" a.g,a.b,c,d)}var="" f="new" i(0),g="0,h,l,m;return{getClearColor:function(){return" f},setclearcolor:function(a,b){f.set(a);g="void" g},setclearalpha:function(a){g="a;e(f,g)},render:function(b,d,t,r){d=d.background;null===d?e(f,g):d&&d.isColor&&(e(d,1),r=!0);(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void" oa(new="" mb(1,1,1),new="" va({uniforms:rb.cube.uniforms,vertexshader:rb.cube.vertexshader,="" fragmentshader:rb.cube.fragmentshader,side:1,depthtest:!0,depthwrite:!1,fog:!1})),m.geometry.removeattribute("normal"),m.geometry.removeattribute("uv"),m.onbeforerender="function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},c.update(m.geometry)),m.material.uniforms.tCube.value=d,b.push(m,m.geometry,m.material,0,null)):d&&d.isTexture&&(void" jb(-1,1,1,-1,0,1),l="new" pb(2,2),new="" za({depthtest:!1,depthwrite:!1,fog:!1})),c.update(l.geometry)),l.material.map="d,a.renderBufferDirect(h," null,l.geometry,l.material,l,null))}}}function="" ef(a,b,c){var="" d;this.setmode="function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.update(f,d)};this.renderInstances=function(a,f,g){var" using="" three.instancedbuffergeometry="" but="" hardware="" does="" not="" support="" extension="" angle_instanced_arrays.");else{var="" e.drawarraysinstancedangle(d,f,g,a.maxinstancedcount);c.update(g,d,a.maxinstancedcount)}}}function="" ff(a,b,c){function="" d(b){if("highp"="==b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var" e,f="void" c.precision?c.precision:"highp",g="d(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not" supported,="" using",g,"instead."),f="g);c=!0===c.logarithmicDepthBuffer;g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);var" e;var="" c="b.get("EXT_texture_filter_anisotropic");return" gf(){function="" a(){m.value!="=" d&&(m.value="d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function" b(a,b,d,e){var="" float32array(e);for(e="0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,l),h.normal.toArray(g,d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return" g}var="" fa,l="new" sa,m="{value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=" this.numplanes="0;this.init=function(a,c,g){var" h};this.beginshadows="function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,l,r,q,k){if(!f||null===c||0===c.length||g&&!l)g?b(null):a();else{l=g?0:e;var" n="4*l,u=q.clippingState||null;m.value=u;u=b(c,r,n,k);for(c=0;c!==n;++c)u[c]=d[c];q.clippingState=u;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=l}}}function" hf(a){var="" b="{};return{get:function(c){if(void" b[c])return="" b[c];switch(c){case="" "webgl_depth_texture":var="" d="a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case" "ext_texture_filter_anisotropic":d="a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case" "webgl_compressed_texture_s3tc":d="a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||" a.getextension("webkit_webgl_compressed_texture_s3tc");break;case="" "webgl_compressed_texture_pvrtc":d="a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case" "webgl_compressed_texture_etc1":d="a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer:" "+c+"="" supported.");return="" b[c]="d}}}function" if(a,b,c){function="" d(a){a="a.target;var" b.remove(g.index);for(var="" g.attributes)b.remove(g.attributes[l]);a.removeeventlistener("dispose",d);delete="" e[a.id];if(l="f[a.id])b.remove(l),delete" f[a.id];if(l="f[g.id])b.remove(l),delete" f[g.id];c.memory.geometries--}var="" f;b.addeventlistener("dispose",d);b.isbuffergeometry?f="b:b.isGeometry&&(void" f).setfromobject(a)),f="b._bufferGeometry);e[b.id]=f;c.memory.geometries++;return" f},update:function(c){var="" e)b.update(e[f],a.array_buffer);c="c.morphAttributes;for(f" c){d="c[f];e=0;for(var" d;d="[];var" u="e.length;g<u;g+=3){var" for(e="g.position.array,g=0,u=e.length/3-1;g<u;g+=3)n=g+0,t=g+1,r=g+2,d.push(n," t,t,r,r,n);d="new" (65535<de(d)?lb:kb)(d,1);b.update(d,a.element_array_buffer);return="" f[c.id]="d}}}function" jf(a,b,c){var="" d,e,f;this.setmode="function(a){d=a};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.update(h,d)};this.renderInstances=function(a,h,l){var" angle_instanced_arrays."):="" (g.drawelementsinstancedangle(d,l,e,h*f,a.maxinstancedcount),c.update(l,d,a.maxinstancedcount))}}function="" kf(a){var="" a.triangles:b.triangles+="c/3*e;break;case" a.triangle_strip:case="" a.triangle_fan:b.triangles+="e*(c-2);break;case" a.lines:b.lines+="c/2*" e;break;case="" a.line_strip:b.lines+="e*(c-1);break;case" a.line_loop:b.lines+="e*c;break;case" a.points:b.points+="e*c;break;default:console.error("THREE.WebGLInfo:" unknown="" draw="" mode:",d)}}}}function="" lf(a,b){return="" math.abs(b[1])-math.abs(a[1])}function="" mf(a){var="" float32array(8);return{update:function(d,e,f,g){var="" m="0;m<l;m++)d[m]=[m,0];b[e.id]=d}var" for(m="0;m<l;m++){var">m;m++){if(n=d[m])if(h=n[0],l=n[1]){u&&e.addAttribute("morphTarget"+m,u[h]);f&&e.addAttribute("morphNormal"+m,f[h]);c[m]=l;continue}c[m]=0}g.getUniforms().setValue(a,"morphTargetInfluences",c)}}}function Nf(a,b){var c={};return{update:function(d){var e=b.render.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),
    a.update(g),c[g.id]=e);return g},dispose:function(){c={}}}}function ab(a,b,c,d,e,f,g,h,l,m){a=void 0!==a?a:[];Y.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,l,m);this.flipY=!1}function Mb(a,b,c){var d=a[0];if(0>=d||0<d)return 0="==f&&(f=new" a;var="" e="b*c,f=Ee[e];void" float32array(e),ee[e]="f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return" f}function="" fe(a,b){var="" c="Ge[b];void" int32array(b),ge[b]="c);for(var" d="0;d!==b;++d)c[d]=a.allocTextureUnit();return" c}function="" of(a,="" b){a.uniform1f(this.addr,b)}function="" pf(a,b){a.uniform1i(this.addr,b)}function="" qf(a,b){void="" rf(a,b){void="" 0!="=b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void" sf(a,b){void="" tf(a,b){a.uniformmatrix2fv(this.addr,!1,b.elements||b)}function="" uf(a,b){void="" !1,b):(he.set(b.elements),a.uniformmatrix3fv(this.addr,!1,he))}function="" vf(a,b){void="" wf(a,b,c){var="" xf(a,b,c){var="" le(a,b){a.uniform2iv(this.addr,b)}function="" me(a,b){a.uniform3iv(this.addr,b)}function="" ne(a,b){a.uniform4iv(this.addr,="" b)}function="" yf(a){switch(a){case="" 5126:return="" of;case="" 35664:return="" qf;case="" 35665:return="" rf;case="" 35666:return="" sf;case="" 35674:return="" tf;case="" 35675:return="" uf;case="" 35676:return="" vf;case="" 35678:case="" 36198:return="" wf;case="" 35680:return="" xf;case="" 5124:case="" 35670:return="" pf;case="" 35667:case="" 35671:return="" le;case="" 35668:case="" 35672:return="" me;case="" 35669:case="" 35673:return="" ne}}function="" zf(a,b){a.uniform1fv(this.addr,b)}function="" $f(a,b){a.uniform1iv(this.addr,b)}function="" ag(a,b){a.uniform2fv(this.addr,mb(b,this.size,2))}function="" bg(a,="" b){a.uniform3fv(this.addr,mb(b,this.size,3))}function="" cg(a,b){a.uniform4fv(this.addr,mb(b,this.size,4))}function="" dg(a,b){a.uniformmatrix2fv(this.addr,!1,mb(b,this.size,4))}function="" eg(a,b){a.uniformmatrix3fv(this.addr,!1,mb(b,this.size,9))}function="" fg(a,b){a.uniformmatrix4fv(this.addr,!1,mb(b,this.size,16))}function="" gg(a,b,c){var="" hg(a,b,c){var="" 0;a!="=d;++a)c.setTextureCube(b[a]||Ke,e[a])}function" ig(a){switch(a){case="" zf;case="" ag;case="" bg;case="" cg;case="" dg;case="" eg;case="" fg;case="" 35678:return="" gg;case="" hg;case="" $f;case="" jg(a,b,c){this.id="a;this.addr=c;this.setValue=Yf(b.type)}function" kg(a,b,c){this.id="a;this.addr=c;this.size=" b.size;this.setvalue="ig(b.type)}function" oe(a){this.id="a;this.seq=[];this.map={}}function" bb(a,b,c){this.seq="[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var" m="Ud.exec(h),u=Ud.lastIndex,n=m[1],t=m[3];"]"===m[2]&&(n|=0);if(void" jg(n,e,f):new="" kg(n,e,f);h.seq.push(e);h.map[e.id]="e;break}else" t="g.map[n],void" oe(n),n="g,g=t,n.seq.push(g),n.map[g.id]=g),g=t}}}function" lg(a){a="a.split("\n");for(var" b="0;b<a.length;b++)a[b]=b+1+":" "+a[b];return="" a.join("\n")}function="" pe(a,b,c){var="" shader="" couldn't="" compile.");""!="=a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader:" gl.getshaderinfolog()",b="==a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(d)," lg(c));return="" d}function="" qe(a){switch(a){case="" 3e3:return["linear","(="" value="" )"];case="" 3001:return["srgb","(="" 3002:return["rgbe","(="" 3004:return["rgbm","(="" value,="" 7.0="" 3005:return["rgbm","(="" 16.0="" 3006:return["rgbd","(="" 256.0="" 3007:return["gamma","(="" float(="" gamma_factor="" )="" )"];default:throw="" error("unsupported="" encoding:="" "+a);}}function="" vd(a,b){b="Qe(b);return"vec4" "+a+"(="" vec4="" {="" return="" "+b[0]+"tolinear"+b[1]+";="" }"}function="" mg(a,="" b){b="Qe(b);return"vec4" linearto"+b[0]+b[1]+";="" ng(a,b){switch(b){case="" 1:b="Linear" ;break;case="" 2:b="Reinhard" 3:b="Uncharted2" 4:b="OptimizedCineon" ;break;default:throw="" tonemapping:="" "+b);}return"vec3="" vec3="" color="" "+b+"tonemapping(="" );="" og(a,b,c){a="a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension" gl_oes_standard_derivatives="" :="" enable":"",(a.fragdepth||="" b.logarithmicdepthbuffer)&&c.get("ext_frag_depth")?"#extension="" gl_ext_frag_depth="" enable":"",a.drawbuffers&&c.get("webgl_draw_buffers")?"#extension="" gl_ext_draw_buffers="" require":"",(a.shadertexturelod||b.envmap)&&c.get("ext_shader_texture_lod")?"#extension="" gl_ext_shader_texture_lod="" enable":""].filter(yc).join("\n")}function="" pg(a){var="" in="" a){var="" "+c+"="" "+d)}return="" b.join("\n")}function="" yc(a){return""!="=a}function" re(a,b){return="" a.replace(="" num_dir_lights="" g,="" b.numdirlights).replace(="" num_spot_lights="" g,b.numspotlights).replace(="" num_rect_area_lights="" g,b.numrectarealights).replace(="" num_point_lights="" g,b.numpointlights).replace(="" num_hemi_lights="" g,b.numhemilights)}function="" se(a,b){return="" num_clipping_planes="" g,b.numclippingplanes).replace(="" union_clipping_planes="" g,b.numclippingplanes-b.numclipintersection)}function="" wd(a){return="" ^[="" \t]*#include="" +<([\w\d.]+)="">/gm,function(a,c){a=V[c];if(void 0===a)throw Error("Can not resolve #include <"+c+ "="">");return Wd(a)})}function Te(a){return a.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,c,d,e){a="";for(c=parseInt(c);c<parseint(d);c++)a+=e.replace( 0="==w&&(w=new" \[="" i="" \]="" g,"[="" "+c+"="" ]");return="" a})}function="" qg(a,b,c,d,e,f){var="" g="a.context,h=d.defines,l=e.vertexShader,m=e.fragmentShader,u="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?u="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&(u="SHADOWMAP_TYPE_PCF_SOFT");var" n="ENVMAP_TYPE_CUBE" ,t="ENVMAP_MODE_REFLECTION" ,="" r="ENVMAP_BLENDING_MULTIPLY" ;if(f.envmap){switch(d.envmap.mapping){case="" 301:case="" 302:n="ENVMAP_TYPE_CUBE" ;break;case="" 306:case="" 307:n="ENVMAP_TYPE_CUBE_UV" 303:case="" 304:n="ENVMAP_TYPE_EQUIREC" 305:n="ENVMAP_TYPE_SPHERE" }switch(d.envmap.mapping){case="" 302:case="" 304:t="ENVMAP_MODE_REFRACTION" }switch(d.combine){case="" 0:r="ENVMAP_BLENDING_MULTIPLY" 1:r="ENVMAP_BLENDING_MIX" 2:r="ENVMAP_BLENDING_ADD" }}var="" k="0<a.gammaFactor?a.gammaFactor:1,v=og(d.extensions,f,b),x=" pg(h),p="g.createProgram();d.isRawShaderMaterial?(h=[x].filter(yc).join("\n"),0<h.length&&(h+="\n"),b=[v,x].filter(yc).join("\n"),0<b.length&&(b+="\n")):(h=["precision" "+f.precision+"="" float;","precision="" int;","#define="" shader_name="" "+e.name,x,f.supportsvertextextures?"#define="" vertex_textures":"","#define="" gamma_factor="" "+k,"#define="" max_bones="" "+f.maxbones,f.usefog&&f.fog?"#define="" use_fog":"",f.usefog&&f.fogexp?"#define="" fog_exp2":"",f.map?"#define="" use_map":"",f.envmap?"#define="" use_envmap":="" "",f.envmap?"#define="" "+t:"",f.lightmap?"#define="" use_lightmap":"",f.aomap?"#define="" use_aomap":"",f.emissivemap?"#define="" use_emissivemap":"",f.bumpmap?"#define="" use_bumpmap":"",f.normalmap?"#define="" use_normalmap":"",f.displacementmap&&f.supportsvertextextures?"#define="" use_displacementmap":"",f.specularmap?"#define="" use_specularmap":"",f.roughnessmap?"#define="" use_roughnessmap":"",f.metalnessmap?"#define="" use_metalnessmap":"",f.alphamap?"#define="" use_alphamap":"",f.vertexcolors?"#define="" use_color":"",f.flatshading?="" "#define="" flat_shaded":"",f.skinning?"#define="" use_skinning":"",f.usevertextexture?"#define="" bone_texture":"",f.morphtargets?"#define="" use_morphtargets":"",f.morphnormals&&!1="==f.flatShading?"#define" use_morphnormals":"",f.doublesided?"#define="" double_sided":"",f.flipsided?"#define="" flip_sided":"",f.shadowmapenabled?"#define="" use_shadowmap":"",f.shadowmapenabled?"#define="" "+u:"",f.sizeattenuation?"#define="" use_sizeattenuation":"",f.logarithmicdepthbuffer?"#define="" use_logdepthbuf":"",f.logarithmicdepthbuffer&&="" b.get("ext_frag_depth")?"#define="" use_logdepthbuf_ext":"","uniform="" mat4="" modelmatrix;","uniform="" modelviewmatrix;","uniform="" projectionmatrix;","uniform="" viewmatrix;","uniform="" mat3="" normalmatrix;","uniform="" vec3="" cameraposition;","attribute="" position;","attribute="" normal;","attribute="" vec2="" uv;","#ifdef="" use_color","\tattribute="" color;","#endif","#ifdef="" use_morphtargets","\tattribute="" morphtarget0;","\tattribute="" morphtarget1;","\tattribute="" morphtarget2;","\tattribute="" morphtarget3;",="" "\t#ifdef="" use_morphnormals","\t\tattribute="" morphnormal0;","\t\tattribute="" morphnormal1;","\t\tattribute="" morphnormal2;","\t\tattribute="" morphnormal3;","\t#else","\t\tattribute="" morphtarget4;","\t\tattribute="" morphtarget5;","\t\tattribute="" morphtarget6;","\t\tattribute="" morphtarget7;","\t#endif","#endif","#ifdef="" use_skinning","\tattribute="" vec4="" skinindex;","\tattribute="" skinweight;","#endif","\n"].filter(yc).join("\n"),b="[v,"precision" "+="" f.precision+"="" "+e.name,x,f.alphatest?"#define="" alphatest="" "+f.alphatest:"","#define="" "+k,f.usefog&&f.fog?"#define="" use_envmap":"",f.envmap?"#define="" "+n:"",f.envmap?"#define="" "+t:"",f.envmap?"#define="" "+r:"",f.lightmap?"#define="" use_normalmap":="" "",f.specularmap?"#define="" use_color":"",f.gradientmap?"#define="" use_gradientmap":"",f.flatshading?"#define="" flat_shaded":"",f.doublesided?"#define="" "+u:"",f.premultipliedalpha?"#define="" premultiplied_alpha":="" "",f.physicallycorrectlights?"#define="" physically_correct_lights":"",f.logarithmicdepthbuffer?"#define="" use_logdepthbuf":"",f.logarithmicdepthbuffer&&b.get("ext_frag_depth")?"#define="" use_logdepthbuf_ext":"",f.envmap&&b.get("ext_shader_texture_lod")?"#define="" texture_lod_ext":"","uniform="" cameraposition;",0!="=f.toneMapping?"#define" tone_mapping":"",0!="=f.toneMapping?V.tonemapping_pars_fragment:"",0!==f.toneMapping?ng("toneMapping",f.toneMapping):"",f.dithering?"#define" dithering":="" "",f.outputencoding||f.mapencoding||f.envmapencoding||f.emissivemapencoding?v.encodings_pars_fragment:"",f.mapencoding?vd("maptexeltolinear",f.mapencoding):"",f.envmapencoding?vd("envmaptexeltolinear",f.envmapencoding):"",f.emissivemapencoding?vd("emissivemaptexeltolinear",f.emissivemapencoding):"",f.outputencoding?mg("lineartooutputtexel",f.outputencoding):"",f.depthpacking?"#define="" depth_packing="" "+d.depthpacking:"","\n"].filter(yc).join("\n"));l="Wd(l);l=Re(l,f);l=Se(l,f);m=Wd(m);m=Re(m,f);m=Se(m," f);l="Te(l);m=Te(m);m=b+m;l=Pe(g,g.VERTEX_SHADER,h+l);m=Pe(g,g.FRAGMENT_SHADER,m);g.attachShader(p,l);g.attachShader(p,m);void" 0!="=d.index0AttributeName?g.bindAttribLocation(p,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(p,0,"position");g.linkProgram(p);f=g.getProgramInfoLog(p).trim();e=g.getShaderInfoLog(l).trim();u=g.getShaderInfoLog(m).trim();t=n=!0;if(!1===g.getProgramParameter(p,g.LINK_STATUS))n=!1,console.error("THREE.WebGLProgram:" shader="" error:="" ",g.geterror(),"gl.validate_status",="" g.getprogramparameter(p,g.validate_status),"gl.getprograminfolog",f,e,u);else="" if(""!="=f)console.warn("THREE.WebGLProgram:" gl.getprograminfolog()",f);else="" if(""="==e||""===u)t=!1;t&&(this.diagnostics={runnable:n,material:d,programLog:f,vertexShader:{log:e,prefix:h},fragmentShader:{log:u,prefix:b}});g.deleteShader(l);g.deleteShader(m);var" w;this.getuniforms="function(){void" bb(g,p,a));return="" w};var="" b;this.getattributes="function(){if(void" a="{},b=g.getProgramParameter(p,g.ACTIVE_ATTRIBUTES)," c="0;c<b;c++){var" d="g.getActiveAttrib(p,c).name;a[d]=g.getAttribLocation(p,d)}B=a}return" b};this.destroy="function(){g.deleteProgram(p);this.program=void" 0};object.defineproperties(this,{uniforms:{get:function(){console.warn("three.webglprogram:="" .uniforms="" is="" now="" .getuniforms().");return="" this.getuniforms()}},attributes:{get:function(){console.warn("three.webglprogram:="" .attributes="" .getattributes().");return="" this.getattributes()}}});this.id="rg++;this.code=c;this.usedTimes=1;this.program=p;this.vertexShader=" l;this.fragmentshader="m;return" this}function="" sg(a,b,c){function="" d(a,b){if(a)a.istexture?c="a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap:" don't="" use="" render="" targets="" as="" textures.="" their="" .texture="" property="" instead."),c="a.texture.encoding);else" var="" c}var="" e="[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong"," meshtoonmaterial:"phong",meshstandardmaterial:"physical",meshphysicalmaterial:"physical",linebasicmaterial:"basic",linedashedmaterial:"dashed",pointsmaterial:"points",shadowmaterial:"shadow"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering" .split("="" ");="" this.getparameters="function(b,e,g,u,n,t,r){var" h="f[b.type];if(r.isSkinnedMesh){var" l="r.skeleton.bones;if(c.floatVertexTextures)l=1024;else{var" m="Math.min(Math.floor((c.maxVertexUniforms-20)/4),l.length);m<l.length?(console.warn("THREE.WebGLRenderer:" skeleton="" has="" "+l.length+"="" bones.="" this="" gpu="" supports="" "+m+"."),l="0):l=m}}else" supported,="" using",m,"instead."));="" displacementmap:!!b.displacementmap,roughnessmap:!!b.roughnessmap,metalnessmap:!!b.metalnessmap,specularmap:!!b.specularmap,alphamap:!!b.alphamap,gradientmap:!!b.gradientmap,combine:b.combine,vertexcolors:b.vertexcolors,fog:!!u,usefog:b.fog,fogexp:u&&u.isfogexp2,flatshading:b.flatshading,sizeattenuation:b.sizeattenuation,logarithmicdepthbuffer:c.logarithmicdepthbuffer,skinning:b.skinning&&0<l,maxbones:l,usevertextexture:c.floatvertextextures,morphtargets:b.morphtargets,morphnormals:b.morphnormals,="" maxmorphtargets:a.maxmorphtargets,maxmorphnormals:a.maxmorphnormals,numdirlights:e.directional.length,numpointlights:e.point.length,numspotlights:e.spot.length,numrectarealights:e.rectarea.length,numhemilights:e.hemi.length,numclippingplanes:n,numclipintersection:t,dithering:b.dithering,shadowmapenabled:a.shadowmap.enabled&&r.receiveshadow&&0<g.length,shadowmaptype:a.shadowmap.type,tonemapping:a.tonemapping,physicallycorrectlights:a.physicallycorrectlights,premultipliedalpha:b.premultipliedalpha,="" alphatest:b.alphatest,doublesided:2="==b.side,flipSided:1===b.side,depthPacking:void" in="" b.defines)d.push(e),d.push(b.defines[e]);for(e="0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return" d.join()};this.acquireprogram="function(c,d,f,g){for(var" h,l="0,m=e.length;l<" m;l++){var="" u="e[l];if(u.code===g){h=u;++h.usedTimes;break}}void" qg(a,b,g,c,d,f),e.push(h));return="" h};this.releaseprogram="function(a){if(0===--a.usedTimes){var" b="e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function" tg(){var="" weakmap;return{get:function(b){var="" c},remove:function(b){a.delete(b)},update:function(b,c,d){a.get(b)[c]="d},dispose:function(){a=new" weakmap}}}function="" ug(a,b){return="" a.renderorder!="=b.renderOrder?" a.renderorder-b.renderorder:a.program&&b.program&&a.program!="=b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function" vg(a,b){return="" wg(){var="" renderorder:e.renderorder,z:h,group:l},a[b]="m):(m.id=e.id,m.object=e,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=e.renderOrder,m.z=h,m.group=l);(!0===g.transparent?d:c).push(m);b++},sort:function(){1<c.length&&c.sort(ug);1<d.length&&d.sort(vg)}}}function" xg(){var="" wg,a[b]="c);return" c},dispose:function(){a="{}}}}function" yg(){var="" a[b.id];switch(b.type){case="" "directionallight":var="" p,color:new="" i,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" c};break;case="" "spotlight":c="{position:new" p,direction:new="" i,distance:0,conecos:0,penumbracos:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" "pointlight":c="{position:new" i,distance:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" c,shadowcameranear:1,shadowcamerafar:1e3};break;case="" "hemispherelight":c="{direction:new" p,skycolor:new="" i,groundcolor:new="" i};="" break;case="" "rectarealight":c="{color:new" i,position:new="" p,halfwidth:new="" p,halfheight:new="" p}}return="" a[b.id]="c}}}function" zg(){var="" yg,b="{id:Ag++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new" p,d="new" m,e="new" m;return{setup:function(f,g,h){var="" x="0,p=f.length;x<p;x++){var" w="f[x],B=w.color,G=w.intensity,K=w.distance,P=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=B.r*G,m+=B.g*G,u+=B.b*G;else" if(w.isdirectionallight){var="" p;b.directionalshadowmatrix[n]="w.shadow.matrix;b.directional[n]=H;n++}else" if(w.isspotlight){h="a.get(w);H.position.setFromMatrixPosition(w.matrixWorld);H.position.applyMatrix4(h);H.color.copy(B).multiplyScalar(G);H.distance=K;H.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);H.direction.sub(c);H.direction.transformDirection(h);H.coneCos=Math.cos(w.angle);H.penumbraCos=Math.cos(w.angle*(1-w.penumbra));H.decay=0===w.distance?0:w.decay;if(H.shadow=w.castShadow)B=" w.shadow,h.shadowbias="B.bias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize;b.spotShadowMap[r]=P;b.spotShadowMatrix[r]=w.shadow.matrix;b.spot[r]=H;r++}else" if(w.isrectarealight)h="a.get(w),H.color.copy(B).multiplyScalar(G),H.position.setFromMatrixPosition(w.matrixWorld),H.position.applyMatrix4(h),e.identity(),d.copy(w.matrixWorld),d.premultiply(h),e.extractRotation(d),H.halfWidth.set(.5*w.width,0,0),H.halfHeight.set(0,.5*w.height,0),H.halfWidth.applyMatrix4(e),H.halfHeight.applyMatrix4(e),b.rectArea[k]=" h,k++;else="" if(w.ispointlight){h="a.get(w);H.position.setFromMatrixPosition(w.matrixWorld);H.position.applyMatrix4(h);H.color.copy(w.color).multiplyScalar(w.intensity);H.distance=w.distance;H.decay=0===w.distance?0:w.decay;if(H.shadow=w.castShadow)B=w.shadow,H.shadowBias=B.bias,H.shadowRadius=B.radius,H.shadowMapSize=B.mapSize,H.shadowCameraNear=B.camera.near,H.shadowCameraFar=B.camera.far;b.pointShadowMap[t]=P;b.pointShadowMatrix[t]=w.shadow.matrix;b.point[t]=H;t++}else" w.ishemispherelight&&(h="a.get(w)," h.direction.setfrommatrixposition(w.matrixworld),h.direction.transformdirection(h),h.direction.normalize(),h.skycolor.copy(w.color).multiplyscalar(g),h.groundcolor.copy(w.groundcolor).multiplyscalar(g),b.hemi[v]="H,v++)}b.ambient[0]=l;b.ambient[1]=m;b.ambient[2]=u;b.directional.length=n;b.spot.length=r;b.rectArea.length=k;b.point.length=t;b.hemi.length=v;b.hash=b.id+","+n+","+t+","+r+","+k+","+v+","+g.length},state:b}}function" bg(){var="" zg,b="[],c=[],d=[];return{init:function(){b.length=0;c.length=" 0;d.length="0},state:{lightsArray:b,shadowsArray:c,spritesArray:d,lights:a},setupLights:function(d){a.setup(b,c,d)},pushLight:function(a){b.push(a)},pushShadow:function(a){c.push(a)},pushSprite:function(a){d.push(a)}}}function" cg(){var="" bg,a[b]="c);return" cb(a){o.call(this);this.type="MeshDepthMaterial" ;this.depthpacking="3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=" this.map="null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function" db(a){o.call(this);this.type="MeshDistanceMaterial" ;this.referenceposition="new" p;this.neardistance="1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function" ue(a,b,c){function="" d(b,c,d,e,f,g){var="" three.skinnedmesh="" with="" material.skinning="" set="" to="" false:",b),b="b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),l=l[h]);a.localClippingEnabled&&!0===" c.clipshadows&&0!="=c.clippingPlanes.length&&(h=l.uuid,m=c.uuid,b=r[h],void" l}="" function="" e(c,g,h,l){if(!1!="=c.visible){if(c.layers.test(g.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,c.matrixWorld);var" t="m.groups,r=0,k=t.length;r<k;r++){var" q="t[r],v=n[q.materialIndex];v&&v.visible&&(v=d(c,v,l,u,h.near,h.far),a.renderBufferDirect(h,null,m,v,c,q))}else" n.visible&&(v="d(c,n,l,u,h.near,h.far),a.renderBufferDirect(h,null," m,v,c,null))}c="c.children;m=0;for(n=c.length;m<n;m++)e(c[m],g,h,l)}}var" f="new" ld,g="new" m,h="new" c,l="new" c(c,c),m="new" p,u="new" p,n="Array(4),t=Array(4),r={},k={0:1,1:0,2:2},v=[new" p(1,0,0),new="" p(-1,0,0),new="" p(0,0,1),new="" p(0,0,-1),new="" p(0,1,0),new="" p(0,-1,0)],x="[new" p(0,0,-1)],y="[new" ea,new="" ea];for(c="0;4!==c;++c){var" cb({depthpacking:3201,morphtargets:w,skinning:b});n[c]="G;w=new" db({morphtargets:w,="" skinning:b});t[c]="w}var" t,r="0,k=b.length;r<k;r++){var" p="q&&q.isPointLight;if(void" no="" shadow.");else{var="" h.min(l);if(p){var="" hb(h.x,h.y,{minfilter:1003,magfilter:1003,format:1023}),t.map.texture.name="q.name+".shadowMap",w.updateProjectionMatrix());t.isSpotLightShadow&&t.update(q);P=t.map;H=t.matrix;u.setFromMatrixPosition(q.matrixWorld);w.position.copy(u);p?(t=6,H.makeTranslation(-u.x,-u.y,-u.z)):(t=1,m.setFromMatrixPosition(q.target.matrixWorld)," w.lookat(m),w.updatematrixworld(),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(w.projectionmatrix),h.multiply(w.matrixworldinverse));a.setrendertarget(p);a.clear();for(q="0;q<t;q++)p&&(m.copy(w.position),m.add(v[q]),w.up.copy(x[q]),w.lookAt(m),w.updateMatrixWorld(),n.viewport(y[q])),g.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),f.setFromMatrix(g),e(c,d,w,p)}}K.needsUpdate=!1}}}function" zc(a,b,c,d,e,f,g,h,l){y.call(this,a,b,c,d,e,f,g,h,l);this.needsupdate="!0}function" dg(a,b,="" c,d,e){var="" f,g,h,l,m,u,n,t,r,k,v,x,y,w,b,g,k,p;function="" h(a,b){return="" c,nb,z,z,a="new" p,f="new" ja,i="new" p;this.render="function(q,p,md){if(0!==q.length){if(void" ta="new" float32array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),ya="new" uint16array([0,1,2,0,2,3]);c="b.createBuffer();nb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,C);b.bufferData(b.ARRAY_BUFFER,ta,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER," nb);b.bufferdata(b.element_array_buffer,ya,b.static_draw);ta="b.createProgram();ya=b.createShader(b.VERTEX_SHADER);var" "+e.precision+"="" float;","#define="" spritematerial\nuniform="" modelviewmatrix;\nuniform="" projectionmatrix;\nuniform="" float="" rotation;\nuniform="" center;\nuniform="" scale;\nuniform="" uvoffset;\nuniform="" uvscale;\nattribute="" position;\nattribute="" uv;\nvarying="" vuv;\nvarying="" fogdepth;\nvoid="" main()="" {\n\tvuv="uvOffset" +="" uv="" *="" uvscale;\n\tvec2="" alignedposition="(" position="" -="" center="" )="" scale;\n\tvec2="" rotatedposition;\n\trotatedposition.x="cos(" rotation="" alignedposition.x="" sin(="" alignedposition.y;\n\trotatedposition.y="sin(" cos(="" alignedposition.y;\n\tvec4="" mvposition;\n\tmvposition="modelViewMatrix" vec4(="" 0.0,="" 1.0="" );\n\tmvposition.xy="" =="" projectionmatrix="" mvposition;\n\tfogdepth="-" mvposition.z;\n}"].join("\n"));="" b.shadersource(q,["precision="" color;\nuniform="" sampler2d="" map;\nuniform="" opacity;\nuniform="" int="" fogtype;\nuniform="" fogcolor;\nuniform="" fogdensity;\nuniform="" fognear;\nuniform="" fogfar;\nuniform="" alphatest;\nvarying="" {\n\tvec4="" texture="texture2D(" map,="" vuv="" );\n\tgl_fragcolor="vec4(" color="" texture.xyz,="" texture.a="" opacity="" );\n\tif="" (="" gl_fragcolor.a="" <="" discard;\n\tif="" fogtype=""> 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));
    b.compileShader(ya);b.compileShader(Q);b.attachShader(ta,ya);b.attachShader(ta,Q);b.linkProgram(ta);Z=ta;K=b.getAttribLocation(Z,"position");P=b.getAttribLocation(Z,"uv");f=b.getUniformLocation(Z,"uvOffset");g=b.getUniformLocation(Z,"uvScale");h=b.getUniformLocation(Z,"rotation");l=b.getUniformLocation(Z,"center");m=b.getUniformLocation(Z,"scale");u=b.getUniformLocation(Z,"color");n=b.getUniformLocation(Z,"map");t=b.getUniformLocation(Z,"opacity");r=b.getUniformLocation(Z,"modelViewMatrix");k=b.getUniformLocation(Z,
    "projectionMatrix");v=b.getUniformLocation(Z,"fogType");x=b.getUniformLocation(Z,"fogDensity");y=b.getUniformLocation(Z,"fogNear");w=b.getUniformLocation(Z,"fogFar");B=b.getUniformLocation(Z,"fogColor");b.getUniformLocation(Z,"fogDepth");G=b.getUniformLocation(Z,"alphaTest");ta=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");ta.width=8;ta.height=8;ya=ta.getContext("2d");ya.fillStyle="white";ya.fillRect(0,0,8,8);z=new zc(ta)}c.useProgram(Z);c.initAttributes();c.enableAttribute(K);
    c.enableAttribute(P);c.disableUnusedAttributes();c.disable(b.CULL_FACE);c.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,C);b.vertexAttribPointer(K,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(P,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,nb);b.uniformMatrix4fv(k,!1,md.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(n,0);ya=ta=0;(Q=p.fog)?(b.uniform3f(B,Q.color.r,Q.color.g,Q.color.b),Q.isFog?(b.uniform1f(y,Q.near),b.uniform1f(w,Q.far),b.uniform1i(v,1),ya=ta=1):Q.isFogExp2&&
    (b.uniform1f(x,Q.density),b.uniform1i(v,2),ya=ta=2)):(b.uniform1i(v,0),ya=ta=0);Q=0;for(var L=q.length;Q<l;q++){var 0="==b&&(b=a.TEXTURE0+L-1);M!==b&&(a.activeTexture(b),M=b)}var" e="q[Q];E.modelViewMatrix.multiplyMatrices(md.matrixWorldInverse,E.matrixWorld);E.z=-E.modelViewMatrix.elements[14]}q.sort(H);var" j="[],Td=[];Q=0;for(L=q.length;Q<L;Q++){E=q[Q];var" r="E.material;if(!1!==R.visible){E.onBeforeRender(a,p,md,void" 0,r,void="" 0);b.uniform1f(g,r.alphatest);b.uniformmatrix4fv(r,!1,e.modelviewmatrix.elements);e.matrixworld.decompose(a,f,i);j[0]="I.x;J[1]=I.y;Td[0]=" e.center.x-.5;td[1]="E.center.y-.5;var" nd="0;p.fog&&R.fog&&(nd=ya);ta!==nd&&(b.uniform1i(v,nd),ta=nd);null!==R.map?(b.uniform2f(f,R.map.offset.x,R.map.offset.y),b.uniform2f(g,R.map.repeat.x,R.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(t,R.opacity);b.uniform3f(u,R.color.r,R.color.g,R.color.b);b.uniform1f(h,R.rotation);b.uniform2fv(l,Td);b.uniform2fv(m,J);c.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.premultipliedAlpha);" c.buffers.depth.settest(r.depthtest);c.buffers.depth.setmask(r.depthwrite);c.buffers.color.setmask(r.colorwrite);d.settexture2d(r.map||z,0);b.drawelements(b.triangles,6,b.unsigned_short,0);e.onafterrender(a,p,md,void="" 0)}}c.enable(b.cull_face);c.reset()}}}function="" eg(a,b,c){function="" d(b,c,d){var="" uint8array(4),f="a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA," 1,1,0,a.rgba,a.unsigned_byte,e);return="" f}function="" e(b){!0!="=w[b]&&(a.enable(b),w[b]=!0)}function" f(b){!1!="=w[b]&&(a.disable(b),w[b]=!1)}function" g(b,d,g,h,l,m,n,u){0!="=b?e(a.BLEND):f(a.BLEND);if(5!==b){if(b!==K||u!==ya)switch(b){case" 2:u?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.one,a.one,a.one,a.one)):(a.blendequation(a.func_add),a.blendfunc(a.src_alpha,a.one));break;case="" 3:u?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.zero,a.zero,a.one_minus_src_color,="" a.one_minus_src_alpha)):(a.blendequation(a.func_add),a.blendfunc(a.zero,a.one_minus_src_color));break;case="" 4:u?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.zero,a.src_color,a.zero,a.src_alpha)):(a.blendequation(a.func_add),a.blendfunc(a.zero,a.src_color));break;default:u?(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.one,a.one_minus_src_alpha,a.one,a.one_minus_src_alpha)):(a.blendequationseparate(a.func_add,a.func_add),a.blendfuncseparate(a.src_alpha,="" a.one_minus_src_alpha,a.one,a.one_minus_src_alpha))}z="Z=nb=C=H=P=null}else{l=l||d;m=m||g;n=n||h;if(d!==P||l!==nb)a.blendEquationSeparate(c.convert(d),c.convert(l)),P=d,nb=l;if(g!==H||h!==C||m!==Z||n!==z)a.blendFuncSeparate(c.convert(g),c.convert(h),c.convert(m),c.convert(n)),H=g,C=h,Z=m,z=n}K=b;ya=u}function" h(b){a!="=b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),A=b)}function" l(b){0!="=b?(e(a.CULL_FACE),b!==E&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);" m(b,c,d){if(b){if(e(a.polygon_offset_fill),f!="=c||I!==d)a.polygonOffset(c,d),F=c,I=d}else" f(a.polygon_offset_fill)}function="" u(b){void="" n="new" function(){var="" b="!1,c=new" ea,d="null,e=new" ea(0,0,0,0);return{setmask:function(c){d="==c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=" !1;d="null;e.set(-1,0,0,0)}}},t=new" 0:a.depthfunc(a.never);break;case="" 1:a.depthfunc(a.always);break;case="" 2:a.depthfunc(a.less);break;case="" 3:a.depthfunc(a.lequal);break;case="" 4:a.depthfunc(a.equal);break;case="" 5:a.depthfunc(a.gequal);break;case="" 6:a.depthfunc(a.greater);break;case="" 7:a.depthfunc(a.notequal);="" break;default:a.depthfunc(a.lequal)}else="" a.depthfunc(a.lequal);d="b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},r=new" c||n!="=d)a.stencilOp(b,c,d),l=b,m=c,n=d},setLocked:function(a){b=a},setClear:function(b){u!==b&&(a.clearStencil(b),u=b)},reset:function(){b=!1;u=n=m=l=h=g=d=c=null}}},k=a.getParameter(a.MAX_VERTEX_ATTRIBS),v=new" uint8array(k),p="new" uint8array(k),y="new" uint8array(k),w="{},B=null,G=null,K=null,P=null,H=null,C=null,nb=null,Z=null,z=null,ya=!1,A=null,E=null,Q=null,F=null,I=null,L=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),N=!1;k=0;k=a.getParameter(a.VERSION);-1!==k.indexOf("WebGL")?(k=parseFloat(/^WebGL" ([0-9])="" .exec(k)[1]),="" es")&&(k="parseFloat(/^OpenGL" es="" .exec(k)[1]),n="2<=k);var" m="null,O={},T=new" ea,j="new" ea,w="{};W[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);W[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);n.setClear(0,0,0,1);t.setClear(1);r.setClear(0);e(a.DEPTH_TEST);t.setFunc(3);h(!1);l(1);e(a.CULL_FACE);e(a.BLEND);g(1);return{buffers:{color:n,depth:t,stencil:r},initAttributes:function(){for(var" a="0,b=v.length;a<b;a++)v[a]=0},enableAttribute:function(c){v[c]=" 1;0="==p[c]&&(a.enableVertexAttribArray(c),p[c]=1);0!==y[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),y[c]=0)},enableAttributeAndDivisor:function(c,d){v[c]=1;0===p[c]&&(a.enableVertexAttribArray(c),p[c]=1);y[c]!==d&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,d),y[c]=d)},disableUnusedAttributes:function(){for(var" (b="[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")||b.get("WEBGL_compressed_texture_astc")))for(var" c="a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)B.push(c[d]);return" b},useprogram:function(b){return="" g!="=b?(a.useProgram(b),G=b,!0):!1},setBlending:g,setMaterial:function(b,c){2===b.side?f(a.CULL_FACE):e(a.CULL_FACE);var" d="1===b.side;c&&(d=!d);h(d);!0===b.transparent?g(b.blending,b.blendEquation,b.blendSrc," b.blenddst,b.blendequationalpha,b.blendsrcalpha,b.blenddstalpha,b.premultipliedalpha):g(0);t.setfunc(b.depthfunc);t.settest(b.depthtest);t.setmask(b.depthwrite);n.setmask(b.colorwrite);m(b.polygonoffset,b.polygonoffsetfactor,b.polygonoffsetunits)},setflipsided:h,setcullface:l,setlinewidth:function(b){b!="=Q&&(N&&a.lineWidth(b),Q=b)},setPolygonOffset:m,setScissorTest:function(b){b?e(a.SCISSOR_TEST):f(a.SCISSOR_TEST)},activeTexture:u,bindTexture:function(b,c){null===M&&u();var" {type:void="" 0,texture:void="" 0},o[m]="d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||W[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},scissor:function(b){!1===T.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),T.copy(b))},viewport:function(b){!1===J.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),J.copy(b))}," reset:function(){for(var="" fg(a,b,c,d,e,f,g){function="" h(a,b){if(a.width="">b||a.height>b){if("data"in a){console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+a.width+"x"+a.height+").");return}b/=Math.max(a.width,a.height);var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*
    b);c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height,a);return c}return a}function l(a){return S.isPowerOfTwo(a.width)&&S.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function u(b,c,e,f){a.generateMipmap(b);d.get(c).__maxMipLevel=Math.log2(Math.max(e,f))}function n(b){return 1003===b||1004===b||1005===
    b?a.NEAREST:a.LINEAR}function t(b){b=b.target;b.removeEventListener("dispose",t);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&delete B[b.id];g.memory.textures--}function k(b){b=b.target;b.removeEventListener("dispose",k);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();
    if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.memory.textures--}function q(b,n){var k=d.get(b);if(b.isVideoTexture){var r=b.id,q=g.render.frame;B[r]!==q&&(B[r]=q,b.update())}if(0<b.version&&k.__version!==b.version)if(r=b.image,void 0="==r)console.warn("THREE.WebGLRenderer:" 1027="==b.format&&(K=a.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer:" texture="" marked="" for="" update="" but="" image="" is="" undefined",="" b);else="" if(!1="==r.complete)console.warn("THREE.WebGLRenderer:" incomplete",b);else{void="" e.maxtexturesize);(1001!="=b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===l(n)&&(n" instanceof="" htmlimageelement||n="" htmlcanvaselement||n="" imagebitmap)&&(void="" not="" power="" of="" two="" ("+n.width+"x"+n.height+").="" resized="" to="" "+="" g.width+"x"+g.height,n),n="G);r=l(n);q=f.convert(b.format);var" p="f.convert(b.type);v(a.TEXTURE_2D,b,r);var" x="b.mipmaps;if(b.isDepthTexture){var" k="a.DEPTH_COMPONENT;if(1015===b.type){if(!w)throw" error("float="" depth="" only="" supported="" in="" webgl2.0");k="a.DEPTH_COMPONENT32F}else" w&&(k="a.DEPTH_COMPONENT16);1026===b.format&&K===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer:" use="" unsignedshorttype="" or="" unsignedinttype="" depthformat="" depthtexture."),b.type="1012,p=f.convert(b.type));" unsignedint248type="" depthstencilformat="" if(b.isdatatexture)if(0<x.length&&r){for(var="" c.teximage2d(a.texture_2d,0,q,n.width,n.height,0,q,p,n.data),k.__maxmiplevel="0;else" if(b.iscompressedtexture){p="0;for(y=x.length;P<y;P++)K=x[P],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(q)?c.compressedTexImage2D(a.TEXTURE_2D,P,q,K.width,K.height,0,K.data):console.warn("THREE.WebGLRenderer:" attempt="" load="" unsupported="" compressed="" format="" .uploadtexture()"):c.teximage2d(a.texture_2d,p,q,k.width,k.height,0,q,p,k.data);k.__maxmiplevel="x.length-1}else" if(0<x.length&&r){p="0;for(y=x.length;P<y;P++)K=x[P],c.texImage2D(a.TEXTURE_2D,P,q,q," p,k);b.generatemipmaps="!1;k.__maxMipLevel=x.length-1}else" c.teximage2d(a.texture_2d,0,q,q,p,n),k.__maxmiplevel="0;m(b,r)&&u(a.TEXTURE_2D,b,n.width,n.height);k.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}c.activeTexture(a.TEXTURE0+n);c.bindTexture(a.TEXTURE_2D,k.__webglTexture)}function" v(c,g,h){h?(a.texparameteri(c,a.texture_wrap_s,f.convert(g.wraps)),a.texparameteri(c,a.texture_wrap_t,f.convert(g.wrapt)),a.texparameteri(c,a.texture_mag_filter,f.convert(g.magfilter)),a.texparameteri(c,a.texture_min_filter,="" f.convert(g.minfilter))):(a.texparameteri(c,a.texture_wrap_s,a.clamp_to_edge),a.texparameteri(c,a.texture_wrap_t,a.clamp_to_edge),1001="==g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer:" two.="" texture.wraps="" and="" texture.wrapt="" should="" be="" set="" three.clamptoedgewrapping.",g),a.texparameteri(c,a.texture_mag_filter,n(g.magfilter)),a.texparameteri(c,a.texture_min_filter,n(g.minfilter)),1003!="=g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer:" texture.minfilter="" three.nearestfilter="" three.linearfilter.",="" g));!(h="b.get("EXT_texture_filter_anisotropic"))||1015===g.type&&null===b.get("OES_texture_float_linear")||1016===g.type&&null===b.get("OES_texture_half_float_linear")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function" p(b,e,g,h){var="" l="f.convert(e.texture.format),m=f.convert(e.texture.type);c.texImage2D(h,0,l,e.width,e.height,0,l,m,null);a.bindFramebuffer(a.FRAMEBUFFER," b);a.framebuffertexture2d(a.framebuffer,g,h,d.get(e.texture).__webgltexture,0);a.bindframebuffer(a.framebuffer,null)}function="" y(b,c){a.bindrenderbuffer(a.renderbuffer,b);c.depthbuffer&&!c.stencilbuffer?(a.renderbufferstorage(a.renderbuffer,a.depth_component16,c.width,c.height),a.framebufferrenderbuffer(a.framebuffer,a.depth_attachment,a.renderbuffer,b)):c.depthbuffer&&c.stencilbuffer?(a.renderbufferstorage(a.renderbuffer,a.depth_stencil,c.width,c.height),a.framebufferrenderbuffer(a.framebuffer,a.depth_stencil_attachment,="" a.renderbuffer,b)):a.renderbufferstorage(a.renderbuffer,a.rgba4,c.width,c.height);a.bindrenderbuffer(a.renderbuffer,null)}var="" w="undefined" !="=typeof" webgl2renderingcontext&&a="" webgl2renderingcontext,b="{},G;this.setTexture2D=q;this.setTextureCube=function(b,n){var" n);c.bindtexture(a.texture_cube_map,k.__image__webgltexturecube);a.pixelstorei(a.unpack_flip_y_webgl,b.flipy);n="b&&b.isCompressedTexture;for(var" r="b.image[0]&&b.image[0].isDataTexture,q=[],p=0;6">p;p++)q[p]=n||r?r?b.image[p].image:b.image[p]:h(b.image[p],e.maxCubemapSize);var x=q[0],w=l(x),K=f.convert(b.format),y=f.convert(b.type);v(a.TEXTURE_CUBE_MAP,b,w);for(p=0;6>p;p++)if(n)for(var B,G=q[p].mipmaps,P=0,C=G.length;P<c;p++)b=g[p],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(k)? c.compressedteximage2d(a.texture_cube_map_positive_x+p,p,k,b.width,b.height,0,b.data):console.warn("three.webglrenderer:="" attempt="" to="" load="" unsupported="" compressed="" texture="" format="" in="" .settexturecube()"):c.teximage2d(a.texture_cube_map_positive_x+p,p,k,b.width,b.height,0,k,y,b.data);else="" r?c.teximage2d(a.texture_cube_map_positive_x+p,0,k,q[p].width,q[p].height,0,k,y,q[p].data):c.teximage2d(a.texture_cube_map_positive_x+p,0,k,k,y,q[p]);k.__maxmiplevel="n?G.length-1:0;m(b,w)&&u(a.TEXTURE_CUBE_MAP,b,x.width," x.height);k.__version="b.version;if(b.onUpdate)b.onUpdate(b)}else" c.activetexture(a.texture0+n),c.bindtexture(a.texture_cube_map,k.__image__webgltexturecube)};this.settexturecubedynamic="function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var" e="d.get(b),f=d.get(b.texture);b.addEventListener("dispose",k);f.__webglTexture=a.createTexture();g.memory.textures++;var" h="!0===b.isWebGLRenderTargetCube,n=l(b);if(h){e.__webglFramebuffer=" [];for(var="" t="0;6">t;t++)e.__webglFramebuffer[t]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);v(a.TEXTURE_CUBE_MAP,b.texture,n);for(t=0;6>t;t++)p(e.__webglFramebuffer[t],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+t);m(b.texture,n)&&u(a.TEXTURE_CUBE_MAP,b.texture,b.width,b.height);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),v(a.TEXTURE_2D,b.texture,n),p(e.__webglFramebuffer,
    b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),m(b.texture,n)&&u(a.TEXTURE_2D,b.texture,b.width,b.height),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
    d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);q(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,
    0);else throw Error("Unknown depthTexture format");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),y(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),y(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=l(b);if(m(e,f)){f=b.isWebGLRenderTargetCube?
    a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;var g=d.get(e).__webglTexture;c.bindTexture(f,g);u(f,e,b.width,b.height);c.bindTexture(f,null)}}}function Ve(a,b){return{convert:function(c){if(1E3===c)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;if(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;
    if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;if(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get("OES_texture_half_float");if(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;
    if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;if(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;if(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;
    if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(33776===c||33777===c||33778===c||33779===c)if(d=b.get("WEBGL_compressed_texture_s3tc"),null!==d){if(33776===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c)if(d=b.get("WEBGL_compressed_texture_pvrtc"),
    null!==d){if(35840===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c&&(d=b.get("WEBGL_compressed_texture_etc1"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c)if(d=b.get("WEBGL_compressed_texture_astc"),
    null!==d)return c;if(103===c||104===c)if(d=b.get("EXT_blend_minmax"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===c&&(d=b.get("WEBGL_depth_texture"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function la(a,b,c,d){Qa.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function qd(a){la.call(this);
    this.cameras=a||[]}function We(a){function b(){if(null!==d&&d.isPresenting){var b=d.getEyeParameters("left"),e=b.renderWidth;b=b.renderHeight;v=a.getPixelRatio();q=a.getSize();a.setDrawingBufferSize(2*e,b,1)}else c.enabled&&a.setDrawingBufferSize(q.width,q.height,v)}var c=this,d=null,e=null,f=null,g=new M,h=new M;"undefined"!==typeof window&&"VRFrameData"in window&&(e=new window.VRFrameData);var l=new M,m=new ja,u=new p,n=new la;n.bounds=new ea(0,0,.5,1);n.layers.enable(1);var t=new la;t.bounds=new ea(.5,
    0,.5,1);t.layers.enable(2);var k=new qd([n,t]);k.layers.enable(1);k.layers.enable(2);var q,v;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",b,!1);this.enabled=!1;this.userHeight=1.6;this.getDevice=function(){return d};this.setDevice=function(a){void 0!==a&&(d=a)};this.setPoseTarget=function(a){void 0!==a&&(f=a)};this.getCamera=function(a){if(null===d)return a;d.depthNear=a.near;d.depthFar=a.far;d.getFrameData(e);var b=d.stageParameters;b?g.fromArray(b.sittingToStandingTransform):
    g.makeTranslation(0,c.userHeight,0);b=e.pose;var r=null!==f?f:a;r.matrix.copy(g);r.matrix.decompose(r.position,r.quaternion,r.scale);null!==b.orientation&&(m.fromArray(b.orientation),r.quaternion.multiply(m));null!==b.position&&(m.setFromRotationMatrix(g),u.fromArray(b.position),u.applyQuaternion(m),r.position.add(u));r.updateMatrixWorld();if(!1===d.isPresenting)return a;n.near=a.near;t.near=a.near;n.far=a.far;t.far=a.far;k.matrixWorld.copy(a.matrixWorld);k.matrixWorldInverse.copy(a.matrixWorldInverse);
    n.matrixWorldInverse.fromArray(e.leftViewMatrix);t.matrixWorldInverse.fromArray(e.rightViewMatrix);h.getInverse(g);n.matrixWorldInverse.multiply(h);t.matrixWorldInverse.multiply(h);a=r.parent;null!==a&&(l.getInverse(a.matrixWorld),n.matrixWorldInverse.multiply(l),t.matrixWorldInverse.multiply(l));n.matrixWorld.getInverse(n.matrixWorldInverse);t.matrixWorld.getInverse(t.matrixWorldInverse);n.projectionMatrix.fromArray(e.leftProjectionMatrix);t.projectionMatrix.fromArray(e.rightProjectionMatrix);k.projectionMatrix.copy(n.projectionMatrix);
    a=d.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&n.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&t.bounds.fromArray(a.rightBounds));return k};this.getStandingMatrix=function(){return g};this.submitFrame=function(){d&&d.isPresenting&&d.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",b)}}function Xd(a){function b(){ka=new Hf(D);ka.get("WEBGL_depth_texture");ka.get("OES_texture_float");
    ka.get("OES_texture_float_linear");ka.get("OES_texture_half_float");ka.get("OES_texture_half_float_linear");ka.get("OES_standard_derivatives");ka.get("OES_element_index_uint");ka.get("ANGLE_instanced_arrays");ia=new Ve(D,ka);Ra=new Ff(D,ka,a);ba=new Eg(D,ka,ia);ba.scissor(V.copy(ca).multiplyScalar(R));ba.viewport(ob.copy(Y).multiplyScalar(R));da=new Kf(D);X=new tg;fa=new Fg(D,ka,ba,X,Ra,ia,da);qa=new yf(D);ra=new If(D,qa,da);sa=new Nf(ra,da);wa=new Mf(D);oa=new sg(A,ka,Ra);ua=new xg;pa=new Cg;ma=
    new Df(A,ba,ra,P);xa=new Ef(D,ka,da);za=new Jf(D,ka,da);Aa=new Dg(A,D,ba,fa,Ra);da.programs=oa.programs;A.context=D;A.capabilities=Ra;A.extensions=ka;A.properties=X;A.renderLists=ua;A.state=ba;A.info=da}function c(a){a.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");E=!0}function d(){console.log("THREE.WebGLRenderer: Context Restored.");E=!1;b()}function e(a){a=a.target;a.removeEventListener("dispose",e);f(a);X.remove(a)}function f(a){var b=X.get(a).program;a.program=void 0;void 0!==
    b&&oa.releaseProgram(b)}function g(a,b,c){a.render(function(a){A.renderBufferImmediate(a,b,c)})}function h(){var a=na.getDevice();a&&a.isPresenting?a.requestAnimationFrame(l):window.requestAnimationFrame(l)}function l(a){!1!==va&&(Ba(a),h())}function m(a,b,c){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)Z.pushLight(a),a.castShadow&&Z.pushShadow(a);else if(a.isSprite)a.frustumCulled&&!ha.intersectsSprite(a)||Z.pushSprite(a);else if(a.isImmediateRenderObject)c&&Nb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(pd),
    z.push(a,null,a.material,Nb.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&a.skeleton.update(),!a.frustumCulled||ha.intersectsObject(a)){c&&Nb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(pd);var d=sa.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,h=f.length;g<h;g++){var 0="==d?g.material:d;g=g.group;if(c.isArrayCamera){T=c;for(var" l="f[g],n=e[l.materialIndex];n&&n.visible&&z.push(a,d,n,Nb.z,l)}else" e.visible&&z.push(a,d,e,nb.z,null)}a="a.children;g=0;for(h=a.length;g<h;g++)m(a[g],b,c)}}function" u(a,b,c,d){for(var="" e="0,f=a.length;e<f;e++){var" g="a[e],h=g.object,l=g.geometry,m=void" u="c.cameras,t=0,k=u.length;t<k;t++){var" r="u[t];if(h.layers.test(r.layers)){var" q="r.bounds;ba.viewport(ob.set(q.x*J,q.y*W,q.z*J,q.w*W).multiplyScalar(R));n(h,b,r,l,m,g)}}}else" t="null,n(h,b,c,l,m,g)}}function" n(a,b,c,d,e,f){a.onbeforerender(a,b,c,d,e,f);z="pa.get(b,T||c);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);" if(a.isimmediaterenderobject){var="" h="a.isMesh&&0">a.matrixWorld.determinant();ba.setMaterial(e,h);h=k(c,b.fog,e,a);N="";g(a,h,e)}else A.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(A,b,c,d,e,f);Z=pa.get(b,T||c)}function t(a,b,c){var d=X.get(a),g=Z.state.lights;c=oa.getParameters(a,g.state,Z.state.shadowsArray,b,Ga.numPlanes,Ga.numIntersection,c);var h=oa.getProgramCode(a,c),l=d.program,m=!0;if(void 0===l)a.addEventListener("dispose",e);else if(l.code!==h)f(a);else{if(d.lightsHash!==g.state.hash)X.update(a,
    "lightsHash",g.state.hash);else if(void 0!==c.shaderID)return;m=!1}m&&(c.shaderID?(l=rb[c.shaderID],d.shader={name:a.type,uniforms:Da.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):d.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader,A),l=oa.acquireProgram(a,d.shader,c,h),d.program=l,a.program=l);c=l.getAttributes();if(a.morphTargets)for(h=a.numSupportedMorphTargets=0;h<a.maxmorphtargets;h++)0<= 0="==e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&e.lightsHash!==f.state.hash?c.needsUpdate=!0:void" c["morphtarget"+h]&&a.numsupportedmorphtargets++;if(a.morphnormals)for(h="a.numSupportedMorphNormals=0;h<A.maxMorphNormals;h++)0<=c["morphNormal"+h]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=Ga.numPlanes,d.numIntersection=Ga.numIntersection,c.clippingPlanes=Ga.uniform;d.fog=b;d.lightsHash=g.state.hash;a.lights&&(c.ambientLightColor.value=g.state.ambient,c.directionalLights.value=g.state.directional,c.spotLights.value=" g.state.spot,c.rectarealights.value="g.state.rectArea,c.pointLights.value=g.state.point,c.hemisphereLights.value=g.state.hemi,c.directionalShadowMap.value=g.state.directionalShadowMap,c.directionalShadowMatrix.value=g.state.directionalShadowMatrix,c.spotShadowMap.value=g.state.spotShadowMap,c.spotShadowMatrix.value=g.state.spotShadowMatrix,c.pointShadowMap.value=g.state.pointShadowMap,c.pointShadowMatrix.value=g.state.pointShadowMatrix);a=d.program.getUniforms();a=bb.seqWithValue(a.seq,c);d.uniformsList=" a}function="" k(a,b,c,d){aa="0;var" e="X.get(c),f=Z.state.lights;od&&(la||a!==O)&&Ga.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===O&&c.id===Q);!1===c.needsUpdate&&(void" g="!1,h=!1,l=!1;f=e.program;" var="" m="f.getUniforms(),n=e.shader.uniforms;ba.useProgram(f.program)&&(l=h=g=!0);c.id!==Q&&(Q=c.id,h=!0);if(g||a!==O){m.setValue(D,"projectionMatrix",a.projectionMatrix);Ra.logarithmicDepthBuffer&&m.setValue(D,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));O!==(T||a)&&(O=T||a,l=h=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)g=m.map.cameraPosition,void" 0!="=g&&g.setValue(D,Nb.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||" c.ismeshbasicmaterial||c.ismeshstandardmaterial||c.isshadermaterial||c.skinning)&&m.setvalue(d,"viewmatrix",a.matrixworldinverse)}if(c.skinning&&(m.setoptional(d,d,"bindmatrix"),m.setoptional(d,d,"bindmatrixinverse"),a="d.skeleton))if(g=a.bones,Ra.floatVertexTextures){if(void" u="new" float32array(g*g*4);u.set(a.bonematrices);var="" k="new" ib(u,g,g,1023,1015);k.needsupdate="!0;a.boneMatrices=u;a.boneTexture=k;a.boneTextureSize=" g}m.setvalue(d,"bonetexture",a.bonetexture);m.setvalue(d,"bonetexturesize",a.bonetexturesize)}else="" m.setoptional(d,a,"bonematrices");h&&(m.setvalue(d,"tonemappingexposure",a.tonemappingexposure),m.setvalue(d,"tonemappingwhitepoint",a.tonemappingwhitepoint),c.lights&&(h="l,n.ambientLightColor.needsUpdate=h,n.directionalLights.needsUpdate=h,n.pointLights.needsUpdate=h,n.spotLights.needsUpdate=h,n.rectAreaLights.needsUpdate=h,n.hemisphereLights.needsUpdate=h),b&&c.fog&&(n.fogColor.value=b.color,b.isFog?" (n.fognear.value="b.near,n.fogFar.value=b.far):b.isFogExp2&&(n.fogDensity.value=b.density)),c.isMeshBasicMaterial?q(n,c):c.isMeshLambertMaterial?(q(n,c),c.emissiveMap&&(n.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(q(n,c),c.isMeshToonMaterial?(v(n,c),c.gradientMap&&(n.gradientMap.value=c.gradientMap)):v(n,c)):c.isMeshStandardMaterial?(q(n,c),c.isMeshPhysicalMaterial&&(n.clearCoat.value=c.clearCoat,n.clearCoatRoughness.value=c.clearCoatRoughness),n.roughness.value=c.roughness,n.metalness.value=" c.metalness,c.roughnessmap&&(n.roughnessmap.value="c.roughnessMap),c.metalnessMap&&(n.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(n.emissiveMap.value=c.emissiveMap),c.bumpMap&&(n.bumpMap.value=c.bumpMap,n.bumpScale.value=c.bumpScale),c.normalMap&&(n.normalMap.value=c.normalMap,n.normalScale.value.copy(c.normalScale)),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias),c.envMap&&(n.envMapIntensity.value=" c.envmapintensity)):c.ismeshdepthmaterial?(q(n,c),c.displacementmap&&(n.displacementmap.value="c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(q(n,c),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias),n.referencePosition.value.copy(c.referencePosition),n.nearDistance.value=c.nearDistance,n.farDistance.value=c.farDistance):" c.ismeshnormalmaterial?(q(n,c),c.bumpmap&&(n.bumpmap.value="c.bumpMap,n.bumpScale.value=c.bumpScale),c.normalMap&&(n.normalMap.value=c.normalMap,n.normalScale.value.copy(c.normalScale)),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(n.diffuse.value=c.color,n.opacity.value=c.opacity,c.isLineDashedMaterial&&(n.dashSize.value=c.dashSize,n.totalSize.value=c.dashSize+c.gapSize," n.scale.value="c.scale)):c.isPointsMaterial?(n.diffuse.value=c.color,n.opacity.value=c.opacity,n.size.value=c.size*R,n.scale.value=.5*W,n.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&(b=c.map.offset,h=c.map.repeat,l=c.map.center,c.map.matrix.setUvTransform(b.x,b.y,h.x,h.y,c.map.rotation,l.x,l.y)),n.uvTransform.value.copy(c.map.matrix))):c.isShadowMaterial&&(n.color.value=c.color,n.opacity.value=c.opacity),void" bb.upload(d,e.uniformslist,n,a));c.isshadermaterial&&!0="==c.uniformsNeedUpdate&&(bb.upload(D,e.uniformsList,n,A),c.uniformsNeedUpdate=!1);m.setValue(D,"modelViewMatrix",d.modelViewMatrix);m.setValue(D,"normalMatrix",d.normalMatrix);m.setValue(D,"modelMatrix",d.matrixWorld);return" f}function="" q(a,b){a.opacity.value="b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);" b.specularmap&&(a.specularmap.value="b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.maxMipLevel.value=X.get(b.envMap).__maxMipLevel);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var" c="b.map;else" b.specularmap?c="b.specularMap:b.displacementMap?" d="c.repeat,e=c.center;c.matrix.setUvTransform(b.x,b.y,d.x,d.y,c.rotation,e.x,e.y)}a.uvTransform.value.copy(c.matrix)}}function" v(a,b){a.specular.value="b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&" (a.emissivemap.value="b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log("THREE.WebGLRenderer","91");a=a||{};var" x="void" a.context?a.context:null,w="void" this.localclippingenabled="!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var" a="this,E=!1,F=null,I=null,Q=-1,N="",O=null,T=null,ob=new" ea,v="new" ea,u="null,aa=0,J=x.width,W=x.height,R=1,Y=new" ea(0,0,j,w),ca="new" ea(0,0,j,w),ja="!1,ha=new" ld,ga="new" gf,od="!1,la=!1,pd=new" m,nb="new" p;try{w="{alpha:w,depth:B,stencil:G,antialias:K,premultipliedAlpha:P,preserveDrawingBuffer:H," powerpreference:c};x.addeventlistener("webglcontextlost",c,!1);x.addeventlistener("webglcontextrestored",d,!1);var="" error("error="" creating="" webgl="" context="" with="" your="" selected attributes.");throw="" context.");}void="" "+="" gg.message)}var="" ka,ra,ba,da,x,fa,qa,ra,sa,oa,ua,pa,ma,wa,xa,za,aa,ia;b();var="" na="new" we(a);this.vr="na;var" ca="new" ue(a,sa,ra.maxtexturesize);this.shadowmap="Ca;this.getContext=function(){return" d};this.getcontextattributes="function(){return" d.getcontextattributes()};this.forcecontextloss="function(){var" r};this.setpixelratio="function(a){void" can't="" change="" size="" while="" vr="" device="" is="" presenting."):(j="a,W=b,x.width=a*R,x.height=b*R,!1!==c&&(x.style.width=a+"px",x.style.height=b+"px"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:J*R,height:W*R}};this.setDrawingBufferSize=function(a,b,c){J=a;W=b;R=c;x.width=a*" c;x.height="b*c;this.setViewport(0,0,a,b)};this.getCurrentViewport=function(){return" ob};this.setviewport="function(a,b,c,d){Y.set(a,W-b-d,c,d);ba.viewport(ob.copy(Y).multiplyScalar(R))};this.setScissor=function(a,b,c,d){ca.set(a,W-b-d,c,d);ba.scissor(V.copy(ca).multiplyScalar(R))};this.setScissorTest=function(a){ba.setScissorTest(ja=a)};this.getClearColor=function(){return" ma.getclearcolor()};this.setclearcolor="function(){ma.setClearColor.apply(ma,arguments)};this.getClearAlpha=function(){return" ma.getclearalpha()};="" this.setclearalpha="function(){ma.setClearAlpha.apply(ma,arguments)};this.clear=function(a,b,c){var" c,!1);x.removeeventlistener("webglcontextrestored",d,!1);ua.dispose();pa.dispose();x.dispose();sa.dispose();na.dispose();va="!1};this.renderBufferImmediate=function(a,b,c){ba.initAttributes();var" a.positionarray,d.dynamic_draw),ba.enableattribute(b.position),d.vertexattribpointer(b.position,3,d.float,!1,0,0));if(a.hasnormals){d.bindbuffer(d.array_buffer,d.normal);if(!c.ismeshphongmaterial&&!c.ismeshstandardmaterial&&!c.ismeshnormalmaterial&&!0="==c.flatShading)for(var" a.normalarray,d.dynamic_draw);ba.enableattribute(b.normal);d.vertexattribpointer(b.normal,3,d.float,!1,0,0)}a.hasuvs&&c.map&&(d.bindbuffer(d.array_buffer,d.uv),d.bufferdata(d.array_buffer,a.uvarray,d.dynamic_draw),ba.enableattribute(b.uv),d.vertexattribpointer(b.uv,2,d.float,!1,0,0));a.hascolors&&0!="=c.vertexColors&&(D.bindBuffer(D.ARRAY_BUFFER,d.color),D.bufferData(D.ARRAY_BUFFER,a.colorArray,D.DYNAMIC_DRAW),ba.enableAttribute(b.color),D.vertexAttribPointer(b.color,3,D.FLOAT,!1,0,0));ba.disableUnusedAttributes();" d.drawarrays(d.triangles,0,a.count);a.count="0};this.renderBufferDirect=function(a,b,c,d,e,f){var">e.matrixWorld.determinant();ba.setMaterial(d,g);var h=k(a,b,d,e);a=c.id+"_"+h.id+"_"+(!0===d.wireframe);var l=!1;a!==N&&(N=a,l=!0);e.morphTargetInfluences&&(wa.update(e,c,d,h),l=!0);g=c.index;var m=c.attributes.position;b=1;!0===d.wireframe&&(g=ra.getWireframeAttribute(c),b=2);a=xa;if(null!==g){var n=qa.get(g);a=za;a.setIndex(n)}if(l){l=void 0;if(c&&c.isInstancedBufferGeometry&&null===ka.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
    else{void 0===l&&(l=0);ba.initAttributes();var u=c.attributes;h=h.getAttributes();var t=d.defaultAttributeValues;for(K in h){var r=h[K];if(0<=r){var 0="==c.maxInstancedCount&&(c.maxInstancedCount=y.meshPerAttribute*y.count)):" q="u[K];if(void" 0!="=q){var" p="q.normalized,v=q.itemSize,x=qa.get(q);if(void" w="x.buffer,B=x.type;x=x.bytesPerElement;if(q.isInterleavedBufferAttribute){var" y="q.data,G=y.stride;q=q.offset;y&&y.isInstancedInterleavedBuffer?(ba.enableAttributeAndDivisor(r,y.meshPerAttribute),void" ba.enableattribute(r);d.bindbuffer(d.array_buffer,w);d.vertexattribpointer(r,v,b,p,g*x,(l*g+q)*x)}else="" q.isinstancedbufferattribute?(ba.enableattributeanddivisor(r,q.meshperattribute),void="" if(void="" 2:d.vertexattrib2fv(r,p);break;case="" 3:d.vertexattrib3fv(r,p);break;case="" 4:d.vertexattrib4fv(r,="" p);break;default:d.vertexattrib1fv(r,p)}}}ba.disableunusedattributes()}null!="=g&&D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,n.buffer)}n=Infinity;null!==g?n=g.count:void" k="Math.max(g,m);f=Math.max(0,Math.min(n,g+c.drawRange.count*b,m+(null!==f?f.count*b:Infinity))-1-K+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)ba.setLineWidth(d.wireframeLinewidth*(null===F?R:1)),a.setMode(D.LINES);else" switch(e.drawmode){case="" 0:a.setmode(d.triangles);break;="" case="" 1:a.setmode(d.triangle_strip);break;case="" 2:a.setmode(d.triangle_fan)}else="" e.isline?(d="d.linewidth,void" z.setuplights(b);a.traverse(function(b){if(b.material)if(array.isarray(b.material))for(var="" c="0;c<b.material.length;c++)t(b.material[c],a.fog,b);else" t(b.material,a.fog,b)})};var="" va="!1,Ba=null;this.animate=function(a){Ba=a;null!==Ba?va||(h(),va=!0):va=!1};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error("THREE.WebGLRenderer.render:" camera="" is="" not="" an="" instance="" of="" three.camera.");else="" if(!e){n="" ;q="-1;O=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();" na.enabled&&(b="na.getCamera(b));Z=pa.get(a,b);Z.init();a.onBeforeRender(A,a,b,c);pd.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);ha.setFromMatrix(pd);la=this.localClippingEnabled;od=Ga.init(this.clippingPlanes,la,b);z=ua.get(a,b);z.init();m(a,b,A.sortObjects);!0===A.sortObjects&&z.sort();od&&Ga.beginShadows();Ca.render(Z.state.shadowsArray,a,b);Z.setupLights(b);od&&Ga.endShadows();this.info.autoReset&&this.info.reset();void" z.opaque;var="" e="z.transparent;if(a.overrideMaterial){var" f="a.overrideMaterial;d.length&&u(d,a,b,f);e.length&&u(e,a,b,f)}else" d.length&&u(d,a,b),e.length&&u(e,a,b);aa.render(z.state.spritesarray,a,b);c&&fa.updaterendertargetmipmap(c);ba.buffers.depth.settest(!0);ba.buffers.depth.setmask(!0);ba.buffers.color.setmask(!0);ba.setpolygonoffset(!1);a.onafterrender(a,a,b);na.enabled&&na.submitframe();z="z=null}};this.allocTextureUnit=function(){var" a="aa;a">=Ra.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+
    a+" texture units while this GPU supports only "+Ra.maxTextures);aa+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);fa.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);fa.setTexture2D(b,
    c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?fa.setTextureCube(b,c):fa.setTextureCubeDynamic(b,c)}}();this.getRenderTarget=function(){return F};this.setRenderTarget=function(a){(F=a)&&void 0===X.get(a).__webglFramebuffer&&fa.setupRenderTarget(a);
    var b=null,c=!1;a?(b=X.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],c=!0),ob.copy(a.viewport),V.copy(a.scissor),U=a.scissorTest):(ob.copy(Y).multiplyScalar(R),V.copy(ca).multiplyScalar(R),U=ja);I!==b&&(D.bindFramebuffer(D.FRAMEBUFFER,b),I=b);ba.viewport(ob);ba.scissor(V);ba.setScissorTest(U);c&&(c=X.get(a.texture),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=
    function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=X.get(a).__webglFramebuffer;if(g){var h=!1;g!==I&&(D.bindFramebuffer(D.FRAMEBUFFER,g),h=!0);try{var l=a.texture,m=l.format,n=l.type;1023!==m&&ia.convert(m)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===n||ia.convert(n)===D.getParameter(D.IMPLEMENTATION_COLOR_READ_TYPE)||1015===n&&(ka.get("OES_texture_float")||
    ka.get("WEBGL_color_buffer_float"))||1016===n&&ka.get("EXT_color_buffer_half_float")?D.checkFramebufferStatus(D.FRAMEBUFFER)===D.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&d.readpixels(b,c,d,e,ia.convert(m),ia.convert(n),f):console.error("three.webglrenderer.readrendertargetpixels: 0="==b)this.calculateInverses();else" readpixels="" from="" rendertarget="" failed.="" framebuffer="" not="" complete."):console.error("three.webglrenderer.readrendertargetpixels:="" is="" in="" unsignedbytetype="" or="" implementation="" defined="" type.")}finally{h&&="" d.bindframebuffer(d.framebuffer,i)}}}else="" console.error("three.webglrenderer.readrendertargetpixels:="" three.webglrendertarget.")};this.copyframebuffertotexture="function(a,b,c){var" d="b.image.width,e=b.image.height,f=ia.convert(b.format);this.setTexture2D(b,0);D.copyTexImage2D(D.TEXTURE_2D,c||0,f,a.x,a.y,d,e,0)};this.copyTextureToTexture=function(a,b,c,d){var" e="b.image.width,f=b.image.height,g=ia.convert(c.format),h=ia.convert(c.type);b=b.isDataTexture?b.image.data:b.image;this.setTexture2D(c," 0);d.texsubimage2d(d.texture_2d,d||0,a.x,a.y,e,f,g,h,b)}}function="" ob(a,b){this.name="" ;this.color="new" i(a);this.density="void" 0!="=b?b:2.5E-4}function" pb(a,b,c){this.name="" i(a);this.near="void" rd(){a.call(this);this.type="Scene" ;this.overridematerial="this.fog=this.background=null;this.autoUpdate=!0}function" eb(a){o.call(this);this.type="SpriteMaterial" i(16777215);this.map="null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}" function="" ac(a){a.call(this);this.type="Sprite" ;this.material="void" eb;this.center="new" c(.5,.5)}function="" bc(){a.call(this);this.type="LOD" ;object.defineproperties(this,{levels:{enumerable:!0,value:[]}})}function="" cc(a,b){a="a||[];this.bones=a.slice(0);this.boneMatrices=new" float32array(16*this.bones.length);if(void="" if(this.bones.length="==b.length)this.boneInverses=b.slice(0);else" for(console.warn("three.skeleton="" boneinverses="" the="" wrong="" length."),this.boneinverses="[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new" m)}function="" sd(){a.call(this);this.type="Bone" }function="" td(a,b){oa.call(this,a,b);this.type="SkinnedMesh" ;this.bindmode="attached" ;this.bindmatrix="new" m;this.bindmatrixinverse="new" m;a="this.initBones();a=new" cc(a);this.bind(a,this.matrixworld);this.normalizeskinweights()}function="" u(a){o.call(this);this.type="LineBasicMaterial" i(16777215);this.linewidth="1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(a)}" ua(a,b,c){if(1="==c)return" console.warn("three.line:="" parameter="" three.linepieces="" no="" longer="" supported.="" created="" three.linesegments="" instead."),new="" aa(a,b);a.call(this);this.type="Line" ;this.geometry="void" f;this.material="void" u({color:16777215*math.random()})}function="" aa(a,b){ua.call(this,a,b);this.type="LineSegments" ud(a,b){ua.call(this,a,b);this.type="LineLoop" ha(a){o.call(this);this.type="PointsMaterial" 1;this.sizeattenuation="!0;this.lights=!1;this.setValues(a)}function" qb(a,b){a.call(this);this.type="Points" ha({color:16777215*math.random()})}function="" vd(){a.call(this);this.type="Group" yd(a,b,c,d,e,f,g,h,l){y.call(this,a,b,c,d,e,f,g,h,l);this.generatemipmaps="!1}function" rb(a,b,c,d,e,f,g,h,l,m,u,n){y.call(this,null,f,g,h,l,m,d,e,u,n);this.image="{width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function" dc(a,="" b,c,d,e,f,g,h,l,m){m="void" error("depthtexture="" format="" must="" be="" either="" three.depthformat="" three.depthstencilformat");void="" sb(a){f.call(this);this.type="WireframeGeometry" ;var="" b="[],c,d,e,f=[0,0],g={},h=["a","b","c"];if(a&&a.isGeometry){var" l="a.faces;var" m="0;for(d=l.length;m<d;m++){var" u="l[m];for(c=0;3">c;c++){var n=u[h[c]];var t=u[h[(c+1)%3]];f[0]=Math.min(n,t);f[1]=Math.max(n,t);n=f[0]+","+f[1];void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}for(n in g)m=g[n],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry)if(h=new p,null!==a.index){l=a.attributes.position;u=a.index;var k=a.groups;0===k.length&&(k=[{start:0,count:u.count,materialIndex:0}]);a=0;for(e=k.length;a<e;++a)for(m= k[a],c="m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3">c;c++)n=u.getX(m+c),t=u.getX(m+(c+1)%3),f[0]=Math.min(n,t),f[1]=Math.max(n,t),n=f[0]+","+f[1],void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]});for(n in g)m=g[n],h.fromBufferAttribute(l,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(l,m.index2),b.push(h.x,h.y,h.z)}else for(l=a.attributes.position,m=0,d=l.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(l,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(l,g),b.push(h.x,
    h.y,h.z);this.addAttribute("position",new z(b,3))}function Ec(a,b,c){N.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Tb(a,b,c));this.mergeVertices()}function Tb(a,b,c){F.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=new p,l=new p,m=new p,u=new p,n=new p,t,k,q=b+1;for(t=0;t<=c;t++){var v="t/c;for(k=0;k<=b;k++){var" x="k/b;a(x,v,l);e.push(l.x,l.y,l.z);0<=x-1E-5?(a(x-" 1e-5,v,m),u.subvectors(l,m)):(a(x+1e-5,v,m),u.subvectors(m,l));0<="v-1E-5?(a(x,v-1E-5,m),n.subVectors(l,m)):(a(x,v+1E-5,m),n.subVectors(m,l));h.crossVectors(u,n).normalize();f.push(h.x,h.y,h.z);g.push(x,v)}}for(t=0;t<c;t++)for(k=0;k<b;k++)a=t*q+k+1,h=(t+1)*q+k+1,l=(t+1)*q+k,d.push(t*q+k,a,l),d.push(a,h,l);this.setIndex(d);this.addAttribute("position",new" z(e,3));this.addattribute("normal",new="" z(f,3));this.addattribute("uv",new="" z(g,2))}function="" fc(a,b,c,d){n.call(this);this.type="PolyhedronGeometry" ;="" this.parameters="{vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new" pa(a,b,c,d));this.mergevertices()}function="" pa(a,b,c,d){function="" e(a){h.push(a.x,a.y,a.z)}function="" f(b,c){b*="3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function" g(a,b,c,d){0="">d&&1===a.x&&(l[b]=a.x-1);0===c.x&&0===c.z&&(l[b]=d/2/Math.PI+.5)}F.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],l=[];(function(a){for(var c=new p,d=new p,g=new p,h=0;h<
    b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var l,m,k=c,y=d,w=g,B=Math.pow(2,a),G=[];for(m=0;m<=b;m++){g[m]=[];var k="k.clone().lerp(w,m/B),P=y.clone().lerp(w,m/B),H=B-m;for(l=0;l<=H;l++)G[m][l]=0===l&&m===B?K:K.clone().lerp(P,l/H)}for(m=0;m<B;m++)for(l=0;l<2*(B-m)-1;l++)k=Math.floor(l/2),0===l%2?(e(G[m][k+1]),e(G[m+1][k]),e(G[m][k])):(e(G[m][k+1]),e(G[m+1][k+1]),e(G[m+1][k]))}})(d);(function(a){for(var" b="new" p,c="0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a)," h[c+0]="b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var" a="new" p,b="0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],l.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));a=new" p;b="new" p;for(var="" c="new" p,d="new" p,e="new" c,f="new" c,k="new" c,x="0,y=0;x<h.length;x+=9,y+=6){a.set(h[x+0],h[x+1],h[x+2]);b.set(h[x+3],h[x+4],h[x+5]);c.set(h[x+6],h[x+7],h[x+8]);e.set(l[y+0],l[y+1]);f.set(l[y+2],l[y+3]);k.set(l[y+4],l[y+5]);d.copy(a).add(b).add(c).divideScalar(3);" var="" w="Math.atan2(d.z,-d.x);g(e,y+0,a,w);g(f,y+2,b,w);g(k,y+4,c,w)}for(a=0;a<l.length;a+=6)b=l[a+0],c=l[a+2],d=l[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1">e&&(.2>b&&(l[a+0]+=1),.2>c&&(l[a+2]+=1),.2>d&&(l[a+4]+=1))})();this.addAttribute("position",new z(h,3));this.addAttribute("normal",new z(h.slice(),3));this.addAttribute("uv",new z(l,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function Gc(a,b){N.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Ub(a,
    b));this.mergeVertices()}function Ub(a,b){pa.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Hc(a,b){N.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new sb(a,b));this.mergeVertices()}function sb(a,b){pa.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";
    this.parameters={radius:a,detail:b}}function Ic(a,b){N.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Vb(a,b));this.mergeVertices()}function Vb(a,b){var c=(1+Math.sqrt(5))/2;pa.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";
    this.parameters={radius:a,detail:b}}function Jc(a,b){N.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Wb(a,b));this.mergeVertices()}function Wb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;pa.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,
    0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Kc(a,b,c,d,e,f){N.call(this);this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new Xb(a,b,c,d,e);this.tangents=a.tangents;
    this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Xb(a,b,c,d,e){function f(e){u=a.getPointAt(e/b,u);var f=g.normals[e];e=g.binormals[e];for(k=0;k<=d;k++){var m="k/d*Math.PI*2,n=Math.sin(m);m=-Math.cos(m);l.x=m*f.x+n*e.x;l.y=m*f.y+n*e.y;l.z=m*f.z+n*e.z;l.normalize();q.push(l.x,l.y,l.z);h.x=u.x+c*l.x;h.y=u.y+c*l.y;h.z=u.z+c*l.z;r.push(h.x,h.y,h.z)}}F.call(this);this.type="TubeBufferGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d," closed:e};b="b||64;c=c||1;d=d||8;e=e||!1;var" g="a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var" h="new" p,l="new" p,m="new" c,u="new" p,n,k,r="[],q=[],v=[],x=[];for(n=0;n<b;n++)f(n);f(!1===e?b:0);for(n=0;n<=b;n++)for(k=0;k<=d;k++)m.x=n/b,m.y=k/d,v.push(m.x,m.y);(function(){for(k=1;k<=b;k++)for(n=1;n<=d;n++){var" a="(d+1)*k+(n-1),c=(d+1)*k+n,e=(d+1)*(k-1)+n;x.push((d+1)*(k-1)+(n-1),a,e);x.push(a,c,e)}})();this.setIndex(x);this.addAttribute("position",new" z(r,="" 3));this.addattribute("normal",new="" z(q,3));this.addattribute("uv",new="" z(v,2))}function="" lc(a,b,c,d,e,f,g){n.call(this);this.type="TorusKnotGeometry" ;this.parameters="{radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void" 0!="=g&&console.warn("THREE.TorusKnotGeometry:" heightscale="" has="" been="" deprecated.="" use="" .scale(="" x,="" y,="" z="" )="" instead.");this.frombuffergeometry(new="" yb(a,b,c,d,e,f));this.mergevertices()}function="" yb(a,b,c,d,e,f){function="" g(a,b,c,d,e){var="" f="Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*" (2+c)*.5*math.cos(a);e.y="d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}F.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var" p,r="new" p,q="new" p,v="new" p,x="new" p,y="new" p,w="new" p;for(n="0;n<=c;++n){var" b="n/c*e*Math.PI*2;g(B,e,f,a,q);g(B+.01,e,f,a,v);y.subVectors(v,q);w.addVectors(v,q);x.crossVectors(y,w);w.crossVectors(x,y);x.normalize();w.normalize();" for(b="0;B<=d;++B){var" z(l,3));this.addattribute("normal",new="" z(m,3));this.addattribute("uv",new="" z(u,2))}function="" mc(a,b,="" c,d,e){n.call(this);this.type="TorusGeometry" zb(a,b,c,d,e));this.mergevertices()}function="" zb(a,b,c,d,e){f.call(this);this.type="TorusBufferGeometry" p,u="new" p,n="new" p,k,r;for(k="0;k<=c;k++)for(r=0;r<=d;r++){var" q="r/d*e,v=k/c*" math.pi*2;u.x="(a+b*Math.cos(v))*Math.cos(q);u.y=(a+b*Math.cos(v))*Math.sin(q);u.z=b*Math.sin(v);g.push(u.x,u.y,u.z);m.x=a*Math.cos(q);m.y=a*Math.sin(q);n.subVectors(u,m).normalize();h.push(n.x,n.y,n.z);l.push(r/d);l.push(k/c)}for(k=1;k<=c;k++)for(r=1;r<=d;r++)a=(d+1)*(k-1)+r-1,b=(d+1)*(k-1)+r,e=(d+1)*k+r,f.push((d+1)*k+r-1,a,e),f.push(a,b,e);this.setIndex(f);this.addAttribute("position",new" z(g,3));this.addattribute("normal",new="" z(h,3));this.addattribute("uv",new="" z(l,2))}function="" xe(a,b,c,d,e){for(var="" f,="" for(e="c-d;e">=b;e-=d)f=Ye(e,a[e],a[e+1],f);f&&tb(f,f.next)&&(Nc(f),f=f.next);return f}function Oc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!tb(a,a.next)&&0!==ra(a.prev,a,a.next))a=a.next;else{Nc(a);a=b=a.prev;if(a===a.next)break;c=!0}}while(c||a!==b);return b}function Pc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,l=h;do null===l.z&&(l.z=Zd(l.x,l.y,d,e,f)),l.prevZ=l.prev,l=l.nextZ=
    l.next;while(l!==h);l.prevZ.nextZ=null;l.prevZ=null;h=l;var m,u,n,k,r=1;do{l=h;var q=h=null;for(u=0;l;){u++;var p=l;for(m=n=0;m<r&&(n++,p=p.nextz,p);m++);for(k=r;0<n||0<k&&p;)0!==n&&(0===k||!p||l.z<=p.z)?(m=l,l=l.nextz,n--):(m=p,p=p.nextz,k--),q?q.nextz=m:h=m,m.prevz=q,q=m;l=p}q.nextz=null;r*=2}while(1<u)}for(h=a;a.prev!==a.next;){l=a.prev;p=a.next;if(f)a:{q=a;k=d;var x="e,y=f;u=q.prev;n=q;r=q.next;if(0<=ra(u,n,r))q=!1;else{var" w="u.x">n.x?u.x>r.x?u.x:r.x:n.x>r.x?n.x:r.x,B=u.y>n.y?u.y>r.y?u.y:r.y:n.y>
    r.y?n.y:r.y;m=Zd(u.x<n.x?u.x<r.x?u.x:r.x:n.x<r.x?n.x:r.x,u.y<n.y?u.y<r.y?u.y:r.y:n.y<r.y?n.y:r.y,k,x,y);k=zd(w,b,k,x,y);for(x=q.nextz;x&&x.z<=k;){if(x!==q.prev&&x!==q.next&&wd(u.x,u.y,n.x,n.y,r.x,r.y,x.x,x.y)&&0<=ra(x.prev,x,x.next)){q=!1;break a}x="x.nextZ}for(x=q.prevZ;x&&x.z">=m;){if(x!==q.prev&&x!==q.next&&wd(u.x,u.y,n.x,n.y,r.x,r.y,x.x,x.y)&&0<=ra(x.prev,x,x.next)){q=!1;break a}x="x.prevZ}q=!0}}else" a:if(q="a,u=q.prev,n=q,r=q.next,0<=ra(u,n,r))q=!1;else{for(m=q.next.next;m!==q.prev;){if(wd(u.x,u.y," n.x,n.y,r.x,r.y,m.x,m.y)&&0<="ra(m.prev,m,m.next)){q=!1;break" a}m="m.next}q=!0}if(q)b.push(l.i/c),b.push(a.i/c),b.push(p.i/c),Nc(a),h=a=p.next;else" if(a="p,a===h){if(!g)Pc(Oc(a),b,c,d,e,f,1);else" if(1="==g){g=b;h=c;l=a;do" p="l.prev,q=l.next.next,!tb(p,q)&&Ze(p,l,l.next,q)&&Qc(p,q)&&Qc(q,p)&&(g.push(p.i/h),g.push(l.i/h),g.push(q.i/h),Nc(l),Nc(l.next),l=a=q),l=l.next;while(l!==a);a=l;Pc(a,b,c,d,e,f,2)}else" if(2="==g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(l=g.i!==h.i){l=g;p=h;if(q=l.next.i!==p.i&&l.prev.i!==" p.i){b:{q="l;do{if(q.i!==l.i&&q.next.i!==l.i&&q.i!==p.i&&q.next.i!==p.i&&Ze(q,q.next,l,p)){q=!0;break" b}q="q.next}while(q!==l);q=!1}q=!q}if(q=q&&Qc(l,p)&&Qc(p,l)){q=l;u=!1;n=(l.x+p.x)/2;p=(l.y+p.y)/2;do" q.y="">p!==q.next.y>p&&q.next.y!==q.y&&n<(q.next.x-q.x)*(p-q.y) (q.next.y-q.y)+q.x&&(u="!u),q=q.next;while(q!==l);q=u}l=q}if(l){a=$e(g,h);g=Oc(g,g.next);a=Oc(a,a.next);Pc(g,b,c,d,e,f);Pc(a,b,c,d,e,f);break" a}h="h.next}g=g.next}while(g!==a)}break}}}}function" hg(a,b){return="" a.x-b.x}function="" ig(a,b){var="" c="b," d="a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e">=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d="==f)return" h.prev;b="h;g=h.x;var" l="h.y,m=Infinity;for(c=h.next;c!==b;){if(d">=c.x&&c.x>=g&&d!==c.x&&wd(e<l?d:f,e,g,l,e<l?f:d,e,c.x,c.y)){var u="Math.abs(e-c.y)/(d-c.x);(u<m||u===m&&c.x">h.x)&&Qc(c,a)&&(h=c,m=u)}c=c.next}return h}function Zd(a,
    b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function 0="" jg(a){var="" b="a,c=a;do" b.x<c.x&&(c="b),b=b.next;while(b!==a);return" c}function="" wd(a,b,c,d,e,f,g,h){return="" 0<="(e-g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function" ra(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function="" tb(a,b){return="" a.x="==" b.x&&a.y="==b.y}function" ze(a,b,c,d){return="" tb(a,b)&&tb(c,d)||tb(a,d)&&tb(c,b)?!0:0<ra(a,b,c)!="=0<ra(a,b,d)&&0<ra(c,d,a)!==0<ra(c,d,b)}function" qc(a,b){return="">ra(a.prev,a,a.next)?0<=ra(a,b,a.next)&&0<=ra(a,a.prev,b):0>ra(a,b,a.prev)||0>ra(a,a.next,b)}function $e(a,b){var c=new $d(a.i,a.x,a.y),d=new $d(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function Ye(a,b,c,d){a=new $d(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):
    (a.prev=a,a.next=a);return a}function Nc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function $d(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function af(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function 0="==b.bevelThickness&&(b.bevelThickness=10);void" bf(a,b){for(var="" c="0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}function" fb(a,b){n.call(this);this.type="ExtrudeGeometry" ;this.parameters="{shapes:a,options:b};this.fromBufferGeometry(new" ia(a,="" b));this.mergevertices()}function="" ia(a,b){"undefined"!="=typeof" a&&(f.call(this),this.type="ExtrudeBufferGeometry" ,a="Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeVertexNormals())}function" rc(a,b){n.call(this);this.type="TextGeometry" $b(a,b));this.mergevertices()}function="" $b(a,b){b="b||{};var" console.error("three.textgeometry:="" font="" parameter="" is="" not="" an="" instance="" of="" three.font."),new="" n;a="c.generateShapes(a," b.size,b.curvesegments);b.amount="void" 0!="=b.height?b.height:50;void" sc(a,b,c,d,e,f,g){n.call(this);this.type="SphereGeometry" ub(a,b,c,d,e,f,g));this.mergevertices()}function="" ub(a,="" b,c,d,e,f,g){f.call(this);this.type="SphereBufferGeometry" h="f+g,l,m,u=0,n=[],k=new" p,r="new" p,q="[],v=[],x=[],y=[];for(m=0;m<=c;m++){var" w="[],B=m/c;for(l=0;l<=b;l++){var" g="l/b;k.x=-a*Math.cos(d+G*e)*Math.sin(f+B*g);k.y=a*Math.cos(f+B*g);" k.z="a*Math.sin(d+G*e)*Math.sin(f+B*g);v.push(k.x,k.y,k.z);r.set(k.x,k.y,k.z).normalize();x.push(r.x,r.y,r.z);y.push(G,1-B);w.push(u++)}n.push(w)}for(m=0;m<c;m++)for(l=0;l<b;l++)a=n[m][l+1],d=n[m][l],e=n[m+1][l],g=n[m+1][l+1],(0!==m||0<f)&&q.push(a,d,g),(m!==c-1||h<Math.PI)&&q.push(d,e,g);this.setIndex(q);this.addAttribute("position",new" z(v,3));this.addattribute("normal",new="" z(x,3));this.addattribute("uv",new="" z(y,2))}function="" tc(a,b,c,d,e,f){n.call(this);this.type="RingGeometry" outerradius:b,thetasegments:c,phisegments:d,thetastart:e,thetalength:f};this.frombuffergeometry(new="" ac(a,b,c,d,e,f));this.mergevertices()}function="" ac(a,b,c,d,e,f){f.call(this);this.type="RingBufferGeometry" c,q,v;for(q="0;q<=d;q++){for(v=" 0;v<="c;v++)a=e+v/c*f,t.x=k*Math.cos(a),t.y=k*Math.sin(a),h.push(t.x,t.y,t.z),l.push(0,0,1),r.x=(t.x/b+1)/2,r.y=(t.y/b+1)/2,m.push(r.x,r.y);k+=n}for(q=0;q<d;q++)for(b=q*(c+1),v=0;v<c;v++)a=v+b,e=a+c+1,f=a+c+2,k=a+1,g.push(a,e,k),g.push(e,f,k);this.setIndex(g);this.addAttribute("position",new" z(h,3));this.addattribute("normal",new="" z(l,3));this.addattribute("uv",new="" z(m,2))}function="" uc(a,b,c,d){n.call(this);this.type="LatheGeometry" bc(a,="" b,c,d));this.mergevertices()}function="" bc(a,b,c,d){f.call(this);this.type="LatheBufferGeometry" e="[],f=[],g=[],h=1/b,l=new" p,m="new" c,k;for(k="0;k<=b;k++){var" n="c+k*h*d;var" t="Math.sin(n),r=Math.cos(n);for(n=0;n<=a.length-1;n++)l.x=a[n].x*t,l.y=a[n].y,l.z=a[n].x*r,f.push(l.x,l.y,l.z),m.x=k/b,m.y=n/(a.length-1),g.push(m.x,m.y)}for(k=0;k<b;k++)for(n=0;n<a.length-1;n++)c=n+" k*a.length,h="c+a.length,l=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,l,m);this.setIndex(e);this.addAttribute("position",new" z(f,3));this.addattribute("uv",new="" z(g,2));this.computevertexnormals();if(d="==2*Math.PI)for(d=this.attributes.normal.array,e=new" p,f="new" p,g="new" p,c="b*a.length*3,n=k=0;k<a.length;k++,n+=3)e.x=d[n+0],e.y=d[n+1],e.z=d[n+2],f.x=d[c+n+0],f.y=d[c+n+1],f.z=d[c+n+2],g.addVectors(e,f).normalize(),d[n+0]=d[c+n+0]=g.x,d[n+1]=d[c+n+1]=g.y,d[n+2]=d[c+n+2]=g.z}function" vb(a,b){n.call(this);="" this.type="ShapeGeometry" ;"object"="==typeof" b&&(console.warn("three.shapegeometry:="" options="" has="" been="" removed."),b="b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new" wb(a,b));this.mergevertices()}function="" wb(a,b){function="" c(a){var="" c,h="e.length/3;a=a.extractPoints(b);var" m="a.shape,k=a.holes;if(!1===Xa.isClockWise(m))for(m=m.reverse(),a=0,c=k.length;a<c;a++){var" u="k[a];!0===Xa.isClockWise(u)&&(k[a]=u.reverse())}var" p="Xa.triangulateShape(m,k);a=0;for(c=k.length;a<" c;a++)u="k[a],m=m.concat(u);a=0;for(c=m.length;a<c;a++)u=m[a],e.push(u.x,u.y,0),f.push(0,0,1),g.push(u.x,u.y);a=0;for(c=p.length;a<c;a++)m=p[a],d.push(m[0]+h,m[1]+h,m[2]+h),l+=3}F.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:a,curveSegments:b};b=b||12;var" d="[],e=[],f=[],g=[],h=0,l=0;if(!1===Array.isArray(a))c(a);else" for(var="" z(e,3));this.addattribute("normal",new="" z(f,3));="" this.addattribute("uv",new="" z(g,2))}function="" cf(a,b){b.shapes="[];if(Array.isArray(a))for(var" b.shapes.push(a.uuid);return="" b}function="" cc(a,b){f.call(this);this.type="EdgesGeometry" n;g.frombuffergeometry(a)}else="" g.length;h<l;h++)for(var="">k;k++){var n=m[f[k]];var t=m[f[(k+1)%3]];d[0]=Math.min(n,t);d[1]=Math.max(n,t);n=d[0]+","+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}for(n in e)if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addattribute("position",new 0="==a)throw" z(c,3))}function="" xb(a,b,c,d,e,f,g,h){n.call(this);this.type="CylinderGeometry" ;this.parameters="{radiusTop:a," radiusbottom:b,height:c,radialsegments:d,heightsegments:e,openended:f,thetastart:g,thetalength:h};this.frombuffergeometry(new="" ya(a,b,c,d,e,f,g,h));this.mergevertices()}function="" ya(a,b,c,d,e,f,g,h){function="" l(c){var="" e,f="new" c,l="new" p,u="0,v=!0===c?a:b,w=!0===c?1:-1;var" a="q;for(e=1;e<=d;e++)n.push(0,x*w,0),t.push(0,w,0),r.push(.5,.5),q++;var" z="q;for(e=0;e<=d;e++){var" e="e/d*h+g,F=Math.cos(E);E=Math.sin(E);l.x=v*E;l.y=x*w;l.z=v*F;n.push(l.x,l.y,l.z);t.push(0,w,0);f.x=.5*F+.5;f.y=.5*E*w+.5;r.push(f.x,f.y);" q++}for(e="0;e<d;e++)f=A+e,l=z+e,!0===c?k.push(l,l+1,f):k.push(l+1,l,f),u+=3;m.addGroup(y,u,!0===c?1:2);y+=u}F.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var" m="this;a=void" 0!="=a?a:1;b=void" k="[],n=[],t=[],r=[],q=0,v=[],x=c/2,y=0;(function(){var" f,l,u="new" p,="" p,p="0,H=(b-a)/c;for(l=0;l<=e;l++){var" c="[],A=l/e,z=A*(b-a)+a;for(f=0;f<=d;f++){var" z(n,3));this.addattribute("normal",="" new="" z(t,3));this.addattribute("uv",new="" z(r,2))}function="" vc(a,b,c,d,e,f,g){xb.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry" wc(a,b,c,d,e,f,g){ya.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry" xc(a,b,c,d){n.call(this);this.type="CircleGeometry" dc(a,b,c,d));this.mergevertices()}function="" dc(a,b,c,d){f.call(this);this.type="CircleBufferGeometry" p,k="new" c;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var="" n="0;for(l=3;n<=b;n++,l+=3){var" t="c+n/b*d;m.x=a*Math.cos(t);m.y=a*Math.sin(t);f.push(m.x,m.y," m.z);g.push(0,0,1);k.x="(f[l]/a+1)/2;k.y=(f[l+1]/a+1)/2;h.push(k.x,k.y)}for(l=1;l<=b;l++)e.push(l,l+1,0);this.setIndex(e);this.addAttribute("position",new" z(f,3));this.addattribute("normal",new="" z(g,3));this.addattribute("uv",new="" z(h,2))}function="" yb(a){o.call(this);this.type="ShadowMaterial" ;this.color="new" i(0);this.transparent="!0;this.setValues(a)}function" ec(a){va.call(this,a);this.type="RawShaderMaterial" }function="" sa(a){o.call(this);this.defines="{STANDARD:""};this.type="MeshStandardMaterial";this.color=" i(16777215);this.metalness="this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" i(0);this.emissiveintensity="1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new" c(1,1);this.displacementmap="null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=" 1;this.wireframelinejoin="this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function" zb(a){sa.call(this);this.defines="{PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function" ja(a){o.call(this);this.type="MeshPhongMaterial" i(16777215);this.specular="new" i(1118481);this.shininess="30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=" 1;this.emissive="new" function="" ab(a){ja.call(this);this.defines="{TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(a)}function" bb(a){o.call(this);this.type="MeshNormalMaterial" ;this.bumpmap="null;this.bumpScale=1;this.normalMap=null;this.normalScale=new" cb(a){o.call(this);="" this.type="MeshLambertMaterial" i(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" db(a){u.call(this);="" ;this.scale="1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function" ae(a,b,c){var="" d="this,e=!1,f=0,g=0,h=void" 0;this.onstart="void" 0;this.onload="a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void" h?="" h(a):a};this.seturlmodifier="function(a){h=a;return" this}}function="" ka(a){this.manager="void" df(a){this.manager="void" be(a){this.manager="void" yc(a){this.manager="void" ce(a){this.manager="void" xd(a){this.manager="void" e(){this.type="Curve" ;this.arclengthdivisions="200}function" ia(a,b,c,d,e,f,g,h){e.call(this);this.type="EllipseCurve" ;this.ax="a||0;this.aY=" b||0;this.xradius="c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function" fc(a,b,c,d,e,f){ia.call(this,a,b,c,c,d,e,f);this.type="ArcCurve" de(){var="" f="e*e;return" a+b*e+c*f+d*f*e}}}function="" x(a,b,c,d){e.call(this);this.type="CatmullRomCurve3" ;this.points="a||[];this.closed=b||!1;this.curveType=c||"centripetal";this.tension=d||.5}function" ef(a,b,c,d,e){b=".5*(d-b);e=.5*(e-c);var" zc(a,b,c,d){var="" e*e*b+2*(1-a)*a*c+a*a*d}function="" $c(a,b,c,d,e){var="" f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function="" la(a,b,c,d){e.call(this);this.type="CubicBezierCurve" ;this.v0="a||new" c;this.v1="b||new" c;this.v2="c||new" c;this.v3="d||new" c}function="" ta(a,b,c,d){e.call(this);this.type="CubicBezierCurve3" p;this.v1="b||new" p;this.v2="c||new" p;this.v3="d||new" p}function="" wa(a,b){e.call(this);this.type="LineCurve" ;this.v1="a||new" ma(a,b){e.call(this);this.type="LineCurve3" na(a,b,c){e.call(this);this.type="QuadraticBezierCurve" ua(a,b,c){e.call(this);="" oa(a){e.call(this);this.type="SplineCurve" za(){e.call(this);this.type="CurvePath" ;this.curves="[];this.autoClose=!1}function" pa(a){za.call(this);this.type="Path" ;this.currentpoint="new" c;a&&this.setfrompoints(a)}function="" gb(a){pa.call(this,a);this.uuid="S.generateUUID();this.type="Shape";this.holes=[]}function" ca(a,b){a.call(this);this.type="Light" i(a);this.intensity="void" 0}function="" yd(a,b,c){ca.call(this,a,c);this.type="HemisphereLight" ;this.castshadow="void" 0;this.position.copy(a.defaultup);this.updatematrix();this.groundcolor="new" i(b)}function="" eb(a){this.camera="a;this.bias=0;this.radius=1;this.mapSize=new" c(512,512);this.map="null;this.matrix=new" m}function="" zd(){eb.call(this,new="" la(50,1,.5,500))}function="" ad(a,b,c,d,e,f){ca.call(this,a,b);this.type="SpotLight" ;this.position.copy(a.defaultup);this.updatematrix();this.target="new" a;="" object.defineproperty(this,"power",{get:function(){return="" this.intensity*math.pi},set:function(a){this.intensity="a/Math.PI}});this.distance=void" zd}function="" bd(a,b,c,d){ca.call(this,a,b);this.type="PointLight" ;object.defineproperty(this,"power",{get:function(){return="" 4*this.intensity*math.pi},set:function(a){this.intensity="a/(4*Math.PI)}});this.distance=void" d?d:1;this.shadow="new" eb(new="" la(90,1,.5,500))}function="" cd(){eb.call(this,new="" jb(-5,5,5,-5,.5,500))}function="" dd(a,b){ca.call(this,a,b);this.type="DirectionalLight" a;this.shadow="new" cd}function="" ed(a,b){ca.call(this,a,b);this.type="AmbientLight" fd(a,b,c,d){ca.call(this,a,b);this.type="RectAreaLight" ;this.width="void" gd(a,b,c,d){da.call(this,a,b,c,d)}function="" hd(a,="" b,c){da.call(this,a,b,c)}function="" na(a,b,c,d){this.parameterpositions="a;this._cachedIndex=0;this.resultBuffer=void" b.constructor(c);this.samplevalues="b;this.valueSize=c}function" id(a,b,c,d){na.call(this,a,b,c,d)}function="" ad(a,b,c,d){da.call(this,a,b,c,d)}function="" jd(a,b,c,d){da.call(this,a,b,c,d)}function="" gc(a,b,c,d){da.call(this,a,b,c,d)}function="" kd(a,b,c,d){na.call(this,a,b,c,d);this._offsetnext="this._weightNext=this._offsetPrev=this._weightPrev=-0}function" bd(a,b,c,d){na.call(this,="" a,b,c,d)}function="" ld(a,b,c,d){na.call(this,a,b,c,d)}function="" da(a,b,c,d){if(void="" error("three.keyframetrack:="" track="" name="" is="" undefined");if(void="" no="" keyframes="" in="" named="" "+a);this.name="a;this.times=fa.convertArray(b,this.TimeBufferType);this.values=fa.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()}function" hc(a,b,c,d){da.call(this,a,b,c,d)}function="" ba(a,b,c){this.name="a;this.tracks=c;this.duration=void">this.duration&&this.resetDuration();this.optimize()}function Md(a){this.manager=void 0!==a?a:ma;this.textures={}}function ee(a){this.manager=void 0!==a?a:ma}function ic(){}function fe(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:ma;this.withCredentials=!1}function ff(a){this.manager=void 0!==a?a:ma;this.texturePath=""}
    function ge(a){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==a?a:ma;this.options=void 0}function he(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}function ie(a){this.type="Font";this.data=a}function gf(a){this.manager=void 0!==a?a:ma}function je(a){this.manager=void 0!==a?a:ma}function hf(){this.type=
    "StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new la;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new la;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function cd(a,b,c){A.call(this);this.type="CubeCamera";var d=new la(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new p(1,0,0));this.add(d);var e=new la(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new p(-1,0,0));this.add(e);var f=new la(90,1,a,b);f.up.set(0,0,1);f.lookAt(new p(0,1,0));this.add(f);var g=new la(90,
    1,a,b);g.up.set(0,0,-1);g.lookAt(new p(0,-1,0));this.add(g);var h=new la(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new p(0,0,1));this.add(h);var l=new la(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new p(0,0,-1));this.add(l);this.renderTarget=new Ib(c,c,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name="CubeCamera";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,
    d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,l,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}function ke(){A.call(this);this.type="AudioListener";this.context=le.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);
    this.filter=null}function jc(a){A.call(this);this.type="Audio";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function me(a){jc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function ne(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=
    void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function oe(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function jf(a,b,c){c=c||qa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,
    c)}function qa(a,b,c){this.path=b;this.parsedPath=c||qa.parseTrackName(b);this.node=qa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function kf(){this.uuid=S.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=b;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},
    get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function lf(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=
    2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function pe(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Nd(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}function qe(){F.call(this);
    this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function re(a,b,c,d){this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function kc(a,b){this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0}function se(a,b,c){kc.call(this,a,b);this.meshPerAttribute=c||1}function te(a,b,c){T.call(this,a,b);this.meshPerAttribute=c||1}function mf(a,b,c,d){this.ray=new qb(a,b);this.near=c||0;this.far=d||Infinity;
    this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function nf(a,b){return a.distance-b.distance}function ue(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)ue(a[d],b,c,!0)}}function of(a){this.autostart="void" 0!="=a?a:!0;this.elapsedTime=this.oldTime=this.startTime=" 0;this.running="!1}function" pf(a,b,c){this.radius="void" this}function="" qf(a,b,c){this.radius="void" ve(a,b){this.min="void" c(infinity,infinity);this.max="void" c(-infinity,-infinity)}function="" dd(a){a.call(this);this.material="a;this.render=function(){}}function" ed(a,b,c,d){this.object="a;this.size=void" d?d:1;b="0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new" f;b="new" z(6*b,3);c.addattribute("position",b);aa.call(this,c,new="" u({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}function" lc(a,b){a.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new" c="0,d=1;32">c;c++,d++){var e=
    c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new z(b,3));b=new U({fog:!1});this.cone=new aa(a,b);this.add(this.cone);this.update()}function rf(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,rf(a.children[c]));return 0="==this.color&&(this.material.vertexColors=" b}function="" mc(a){for(var="" b="rf(a),c=new" f,d="[],e=[],f=new" i(0,0,1),g="new" i(0,1,0),h="0;h<b.length;h++){var" l="b[h];l.parent&&l.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r," f.g,f.b),e.push(g.r,g.g,g.b))}c.addattribute("position",new="" z(d,3));c.addattribute("color",new="" z(e,3));d="new" u({vertexcolors:2,depthtest:!1,depthwrite:!1,transparent:!0});aa.call(this,c,d);this.root="a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function" nc(a,b,c){this.light="a;this.light.updateMatrixWorld();this.color=c;a=new" ub(b,4,2);b="new" za({wireframe:!0,fog:!1});oa.call(this,a,b);this.matrix="this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function" oc(a,b){a.call(this);="" this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new" u({fog:!1});b="new" f;b.addattribute("position",new="" t(new="" float32array(15),3));this.line="new" ua(b,a);this.add(this.line);this.update()}function="" pc(a,b,c){a.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new" sb(b);a.rotatey(.5*math.pi);this.material="new" za({wireframe:!0,fog:!1});void="" 2);b="a.getAttribute("position");b=new" float32array(3*b.count);a.addattribute("color",new="" t(b,3));this.add(new="" oa(a,this.material));this.update()}function="" fd(a,b,c,d){a="a||10;b=b||10;c=new" i(void="" 0!="=c?c:4473924);d=new" e="b/2,f=a/b,g=a/2;a=[];for(var" h="[],l=0,m=0,k=-g;l<=b;l++,k+=f){a.push(-g,0,k,g,0,k);a.push(k,0,-g,k,0,g);var" n="l===e?c:d;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3}b=new" z(a,3));b.addattribute("color",="" new="" z(h,3));c="new" u({vertexcolors:2});aa.call(this,b,c)}function="" od(a,b,c,d,e,f){a="a||10;b=b||16;c=c||8;d=d||64;e=new" g="[],h=[],l;for(l=0;l<=b;l++){var" m="l/b*2*Math.PI;var" k="Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,0,0);g.push(k,0,m);var" t="a-a/c*l;for(b=0;b<d;b++)m=b/d*2*Math.PI,k=Math.sin(m)*t,m=Math.cos(m)*t,g.push(k,0,m),h.push(n.r,n.g,n.b),m=(b+1)/d*2*Math.PI," f;a.addattribute("position",new="" z(g,3));a.addattribute("color",new="" z(h,3));g="new" u({vertexcolors:2});aa.call(this,a,g)}function="" gd(a,b,c,d){this.object="a;this.size=void" only="" three.geometry="" is="" supported.="" use="" three.vertexnormalshelper,="" instead.");c="new" f;b="new" z(6*b,3);c.addattribute("position",="" b);aa.call(this,c,new="" u({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}function" qc(a,b,c){a.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void" z([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b="new" u({fog:!1});this.lightplane="new" ua(a,b);this.add(this.lightplane);a="new" z([0,0,0,0,0,1],3));this.targetline="new" ua(a,b);this.add(this.targetline);="" this.update()}function="" hd(a){function="" b(a,b,d){c(a,d);c(b,d)}function="" c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void="" d="new" f,e="new" u({color:16777215,vertexcolors:1}),f="[],g=[],h={},l=new" i(16755200),m="new" i(16711680),k="new" i(43775),n="new" i(16777215),t="new" i(3355443);b("n1","n2",l);b("n2","n4",l);b("n4","n3",l);b("n3","n1",l);b("f1","f2",l);b("f2","f4",l);b("f4","f3",l);b("f3","f1",l);b("n1","f1",l);b("n2","f2",l);b("n3","f3",l);b("n4","f4",l);b("p","n1",="" m);b("p","n2",m);b("p","n3",m);b("p","n4",m);b("u1","u2",k);b("u2","u3",k);b("u3","u1",k);b("c","t",n);b("p","c",t);b("cn1","cn2",t);b("cn3","cn4",t);b("cf1","cf2",t);b("cf3","cf4",t);d.addattribute("position",new="" z(f,3));d.addattribute("color",new="" z(g,3));aa.call(this,d,e);this.camera="a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function" fb(a,b){this.object="a;void" uint16array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var="" c="new" float32array(24),d="new" f;d.setindex(new="" t(a,1));d.addattribute("position",new="" t(c,3));aa.call(this,d,new="" u({color:b}));this.matrixautoupdate="!1;this.update()}function" id(a,b){this.type="Box3Helper" ;this.box="a;a=void" f;c.setindex(new="" t(b,1));c.addattribute("position",new="" z([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,="" -1,-1],3));aa.call(this,c,new="" u({color:a}));this.geometry.computeboundingsphere()}function="" jd(a,b,c){this.type="PlaneHelper" ;this.plane="a;this.size=void" z([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeboundingsphere();ua.call(this,b,new="" u({color:a}));b="new" z([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeboundingsphere();this.add(new="" oa(b,new="" za({color:a,="" opacity:.2,transparent:!0,depthwrite:!1})))}function="" gb(a,b,c,d,e,f){a.call(this);void="" f,pd.addattribute("position",new="" z([0,0,0,0,1,0],3)),we="new" ya(0,.5,1,5,1),we.translate(0,-.5,0));this.position.copy(b);this.line="new" ua(pd,new="" u({color:d}));this.line.matrixautoupdate="!1;this.add(this.line);this.cone=new" oa(we,new="" za({color:d}));this.cone.matrixautoupdate="!1;this.add(this.cone);this.setDirection(a);" this.setlength(c,e,f)}function="" kd(a){a="a||1;var" z(b,3));a.addattribute("color",new="" z([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b="new" u({vertexcolors:2});aa.call(this,a,b)}function="" sf(a){console.warn("three.closedsplinecurve3="" has="" been="" deprecated.="" three.catmullromcurve3="" instead.");x.call(this,a);this.type="catmullrom" ;this.closed="!0}function" tf(a){console.warn("three.splinecurve3="" instead.");="" x.call(this,a);this.type="catmullrom" }function="" xe(a){console.warn("three.spline="" removed.="" }void="" a&&isfinite(a)&&math.floor(a)="==a});void">a?-1:0<a?1:+a});!1==="name"in 0="==Object.assign&&function(){Object.assign=function(a){if(void" function.prototype&&object.defineproperty(function.prototype,"name",{get:function(){return="" this.tostring().match(="" ^\s*function\s*([^\(\s]*)="" )[1]}});="" void="" new="" typeerror("cannot="" convert="" undefined="" or="" null="" to="" object");for(var="" b="Object(a),c=1;c<arguments.length;c++){var" d="arguments[c];if(void" 0!="=d&&null!==d)for(var" e="" in="" d)object.prototype.hasownproperty.call(d,e)&&(b[e]="d[e])}return" b}}();object.assign(xa.prototype,{addeventlistener:function(a,b){void="" c="this._listeners;void" haseventlistener:function(a,b){if(void="" s="{DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var" a="[],b=0;256">b;b++)a[b]=(16>b?"0":"")+b.toString(16).toUpperCase();return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[d&255]+a[d>>8&255]+"-"+a[d>>16&15|64]+a[d>>24&255]+"-"+a[e&63|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,
    b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*
    S.DEG2RAD},radToDeg:function(a){return a*S.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}};Object.defineProperties(C.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(C.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=
    b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=
    a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
    this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=
    a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new C,b=new C;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||
    1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*
    a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-
    a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,
    b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(M.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,l,m,k,n,t,r,q,p){var u=this.elements;u[0]=a;u[4]=b;u[8]=c;u[12]=d;u[1]=e;u[5]=f;u[9]=g;u[13]=h;u[2]=l;u[6]=m;u[10]=k;u[14]=n;u[3]=t;u[7]=r;u[11]=
    q;u[15]=p;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new M).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,
    b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new p;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;
    c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);var h=Math.cos(e);e=Math.sin(e);if("XYZ"===a.order){a=f*h;var l=f*e,m=c*h,k=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=l+m*d;b[5]=a-k*d;b[9]=-c*g;b[2]=k-a*d;b[6]=m+l*d;b[10]=f*g}else"YXZ"===a.order?(a=g*
    h,l=g*e,m=d*h,k=d*e,b[0]=a+k*c,b[4]=m*c-l,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=l*c-m,b[6]=k+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,l=g*e,m=d*h,k=d*e,b[0]=a-k*c,b[4]=-f*e,b[8]=m+l*c,b[1]=l+m*c,b[5]=f*h,b[9]=k-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,l=f*e,m=c*h,k=c*e,b[0]=g*h,b[4]=m*d-l,b[8]=a*d+k,b[1]=g*e,b[5]=k*d+a,b[9]=l*d-m,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,l=f*d,m=c*g,k=c*d,b[0]=g*h,b[4]=k-a*e,b[8]=m*e+l,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+m,b[10]=a-k*
    e):"XZY"===a.order&&(a=f*g,l=f*d,m=c*g,k=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+k,b[5]=f*h,b[9]=l*e-m,b[2]=m*e-l,b[6]=c*h,b[10]=k*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a._x,d=a._y,e=a._z,f=a._w,g=c+c,h=d+d,l=e+e;a=c*g;var m=c*h;c*=l;var k=d*h;d*=l;e*=l;g*=f;h*=f;f*=l;b[0]=1-(k+e);b[4]=m-f;b[8]=c+h;b[1]=m+f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=
    0;b[15]=1;return this},lookAt:function(){var a=new p,b=new p,c=new p;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
    this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],l=c[5],m=c[9],k=c[13],n=c[2],t=c[6],r=c[10],q=c[14],p=c[3],x=c[7],y=c[11];c=c[15];var w=d[0],B=d[4],G=d[8],K=d[12],P=d[1],H=d[5],C=d[9],A=d[13],z=d[2],E=d[6],F=d[10],I=d[14],L=d[3],Q=d[7],N=d[11];d=d[15];b[0]=a*w+e*P+f*z+g*L;b[4]=a*B+e*H+f*E+g*Q;b[8]=a*G+e*C+f*F+
    g*N;b[12]=a*K+e*A+f*I+g*d;b[1]=h*w+l*P+m*z+k*L;b[5]=h*B+l*H+m*E+k*Q;b[9]=h*G+l*C+m*F+k*N;b[13]=h*K+l*A+m*I+k*d;b[2]=n*w+t*P+r*z+q*L;b[6]=n*B+t*H+r*E+q*Q;b[10]=n*G+t*C+r*F+q*N;b[14]=n*K+t*A+r*I+q*d;b[3]=p*w+x*P+y*z+c*L;b[7]=p*B+x*H+y*E+c*Q;b[11]=p*G+x*C+y*F+c*N;b[15]=p*K+x*A+y*I+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=
    new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix4(this),b.setxyz(c,a.x,a.y,a.z);return b}}(),determinant:function(){var="" a="this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],l=a[13],m=a[2],k=a[6],n=a[10],t=a[14];return" a[3]*(+e*h*k-d*l*k-e*g*n+c*l*n+d*g*t-c*h*t)+a[7]*(+b*h*t-b*l*n+e*f*n-d*f*t+d*l*m-e*h*m)+a[11]*(+b*l*k-b*g*t-e*f*k+c*f*t+e*g*m-c*l*m)+a[15]*(-d*g*m-b*h*k+b*g*n+d*f*k-c*f*n+c*h*m)},transpose:function(){var="" var="" b="a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return" this},setposition:function(a){var="" this},getinverse:function(a,b){var="" c="this.elements,d=a.elements;a=d[0];var" e="d[1],f=d[2],g=d[3],h=d[4],l=d[5],m=d[6],k=d[7],n=d[8],t=d[9],r=d[10],q=d[11],p=d[12],x=d[13],y=d[14];d=d[15];var" w="t*y*k-x*r*k+x*m*q-l*y*q-t*m*d+l*r*d,B=p*r*k-n*y*k-p*m*q+h*y*" q+n*m*d-h*r*d,g="n*x*k-p*t*k+p*l*q-h*x*q-n*l*d+h*t*d,K=p*t*m-n*x*m-p*l*r+h*x*r+n*l*y-h*t*y,P=a*w+e*B+f*G+g*K;if(0===P){if(!0===b)throw" error("three.matrix4:="" .getinverse()="" can't="" invert="" matrix,="" determinant="" is="" 0");console.warn("three.matrix4:="" 0");return="" this.identity()}b="1/P;c[0]=w*b;c[1]=(x*r*g-t*y*g-x*f*q+e*y*q+t*f*d-e*r*d)*b;c[2]=(l*y*g-x*m*g+x*f*k-e*y*k-l*f*d+e*m*d)*b;c[3]=(t*m*g-l*r*g-t*f*k+e*r*k+l*f*q-e*m*q)*b;c[4]=B*b;c[5]=(n*y*g-p*r*g+p*f*q-a*" y*q-n*f*d+a*r*d)*b;c[6]="(p*m*g-h*y*g-p*f*k+a*y*k+h*f*d-a*m*d)*b;c[7]=(h*r*g-n*m*g+n*f*k-a*r*k-h*f*q+a*m*q)*b;c[8]=G*b;c[9]=(p*t*g-n*x*g-p*e*q+a*x*q+n*e*d-a*t*d)*b;c[10]=(h*x*g-p*l*g+p*e*k-a*x*k-h*e*d+a*l*d)*b;c[11]=(n*l*g-h*t*g-n*e*k+a*t*k+h*e*q-a*l*q)*b;c[12]=K*b;c[13]=(n*x*f-p*t*f+p*e*r-a*x*r-n*e*y+a*t*y)*b;c[14]=(p*l*f-h*x*f-p*e*m+a*x*m+h*e*y-a*l*y)*b;c[15]=(h*t*f-n*l*f+n*e*m-a*t*m-h*e*r+a*l*r)*b;return" this},scale:function(a){var="" c;b[5]*="d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return" this},getmaxscaleonaxis:function(){var="" math.sqrt(math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},maketranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return="" this},makerotationx:function(a){var="" this},makerotationy:function(a){var="" this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return="" this},makerotationz:function(a){var="" this},makerotationaxis:function(a,b){var="" d="1-c,e=a.x,f=a.y;a=a.z;var" g="d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return" this},makescale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return="" this},makeshear:function(a,b,c){this.set(1,b,="" c,0,a,1,c,0,a,b,1,0,0,0,0,1);return="" this},compose:function(a,b,c){this.makerotationfromquaternion(b);this.scale(c);this.setposition(a);return="" this},decompose:function(){var="" p,b="new" m;return="" function(c,d,e){var="" f="this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),l=a.set(f[8],f[9],f[10]).length();0">this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;f=1/h;var m=1/l;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=
    f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=l;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},
    makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),l=1/(c-d),m=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*l;g[9]=0;g[13]=-((c+d)*l);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);
    void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(ja,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],l=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var k=e[f+1],n=e[f+2];e=e[f+3];if(c!==e||h!==d||l!==k||m!==n){f=1-g;var p=h*d+l*k+m*n+c*e,r=0<= p?1:-1,q="1-p*p;q">Number.EPSILON&&(q=Math.sqrt(q),p=Math.atan2(q,p*r),f=Math.sin(f*p)/q,g=Math.sin(g*p)/q);r*=g;h=h*f+d*r;l=l*f+k*r;m=m*f+n*r;c=c*f+e*r;f===1-g&&(g=1/Math.sqrt(h*h+l*l+m*m+c*c),h*=g,l*=g,m*=g,c*=g)}a[b]=h;a[b+1]=l;a[b+2]=m;a[b+3]=c}});Object.defineProperties(ja.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=
    a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(ja.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
    var c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),l=f(d/2);f=f(e/2);c=g(c/2);d=g(d/2);e=g(e/2);"XYZ"===a?(this._x=c*l*f+h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f-c*d*e):"YXZ"===a?(this._x=c*l*f+h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f+c*d*e):"ZXY"===a?(this._x=c*l*f-h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f-c*d*e):"ZYX"===a?(this._x=c*l*f-h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f+c*d*e):"YZX"===a?(this._x=
    c*l*f+h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f-c*d*e):"XZY"===a&&(this._x=c*l*f-h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],l=b[6];b=b[10];var m=c+f+b;0<m? (c=".5/Math.sqrt(m+1),this._w=.25/c,this._x=(l-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c">f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(l-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+l)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+l)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new p,b;return function(c,d){void 0===a&&(a=new p);b=c.dot(d)+1;1E-6>b?
    (b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*
    this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,
    this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w="f,this._x=c,this._y=" d,this._z="e,this;a=Math.sqrt(1-g*g);if(.001">Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=Math.atan2(a,g);g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+
    1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(p.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=
    a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},
    add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
    this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=
    a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new ja;return function(b){b&&b.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new ja;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;
    a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,l=a*c+g*b-e*d,m=a*d+e*c-f*b;b=-e*b-f*c-g*d;this.x=h*a+b*
    -e+l*-g-m*-f;this.y=l*a+b*-f+m*-e-h*-g;this.z=m*a+b*-g+h*-f-l*-e;return this},project:function(){var a=new M;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new M;return function(b){a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+
    a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,
    this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new p,b=new p;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},
    round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},
    length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==
    b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new p;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=
    new p;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(S.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*
    a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=
    c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");
    this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(sa.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,l){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=
    a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return="" this.multiplymatrices(this,a)},premultiply:function(a){return="" this.multiplymatrices(a,this)},multiplymatrices:function(a,b){var="" c="a.elements,d=b.elements;" b="this.elements;a=c[0];var" e="c[3],f=c[6],g=c[1],h=c[4],l=c[7],m=c[2],k=c[5];c=c[8];var" n="d[0],p=d[3],r=d[6],q=d[1],v=d[4],x=d[7],y=d[2],w=d[5];d=d[8];b[0]=a*n+e*q+f*y;b[3]=a*p+e*v+f*w;b[6]=a*r+e*x+f*d;b[1]=g*n+h*q+l*y;b[4]=g*p+h*v+l*w;b[7]=g*r+h*x+l*d;b[2]=m*n+k*q+c*y;b[5]=m*p+k*v+c*w;b[8]=m*r+k*x+c*d;return" this},multiplyscalar:function(a){var="" this},determinant:function(){var="" a="this.elements,b=a[0],c=a[1]," d="a[2],e=a[3],f=a[4],g=a[5],h=a[6],l=a[7];a=a[8];return" b*f*a-b*g*l-c*e*a+c*g*h+d*e*l-d*f*h},getinverse:function(a,b){a&&a.ismatrix4&&console.error("three.matrix3:="" .getinverse()="" no="" longer="" takes="" matrix4="" argument.");var="" error("three.matrix3:="" can't="" invert="" matrix,="" determinant="" is="" 0");console.warn("three.matrix3:="" 0");="" return="" this.identity()}b="1/q;a[0]=n*b;a[1]=(f*k-c*e)*b;a[2]=(l*e-f*h)*b;a[3]=p*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-l*d)*b;a[6]=r*b;a[7]=(e*m-k*d)*b;a[8]=(h*d-e*g)*b;return" this},transpose:function(){var="" this},getnormalmatrix:function(a){return="" this.setfrommatrix4(a).getinverse(this).transpose()},transposeintoarray:function(a){var="" b[2];a[7]="b[5];a[8]=b[8];return" this},setuvtransform:function(a,b,c,d,e,f,g){var="" h="Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var" this},rotate:function(a){var="" this},translate:function(a,="" b){var="" this},equals:function(a){var="">c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];
    return a}});var xf=0;Y.DEFAULT_IMAGE=void 0;Y.DEFAULT_MAPPING=300;Y.prototype=Object.assign(Object.create(xa.prototype),{constructor:Y,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);
    this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){var b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,
    name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=S.generateUUID());if(!b&&void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid;if(d instanceof HTMLCanvasElement)var h=
    d;else{h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");h.width=d.width;h.height=d.height;var l=h.getContext("2d");d instanceof ImageData?l.putImageData(d,0,0):l.drawImage(d,0,0,d.width,d.height)}h=2048<h.width||2048<h.height?h.todataurl("image jpeg",.6):h.todataurl("image="" png");e[f]="{uuid:g,url:h}}c.image=d.uuid}b||(a.textures[this.uuid]=c);return" c},dispose:function(){this.dispatchevent({type:"dispose"})},transformuv:function(a){if(300="==this.mapping){a.applyMatrix3(this.matrix);" if(0="">a.x||1<a.x)switch(this.wraps){case 1e3:a.x-="Math.floor(a.x);break;case" 1001:a.x="0">a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapt){case 1e3:a.y-="Math.floor(a.y);break;case" 1001:a.y="0">a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.defineProperty(Y.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(ea.prototype,
    {isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;
    case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},
    addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=
    a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/
    a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var l=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-l)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+l)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;
    b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+l)/4;b>f&&b>m?.01>b?(l=0,c=h=.707106781):(l=Math.sqrt(b),h=c/l,c=d/l):f>m?.01>f?(l=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),l=c/h,c=g/h):.01>m?(h=l=.707106781,c=0):(c=Math.sqrt(m),l=d/c,h=g/c);this.set(l,h,c,a);return this}a=Math.sqrt((l-g)*(l-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(l-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,
    a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new ea,b=new ea);a.set(c,
    c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);
    this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*
    this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,
    b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");
    this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});hb.prototype=Object.assign(Object.create(xa.prototype),{constructor:hb,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();
    this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Ib.prototype=Object.create(hb.prototype);Ib.prototype.constructor=Ib;Ib.prototype.isWebGLRenderTargetCube=!0;ib.prototype=Object.create(Y.prototype);ib.prototype.constructor=ib;ib.prototype.isDataTexture=!0;Object.assign(Va.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=
    Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,l=a.length;h<l;h+=3){var m="a[h],k=a[h+1],n=a[h+2];m<b&&(b=m);k<c&&(c=k);n<d&&(d=n);m">e&&(e=m);k>f&&(f=k);n>g&&(g=n)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,l=a.count;h<l;h++){var m="a.getX(h),k=a.getY(h),n=a.getZ(h);m<b&&(b=m);k<c&&(c=k);n<d&&(d=n);m">e&&(e=m);k>f&&(f=k);n>g&&(g=n)}this.min.set(b,c,d);
    this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandbypoint(a[b]);return 0="==a&&(console.warn("THREE.Box3:" this},setfromcenterandsize:function(){var="" a="new" p;return="" function(b,c){c="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return" this}}(),setfromobject:function(a){this.makeempty();return="" this.expandbyobject(a)},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return="" this},="" makeempty:function(){this.min.x="this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return" this},isempty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getcenter:function(a){void="" .getcenter()="" target="" is="" now="" required"),a="new" p);return="" this.isempty()?a.set(0,0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){void="" .getsize()="" required"),="" this.isempty()?a.set(0,0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return="" this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return="" this},expandbyobject:function(){function="" a(a){var="" f="a.geometry;if(void" 0!="=f)if(f.isGeometry)for(f=f.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else" if(f.isbuffergeometry&&="" (f="f.attributes.position,void" b,c,d,e="new" function(c){b="this;c.updateMatrixWorld(!0);c.traverse(a);return" this}}(),containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&& 0="==b&&(console.warn("THREE.Box3:" a.max.z<="this.max.z},getParameter:function(a,b){void" .getparameter()="" target="" is="" now="" required"),b="new" p);return="" b.set((a.x-this.min.x)="" (this.max.x-this.min.x),(a.y-this.min.y)="" (this.max.y-this.min.y),(a.z-this.min.z)="" (this.max.z-this.min.z))},intersectsbox:function(a){return="" a.max.x<this.min.x||a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new p;return function(b){this.clampPoint(b.center,
    a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsplane:function(a){if(0<a.normal.x){var b="a.normal.x*this.min.x;var" c="a.normal.x*this.max.x}else" b<="a.constant&&c">=a.constant},intersectsTriangle:function(){function a(a){var e;
    var f=0;for(e=a.length-3;f<=e;f+=3){h.fromarray(a,f);var g="m.x*Math.abs(h.x)+m.y*Math.abs(h.y)+m.z*Math.abs(h.z),l=b.dot(h),k=c.dot(h),n=d.dot(h);if(Math.max(-Math.max(l,k,n),Math.min(l,k,n))">g)return!1}return!0}var b=new p,c=new p,d=new p,e=new p,f=new p,g=new p,h=new p,l=new p,m=new p,k=new p;return function(h){if(this.isEmpty())return!1;this.getCenter(l);m.subVectors(this.max,l);b.subVectors(h.a,l);c.subVectors(h.b,l);d.subVectors(h.c,l);e.subVectors(c,b);f.subVectors(d,c);g.subVectors(b,d);h=
    [0,-e.z,e.y,0,-f.z,f.y,0,-g.z,g.y,e.z,0,-e.x,f.z,0,-f.x,g.z,0,-g.x,-e.y,e.x,0,-f.y,f.x,0,-g.y,g.x,0];if(!a(h))return!1;h=[1,0,0,0,1,0,0,0,1];if(!a(h))return!1;k.crossVectors(e,f);h=[k.x,k.y,k.z];return a(h)}}(),clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box3: .clampPoint() target is now required"),b=new p);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new p;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
    new p;return function(b){void 0===b&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),b=new Ea);this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new p,new p,new p,new p,new p,new p,new p,new p];return function(b){if(this.isEmpty())return this;
    a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),
    translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ea.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Va;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=math.max(c,d.distancetosquared(b[e]));this.radius=math.sqrt(c);return 0="" this}}(),clone:function(){return(new="" this.constructor).copy(this)},="" copy:function(a){this.center.copy(a.center);this.radius="a.radius;return" this},empty:function(){return="">=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distancetopoint:function(a){return 0="==b&&(console.warn("THREE.Sphere:" a.distanceto(this.center)-this.radius},intersectssphere:function(a){var="" b="this.radius+a.radius;return" a.center.distancetosquared(this.center)<="b*b},intersectsBox:function(a){return" a.intersectssphere(this)},intersectsplane:function(a){return="" math.abs(a.distancetopoint(this.center))<="this.radius},clampPoint:function(a,b){var" c="this.center.distanceToSquared(a);void" .clamppoint()="" target="" is="" now="" required"),b="new" p);b.copy(a);c="">this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){void 0===a&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),a=new Va);a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);
    this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Fa.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=
    new p,b=new p;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+
    this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){void 0===b&&(console.warn("THREE.Plane: .projectPoint() target is now required"),b=new p);return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new p;return function(b,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new p);var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=
    -(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return 0="" c.copy(d).multiplyscalar(e).add(b.start)}}(),intersectsline:function(a){var="" b="this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return">b&&0<a||0>a&&0<b},intersectsbox:function(a){return 0="==a&&(console.warn("THREE.Plane:" a.intersectsplane(this)},intersectssphere:function(a){return="" a.intersectsplane(this)},coplanarpoint:function(a){void="" .coplanarpoint()="" target="" is="" now="" required"),a="new" p);return="" a.copy(this.normal).multiplyscalar(-this.constant)},="" applymatrix4:function(){var="" a="new" p,b="new" sa;return="" function(c,d){d="d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return" this}}(),translate:function(a){this.constant-="a.dot(this.normal);return" this},equals:function(a){return="" a.normal.equals(this.normal)&&a.constant="==this.constant}});Object.assign(ld.prototype,{set:function(a,b,c,d,e,f){var" g="this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);" g[5].copy(f);return="" this},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){for(var="" b="this.planes,c=0;6">c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],l=c[6],m=c[7],k=c[8],n=c[9],p=c[10],r=c[11],q=c[12],v=c[13],x=c[14];c=c[15];b[0].setComponents(f-a,m-g,r-k,c-q).normalize();b[1].setComponents(f+a,m+g,r+k,c+q).normalize();b[2].setComponents(f+d,m+h,r+n,c+v).normalize();b[3].setComponents(f-
    d,m-h,r-n,c-v).normalize();b[4].setComponents(f-e,m-l,r-p,c-x).normalize();b[5].setComponents(f+e,m+l,r+p,c+x).normalize();return this},intersectsObject:function(){var a=new Ea;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ea;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),
    intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsbox:function(){var a="new" p,b="new" p;return="" function(c){for(var="" d="this.planes,e=0;6">e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g="f.distanceToPoint(a);f=f.distanceToPoint(b);if(0">
    g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});var V={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",
    aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
    bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
    clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",
    clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
    color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",
    cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
    defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
    emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
    envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
    envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
    envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
    fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
    gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
    lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
    lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",
    lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
    lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
    lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
    lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
    lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",
    lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",
    lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",
    logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",
    map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",
    metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
    morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
    normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
    normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",
    packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
    premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",
    roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0,="" shadowcoord.y="">= 0.0, shadowCoord.y <= 1.0="" );\n\t\tbool="" infrustum="all(" infrustumvec="" );\n\t\tbvec2="" frustumtestvec="bvec2(" infrustum,="" shadowcoord.z="" <="1.0" frustumtest="all(" );\n\t\tif="" (="" )="" {\n\t\t#if="" defined(="" shadowmap_type_pcf="" )\n\t\t\tvec2="" texelsize="vec2(" shadowmapsize;\n\t\t\tfloat="" dx0="-" texelsize.x="" *="" shadowradius;\n\t\t\tfloat="" dy0="-" texelsize.y="" dx1="+" dy1="+" shadowradius;\n\t\t\tshadow="(\n\t\t\t\ttexture2DCompare(" shadowmap,="" shadowcoord.xy="" +="" vec2(="" dx0,="" ),="" +\n\t\t\t\ttexture2dcompare(="" 0.0,="" dx1,="" 0.0="" shadowcoord.xy,="" )\n\t\t\t)="" 9.0="" );\n\t\t#elif="" shadowmap_type_pcf_soft="" shadowmapsize,="" +\n\t\t\t\ttexture2dshadowlerp(="" );\n\t\t#else\n\t\t\tshadow="texture2DCompare(" );\n\t\t#endif\n\t\t}\n\t\treturn="" shadow;\n\t}\n\tvec2="" cubetouv(="" vec3="" v,="" float="" texelsizey="" {\n\t\tvec3="" absv="abs(" v="" );\n\t\tfloat="" scaletocube="1.0" max(="" absv.x,="" absv.y,="" absv.z="" );\n\t\tabsv="" -="" 2.0="" );\n\t\tvec2="" planar="v.xy;\n\t\tfloat" almostatexel="1.5" texelsizey;\n\t\tfloat="" almostone="1.0" almostatexel;\n\t\tif="">= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
    shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
    shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
    shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
    skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
    skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
    specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
    uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",
    uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
    uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
    cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
    depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
    distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",
    distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",
    equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
    linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
    meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
    normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
    points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},
    Da={merge:function(a){for(var b={},c=0;c<a.length;c++){var d="this.clone(a[c]),e;for(e" in="" d)b[e]="d[e]}return" b},clone:function(a){var="" b="{},c;for(c" a){b[c]="{};for(var" a[c]){var="" e="a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return" b}},kg="{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045," blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,="" darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,="" lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,="" mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,="" rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};object.assign(i.prototype,="" {iscolor:!0,r:1,g:1,b:1,set:function(a){a&&a.iscolor?this.copy(a):"number"="==typeof" a?this.sethex(a):"string"="==typeof" a&&this.setstyle(a);return="" this},setscalar:function(a){this.b="this.g=this.r=a;return" this},sethex:function(a){a="Math.floor(a);this.r=(a">>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1="" 6?a+6*(c-a)*d:.5="">d?c:d<2 3?a+6*(c-a)*(2="" 3-d):a}return="" function(b,="" c,d){b="S.euclideanModulo(b,1);c=S.clamp(c,0,1);d=S.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5">=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=
    Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){d=parseFloat(c[1])/
    360;var e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=kg[a], 0="==b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return" void="" 0!="=c?this.setHex(c):console.warn("THREE.Color:" unknown="" color="" "+a));return="" this},clone:function(){return="" new="" this.constructor(this.r,this.g,this.b)},copy:function(a){this.r="a.r;this.g=a.g;this.b=a.b;return" this},copygammatolinear:function(a,b){void="" this},copylineartogamma:function(a,b){void="" this},convertgammatolinear:function(){var="" a="this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return" this},convertlineartogamma:function(){this.r="Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return" this},gethex:function(){return="" 255*this.r<<16^255*this.g<<8^255*this.b<<0},gethexstring:function(){return("000000"+this.gethex().tostring(16)).slice(-6)},gethsl:function(a){void="" .gethsl()="" target="" is="" now="" required"),a="{h:0,s:0,l:0});var" b="this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=" math.min(b,c,d),g,h="(f+e)/2;if(f===e)f=g=0;else{var" l="e-f;f=.5">=h?l/(e+f):l/(2-e-f);switch(e){case b:g=(c-d)/l+(c<d?6:0);break;case 0="==b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return" c:g="(d-b)/l+2;break;case" d:g="(b-c)/l+4}g/=6}a.h=g;a.s=f;a.l=h;return" a},getstyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsethsl:function(){var="" a="{};return" function(b,c,d){this.gethsl(a);a.h+="b;a.s+=c;a.l+=d;this.setHSL(a.h,a.s,a.l);return" this}}(),add:function(a){this.r+="a.r;this.g+=a.g;this.b+=a.b;return" this},addcolors:function(a,="" b){this.r="a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return" this},addscalar:function(a){this.r+="a;this.g+=a;this.b+=a;return" this},sub:function(a){this.r="Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return" this},multiply:function(a){this.r*="a.r;this.g*=a.g;this.b*=a.b;return" this},multiplyscalar:function(a){this.r*="a;this.g*=a;this.b*=a;return" this},lerp:function(a,b){this.r+="(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return" this},equals:function(a){return="" a.r="==" this.r&&a.g="==this.g&&a.b===this.b},fromArray:function(a,b){void" this},toarray:function(a,b){void="" a},tojson:function(){return="" this.gethex()}});var="" l="{common:{diffuse:{value:new" i(15658734)},opacity:{value:1},map:{value:null},uvtransform:{value:new="" sa},alphamap:{value:null}},specularmap:{specularmap:{value:null}},envmap:{envmap:{value:null},flipenvmap:{value:-1},="" reflectivity:{value:1},refractionratio:{value:.98},maxmiplevel:{value:0}},aomap:{aomap:{value:null},aomapintensity:{value:1}},lightmap:{lightmap:{value:null},lightmapintensity:{value:1}},emissivemap:{emissivemap:{value:null}},bumpmap:{bumpmap:{value:null},bumpscale:{value:1}},normalmap:{normalmap:{value:null},normalscale:{value:new="" c(1,1)}},displacementmap:{displacementmap:{value:null},displacementscale:{value:1},displacementbias:{value:0}},roughnessmap:{roughnessmap:{value:null}},metalnessmap:{metalnessmap:{value:null}},="" gradientmap:{gradientmap:{value:null}},fog:{fogdensity:{value:2.5e-4},fognear:{value:1},fogfar:{value:2e3},fogcolor:{value:new="" i(16777215)}},lights:{ambientlightcolor:{value:[]},directionallights:{value:[],properties:{direction:{},color:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},directionalshadowmap:{value:[]},directionalshadowmatrix:{value:[]},spotlights:{value:[],properties:{color:{},position:{},direction:{},distance:{},conecos:{},penumbracos:{},decay:{},shadow:{},shadowbias:{},="" shadowradius:{},shadowmapsize:{}}},spotshadowmap:{value:[]},spotshadowmatrix:{value:[]},pointlights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{},shadowcameranear:{},shadowcamerafar:{}}},pointshadowmap:{value:[]},pointshadowmatrix:{value:[]},hemispherelights:{value:[],properties:{direction:{},skycolor:{},groundcolor:{}}},rectarealights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new="" i(15658734)},="" opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvtransform:{value:new="" sa}}},rb="{basic:{uniforms:Da.merge([L.common,L.specularmap,L.envmap,L.aomap,L.lightmap,L.fog]),vertexShader:V.meshbasic_vert,fragmentShader:V.meshbasic_frag},lambert:{uniforms:Da.merge([L.common,L.specularmap,L.envmap,L.aomap,L.lightmap,L.emissivemap,L.fog,L.lights,{emissive:{value:new" i(0)}}]),vertexshader:v.meshlambert_vert,fragmentshader:v.meshlambert_frag},phong:{uniforms:da.merge([l.common,l.specularmap,="" l.envmap,l.aomap,l.lightmap,l.emissivemap,l.bumpmap,l.normalmap,l.displacementmap,l.gradientmap,l.fog,l.lights,{emissive:{value:new="" i(0)},specular:{value:new="" i(1118481)},shininess:{value:30}}]),vertexshader:v.meshphong_vert,fragmentshader:v.meshphong_frag},standard:{uniforms:da.merge([l.common,l.envmap,l.aomap,l.lightmap,l.emissivemap,l.bumpmap,l.normalmap,l.displacementmap,l.roughnessmap,l.metalnessmap,l.fog,l.lights,{emissive:{value:new="" i(0)},roughness:{value:.5},metalness:{value:.5},envmapintensity:{value:1}}]),="" vertexshader:v.meshphysical_vert,fragmentshader:v.meshphysical_frag},points:{uniforms:da.merge([l.points,l.fog]),vertexshader:v.points_vert,fragmentshader:v.points_frag},dashed:{uniforms:da.merge([l.common,l.fog,{scale:{value:1},dashsize:{value:1},totalsize:{value:2}}]),vertexshader:v.linedashed_vert,fragmentshader:v.linedashed_frag},depth:{uniforms:da.merge([l.common,l.displacementmap]),vertexshader:v.depth_vert,fragmentshader:v.depth_frag},normal:{uniforms:da.merge([l.common,l.bumpmap,l.normalmap,="" l.displacementmap,{opacity:{value:1}}]),vertexshader:v.normal_vert,fragmentshader:v.normal_frag},cube:{uniforms:{tcube:{value:null},tflip:{value:-1},opacity:{value:1}},vertexshader:v.cube_vert,fragmentshader:v.cube_frag},equirect:{uniforms:{tequirect:{value:null}},vertexshader:v.equirect_vert,fragmentshader:v.equirect_frag},distancergba:{uniforms:da.merge([l.common,l.displacementmap,{referenceposition:{value:new="" p},neardistance:{value:1},fardistance:{value:1e3}}]),vertexshader:v.distancergba_vert,="" fragmentshader:v.distancergba_frag},shadow:{uniforms:da.merge([l.lights,l.fog,{color:{value:new="" i(0)},opacity:{value:1}}]),vertexshader:v.shadow_vert,fragmentshader:v.shadow_frag}};rb.physical="{uniforms:Da.merge([rb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:V.meshphysical_vert,fragmentShader:V.meshphysical_frag};jb.RotationOrders="XYZ" yzx="" zxy="" xzy="" yxz="" zyx".split("="" ");jb.defaultorder="XYZ" ;object.defineproperties(jb.prototype,{x:{get:function(){return="" this._x},="" set:function(a){this._x="a;this.onChangeCallback()}},y:{get:function(){return" this._y},set:function(a){this._y="a;this.onChangeCallback()}},z:{get:function(){return" this._z},set:function(a){this._z="a;this.onChangeCallback()}},order:{get:function(){return" this._order},set:function(a){this._order="a;this.onChangeCallback()}}});Object.assign(jb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return" this},clone:function(){return="" new="" this.constructor(this._x,="" this._y,this._z,this._order)},copy:function(a){this._x="a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return" this},setfromrotationmatrix:function(a,b,c){var="" d="S.clamp,e=a.elements;a=e[0];var" f="e[4],g=e[8],h=e[1],l=e[5],m=e[9],k=e[2],n=e[6];e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999">Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(n,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?
    (this._y=Math.atan2(g,e),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-k,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(-k,e),this._z=Math.atan2(-f,l)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(n,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,l))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,l),this._y=Math.atan2(-k,a)):(this._x=
    0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(n,l),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new M;return function(b,c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,
    a.y,a.z,b||this._order)},reorder:function(){var a=new ja;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?
    a.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Sd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0="==a&&(console.warn("THREE.Object3D:" 0!="=(this.mask&a.mask)}});var" zf="0;A.DefaultUp=new" p(0,1,0);a.defaultmatrixautoupdate="!0;A.prototype=Object.assign(Object.create(xa.prototype)," {constructor:a,isobject3d:!0,onbeforerender:function(){},onafterrender:function(){},applymatrix:function(a){this.matrix.multiplymatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyquaternion:function(a){this.quaternion.premultiply(a);return="" this},setrotationfromaxisangle:function(a,b){this.quaternion.setfromaxisangle(a,b)},setrotationfromeuler:function(a){this.quaternion.setfromeuler(a,!0)},setrotationfrommatrix:function(a){this.quaternion.setfromrotationmatrix(a)},="" setrotationfromquaternion:function(a){this.quaternion.copy(a)},rotateonaxis:function(){var="" a="new" ja;return="" function(b,c){a.setfromaxisangle(b,c);this.quaternion.multiply(a);return="" this}}(),rotateonworldaxis:function(){var="" function(b,c){a.setfromaxisangle(b,c);this.quaternion.premultiply(a);return="" this}}(),rotatex:function(){var="" p(1,0,0);return="" function(b){return="" this.rotateonaxis(a,b)}}(),rotatey:function(){var="" p(0,1,0);return="" this.rotateonaxis(a,b)}}(),="" rotatez:function(){var="" p(0,0,1);return="" this.rotateonaxis(a,b)}}(),translateonaxis:function(){var="" p;return="" function(b,c){a.copy(b).applyquaternion(this.quaternion);this.position.add(a.multiplyscalar(c));return="" this}}(),translatex:function(){var="" this.translateonaxis(a,b)}}(),translatey:function(){var="" this.translateonaxis(a,b)}}(),translatez:function(){var="" this.translateonaxis(a,="" b)}}(),localtoworld:function(a){return="" a.applymatrix4(this.matrixworld)},worldtolocal:function(){var="" m;return="" b.applymatrix4(a.getinverse(this.matrixworld))}}(),lookat:function(){var="" m,b="new" function(c,d,e){c.isvector3?b.copy(c):b.set(c,d,e);this.iscamera?a.lookat(this.position,b,this.up):a.lookat(b,this.position,this.up);this.quaternion.setfromrotationmatrix(a)}}(),add:function(a){if(1<arguments.length){for(var="" b="0;b<arguments.length;b++)this.add(arguments[b]);" return="" this}if(a="==this)return" console.error("three.object3d.add:="" object="" can't="" be="" added="" as="" child="" of="" itself.",a),this;a&&a.isobject3d?(null!="=a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add:" not="" an="" instance="" three.object3d.",a);return="" this},remove:function(a){if(1<arguments.length){for(var="" this}b="this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"})," this.children.splice(b,1));return="" this},getobjectbyid:function(a){return="" this.getobjectbyproperty("id",a)},getobjectbyname:function(a){return="" this.getobjectbyproperty("name",a)},getobjectbyproperty:function(a,b){if(this[a]="==b)return" this;for(var="" c="0,d=this.children.length;c<d;c++){var" e="this.children[c].getObjectByProperty(a,b);if(void" e}},getworldposition:function(a){void="" .getworldposition()="" target="" is="" now="" required"),a="new" p);this.updatematrixworld(!0);="" a.setfrommatrixposition(this.matrixworld)},getworldquaternion:function(){var="" p,b="new" function(c){void="" .getworldquaternion()="" required"),c="new" ja);this.updatematrixworld(!0);this.matrixworld.decompose(a,c,b);return="" c}}(),getworldscale:function(){var="" .getworldscale()="" p);this.updatematrixworld(!0);this.matrixworld.decompose(a,="" b,c);return="" c}}(),getworlddirection:function(){var="" function(b){void="" .getworlddirection()="" required"),b="new" p);this.getworldquaternion(a);return="" b.set(0,0,1).applyquaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var="" tojson:function(a){function="" b(b,c){void="" c.uuid}function="" c(a){var="" in="" a){var="" d="a[c];delete" d.metadata;b.push(d)}return="" b}var="" a,e="{};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var" f="{};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=" !0);!1="==this.visible&&(f.visible=!1);!1===this.frustumCulled&&(f.frustumCulled=!1);0!==this.renderOrder&&(f.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.matrix=this.matrix.toArray();if(void" g="this.geometry.parameters;if(void" h="0,l=g.length;h<l;h++)b(a.shapes,g[h]);else" b(a.shapes,g)}if(void="" [];h="0;for(l=this.material.length;h<l;h++)g.push(b(a.materials,this.material[h]));f.material=g}else" f.material="b(a.materials,this.material);if(0<this.children.length)for(f.children=[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){d=c(a.geometries);h=c(a.materials);l=c(a.textures);var" m="c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<l.length&&(e.textures=l);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return" e},="" clone:function(a){return(new="" this.constructor).copy(this,a)},copy:function(a,b){void="" this.frustumculled="a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return" this}});qa.prototype="Object.assign(Object.create(A.prototype),{constructor:Qa,isCamera:!0,copy:function(a,b){A.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return" this},getworlddirection:function(){var="" b&&(console.warn("three.camera:="" b.set(0,0,-1).applyquaternion(a)}}(),updatematrixworld:function(a){a.prototype.updatematrixworld.call(this,a);this.matrixworldinverse.getinverse(this.matrixworld)},clone:function(){return(new="" this.constructor).copy(this)}});jb.prototype="Object.assign(Object.create(Qa.prototype),{constructor:Jb,isOrthographicCamera:!0,copy:function(a,b){Qa.prototype.copy.call(this,a,b);this.left=" a.left;this.right="a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return" this},setviewoffset:function(a,b,c,d,e,f){null="==this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==" this.view&&(this.view.enabled="!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var" c*f;c="e+this.view.width/c*f;a-=this.view.offsetY/b*d;b=a-this.view.height/b*d}this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=A.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return" a}});object.assign(wa.prototype,{clone:function(){return(new="" this.constructor).copy(this)},="" copy:function(a){this.a="a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var" this}});var="" af="0;N.prototype=Object.assign(Object.create(xa.prototype),{constructor:N,isGeometry:!0,applyMatrix:function(a){for(var" sa).getnormalmatrix(a),c="0,d=this.vertices.length;c<" d;c++)this.vertices[c].applymatrix4(a);c="0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var" this},rotatex:function(){var="" function(b){a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" function(b){a.makerotationy(b);this.applymatrix(a);return="" this}}(),rotatez:function(){var="" function(b){a.makerotationz(b);this.applymatrix(a);return="" this}}(),translate:function(){var="" function(b,c,d){a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" function(b,c,d){a.makescale(b,c,d);this.applymatrix(a);return="" this}}(),lookat:function(){var="" a;return="" function(b){a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),="" frombuffergeometry:function(a){function="" b(a,b,d,e){var="" wa(a,b,d,f,p,e);c.faces.push(e);void="" 0,e="a.attributes,f=e.position.array,g=void" void="" 0,h="void" 0,l="void" 0,m="void" 0;void="" k="[],n=[],t=[],r=e=0;e<f.length;e+=3,r+=2)c.vertices.push(new" p(f[e],f[e+1],f[e+2])),void="" p(g[e],g[e+1],g[e+2])),void="" i(h[e],h[e+1],h[e+2])),void="" c(l[r],l[r+1])),void="" c(m[r],m[r+1]));var="" q="a.groups;if(0<q.length)for(e=0;e<q.length;e++){f=q[e];var" v="f.start,x=" f.count;r="v;for(v+=x;r<v;r+=3)void" if(void="" for(e="0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return" this},center:function(){var="" function(){this.computeboundingbox();this.boundingbox.getcenter(a).negate();="" this.translate(a.x,a.y,a.z);return="" this}}(),normalize:function(){this.computeboundingsphere();var="" m;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applymatrix(c);return="" this},computefacenormals:function(){for(var="" p,c="0,d=this.faces.length;c<d;c++){var" computevertexnormals:function(a){void="" b;var="" p;if(a){var="" p,f="new" p;a="0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var" l="this.vertices[b.c];e.subVectors(l,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else" for(this.computefacenormals(),a="0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal)," c[b.c].add(b.normal);d="0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var" a;this.computefacenormals();var="" d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]="c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var" a,b;var="" d.__originalvertexnormals[e]="d.vertexNormals[e].clone()}var" n;f.faces="this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var" p;var="" p,b:new="" p,c:new="" p};d.push(h);g.push(l)}}g="this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();" f.computevertexnormals();c="0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],l=g.vertexNormals[c],h.copy(d.normal),l.a.copy(d.vertexNormals[0]),l.b.copy(d.vertexNormals[1]),l.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new" va);this.boundingbox.setfrompoints(this.vertices)},computeboundingsphere:function(){null="==" this.boundingsphere&&(this.boundingsphere="new" ea);this.boundingsphere.setfrompoints(this.vertices)},merge:function(a,b,c){if(a&&a.isgeometry){var="" d,e="this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,l=a.faces,m=this.faceVertexUvs[0],k=a.faceVertexUvs[0],n=this.colors,p=a.colors;void" sa).getnormalmatrix(b));a="0;for(var" r="g.length;a<r;a++){var" l.length;a<r;a++){g="l[a];var" wa(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void="" m.push(d)}}else="" console.error("three.geometry.merge():="" geometry="" three.geometry.",a)},mergemesh:function(a){a&&a.ismesh?(a.matrixautoupdate&&a.updatematrix(),this.merge(a.geometry,a.matrix)):console.error("three.geometry.mergemesh():="" mesh="" three.mesh.",a)},mergevertices:function(){var="" (a[g]="f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3">g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.facevertexuvs.length;c<e;c++)this.facevertexuvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=b;return 0="==this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<c;e++){var" f},setfrompoints:function(a){this.vertices="[];for(var" b="0,c=a.length;b<c;b++){var" d="a[b];" this.vertices.push(new="" p(d.x,d.y,d.z||0))}return="" this},sortfacesbymaterialindex:function(){for(var="" a="this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return" a.materialindex-b.materialindex});var="" h="a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function" a(a,b,c){return="" c?a|1<<b:a&~(1<<b)}function="" b(a){var="" 0!="=m[b])return" m[b];m[b]="l.length/3;l.push(a.x,a.y,a.z);return" m[b]}function="" c(a){var="" n[b];n[b]="k.length;k.push(a.getHex());return" n[b]}function="" d(a){var="" r[b];r[b]="p.length/2;p.push(a.x,a.y);return" r[b]}var="" e="{metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&" (e.name="this.name);if(void" f="this.parameters,g;for(g" in="" f)void="" e}f="[];for(g=0;g<this.vertices.length;g++){var" l="[],m={},k=[],n={},p=[],r={};for(g=0;g<this.faces.length;g++){var" q="this.faces[g],v=void" g="a(G,4,x);G=a(G,5,y);G=a(G,6,w);G=a(G,7,B);h.push(G);h.push(q.a,q.b,q.c);h.push(q.materialIndex);v&&(v=this.faceVertexUvs[0][g],h.push(d(v[0]),d(v[1]),d(v[2])));x&&h.push(b(q.normal));y&&(x=q.vertexNormals,h.push(b(x[0]),b(x[1]),b(x[2])));w&&h.push(c(q.color));B&&(q=q.vertexColors,h.push(c(q[0]),c(q[1]),c(q[2])))}e.data={};e.data.vertices=f;e.data.normals=l;0<k.length&&(e.data.colors=k);0<p.length&&(e.data.uvs=[p]);e.data.faces=h;return" e},clone:function(){return(new="" n).copy(this)},copy:function(a){var="" b,="" c,d;this.vertices="[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var" m="0;for(d=h.length;m<d;m++)l.push(h[m].clone());this.faceVertexUvs[f].push(l)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void" this.morphtargets.push(d)}m="a.morphNormals;f=0;for(b=m.length;f<b;f++){d={};if(void" a.linedistancesneedupdate;this.groupsneedupdate="a.groupsNeedUpdate;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}});object.defineproperty(t.prototype,"needsupdate",{set:function(a){!0="==a&&this.version++}});Object.assign(T.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw" new="" typeerror("three.bufferattribute:="" array="" should="" be="" typed="" array.");this.count="void" a;return="" this},copy:function(a){this.array="new" a.array.constructor(a.array);this.itemsize="a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.itemSize;c*=b.itemSize;for(var" this},copyarray:function(a){this.array.set(a);return="" this},copycolorsarray:function(a){for(var="" color="" is="" undefined",="" d),f="new" i);b[c++]="f.r;b[c++]=f.g;b[c++]=f.b}return" this},copyvector2sarray:function(a){for(var="" vector="" undefined",d),f="new" c);b[c++]="f.x;b[c++]=f.y}return" this},copyvector3sarray:function(a){for(var="" p);b[c++]="f.x;b[c++]=f.y;" b[c++]="f.z}return" this},copyvector4sarray:function(a){for(var="" ea);b[c++]="f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return" this},set:function(a,b){void="" this},getx:function(a){return="" this.array[a*this.itemsize]},setx:function(a,b){this.array[a*this.itemsize]="b;return" this},gety:function(a){return="" this.array[a*this.itemsize+="" 1]},sety:function(a,b){this.array[a*this.itemsize+1]="b;return" this},getz:function(a){return="" this.array[a*this.itemsize+2]},setz:function(a,b){this.array[a*this.itemsize+2]="b;return" this},getw:function(a){return="" this.array[a*this.itemsize+3]},setw:function(a,b){this.array[a*this.itemsize+3]="b;return" this},setxy:function(a,b,c){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return" this},setxyz:function(a,b,c,d){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return" this},="" setxyzw:function(a,b,c,d,e){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return" this},onupload:function(a){this.onuploadcallback="a;return" this},clone:function(){return(new="" this.constructor(this.array,this.itemsize)).copy(this)}});rc.prototype="Object.create(T.prototype);rc.prototype.constructor=rc;sc.prototype=Object.create(T.prototype);sc.prototype.constructor=sc;tc.prototype=Object.create(T.prototype);tc.prototype.constructor=tc;uc.prototype=Object.create(T.prototype);" uc.prototype.constructor="uc;kb.prototype=Object.create(T.prototype);kb.prototype.constructor=kb;vc.prototype=Object.create(T.prototype);vc.prototype.constructor=vc;lb.prototype=Object.create(T.prototype);lb.prototype.constructor=lb;z.prototype=Object.create(T.prototype);z.prototype.constructor=z;wc.prototype=Object.create(T.prototype);wc.prototype.constructor=wc;Object.assign(Ce.prototype,{computeGroups:function(a){var" 0;a="a.faces;for(var" c){c="e.materialIndex;void" k="a.morphNormals,n=k.length;if(0<n){var" p="[];for(m=0;m<n;m++)p[m]=[];this.morphTargets.normal=p}var" r="a.skinIndices,q=a.skinWeights," v="r.length===c.length,x=q.length===c.length;for(m=0;m<b.length;m++){var" y="b[m];this.vertices.push(c[y.a],c[y.b],c[y.c]);var" w="y.vertexNormals;3===w.length?this.normals.push(w[0],w[1],w[2]):(w=y.normal,this.normals.push(w,w,w));w=y.vertexColors;3===w.length?this.colors.push(w[0],w[1],w[2]):(w=y.color,this.colors.push(w,w,w));!0===e&&(w=d[0][m],void" undefined="" vertexuv="" ",m),this.uvs.push(new="" c,new="" c)));!0="==" f&&(w="d[1][m],void" vertexuv2="" ",m),this.uvs2.push(new="" c)));for(w="0;w<h;w++){var" this.colorsneedupdate="a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return" this}});var="" bf="1;F.prototype=Object.assign(Object.create(xa.prototype),{constructor:F,isBufferGeometry:!0,getIndex:function(){return" this.index},setindex:function(a){array.isarray(a)?this.index="new" (65535<de(a)?lb:kb)(a,1):this.index="a},addAttribute:function(a,b,c){if(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute)if("index"===a)console.warn("THREE.BufferGeometry.addAttribute:" use="" .setindex()="" for="" index="" attribute."),="" this.setindex(b);else="" return="" this.attributes[a]="b,this;else" console.warn("three.buffergeometry:="" .addattribute()="" now="" expects="" (="" name,="" attribute="" )."),this.addattribute(a,new="" t(b,c))},getattribute:function(a){return="" this.attributes[a]},removeattribute:function(a){delete="" this.attributes[a];return="" this},addgroup:function(a,b,c){this.groups.push({start:a,count:b,materialindex:void="" applymatrix:function(a){var="" sa).getnormalmatrix(a).applytobufferattribute(b),b.needsupdate="!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return" this},rotatex:function(){var="" m;return="" function(b){a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" function(b){a.makerotationy(b);="" this.applymatrix(a);return="" this}}(),rotatez:function(){var="" function(b){a.makerotationz(b);this.applymatrix(a);return="" this}}(),translate:function(){var="" function(b,c,d){a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" function(b,c,d){a.makescale(b,c,d);this.applymatrix(a);return="" this}}(),lookat:function(){var="" function(b){a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),center:function(){var="" p;="" function(){this.computeboundingbox();this.boundingbox.getcenter(a).negate();this.translate(a.x,a.y,a.z);return="" this}}(),setfromobject:function(a){var="" z(3*b.vertices.length,3);var="" c="new" z(3*b.colors.length,3);this.addattribute("position",a.copyvector3sarray(b.vertices));this.addattribute("color",c.copycolorsarray(b.colors));b.linedistances&&b.linedistances.length="==b.vertices.length&&(a=new" z(b.linedistances.length,1),this.addattribute("linedistance",="" a.copyarray(b.linedistances)));null!="=b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else" a.ismesh&&b&&b.isgeometry&&this.fromgeometry(b);return="" this},setfrompoints:function(a){for(var="" z(b,3));return="" this},updatefromobject:function(a){var="" 0,="" b.elementsneedupdate="!1);if(void" this.fromgeometry(b);c.verticesneedupdate="b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void" !1);!0="==b.normalsNeedUpdate&&(c=this.attributes.normal,void" !0),b.linedistancesneedupdate="!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return" this},fromgeometry:function(a){a.__directgeometry="(new" ce).fromgeometry(a);return="" this.fromdirectgeometry(a.__directgeometry)},fromdirectgeometry:function(a){var="" float32array(3*a.vertices.length);this.addattribute("position",(new="" t(b,3)).copyvector3sarray(a.vertices));0<a.normals.length&&(b="new" float32array(3*a.normals.length),this.addattribute("normal",(new="" t(b,="" 3)).copyvector3sarray(a.normals)));0<a.colors.length&&(b="new" float32array(3*a.colors.length),this.addattribute("color",(new="" t(b,3)).copycolorsarray(a.colors)));0<a.uvs.length&&(b="new" float32array(2*a.uvs.length),this.addattribute("uv",(new="" t(b,2)).copyvector2sarray(a.uvs)));0<a.uvs2.length&&(b="new" float32array(2*a.uvs2.length),this.addattribute("uv2",(new="" t(b,2)).copyvector2sarray(a.uvs2)));this.groups="a.groups;for(var" a.morphtargets){b="[];for(var" z(3*g.length,3);b.push(h.copyvector3sarray(g))}this.morphattributes[c]="b}0<a.skinIndices.length&&(c=new" z(4*a.skinindices.length,4),this.addattribute("skinindex",c.copyvector4sarray(a.skinindices)));0<a.skinweights.length&&(c="new" z(4*a.skinweights.length,4),this.addattribute("skinweight",c.copyvector4sarray(a.skinweights)));null!="=a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return" this},computeboundingbox:function(){null="==" this.boundingbox&&(this.boundingbox="new" va);var="" computed="" min="" max="" have="" nan="" values.="" the="" "position"="" likely="" to="" values.',this)},computeboundingsphere:function(){var="" va,b="new" p;return="" function(){null="==this.boundingSphere&&" (this.boundingsphere="new" ea);var="" radius="" nan.="" values.',this)}}}(),computefacenormals:function(){},="" computevertexnormals:function(){var="" t(new="" float32array(d.length),3));else="" for(var="" p,l="new" p,m="new" p,k="new" p,n="new" p;if(a){a="a.array;0===c.length&&this.addGroup(0,a.length);for(var" t="0,r=c.length;t<r;++t){f=c[t];g=f.start;var" x="3*" a[f+2];h.fromarray(d,q);l.fromarray(d,v);m.fromarray(d,x);k.subvectors(m,l);n.subvectors(h,l);k.cross(n);e[q]+="k.x;e[q+1]+=k.y;e[q+2]+=k.z;e[v]+=k.x;e[v+1]+=k.y;e[v+2]+=k.z;e[x]+=k.x;e[x+1]+=k.y;e[x+2]+=k.z}}}else" for(f="0,g=d.length;f<g;f+=9)h.fromArray(d,f),l.fromArray(d,f+3),m.fromArray(d,f+6),k.subVectors(m,l),n.subVectors(h,l),k.cross(n),e[f]=k.x,e[f+1]=k.y,e[f+2]=k.z,e[f+3]=k.x,e[f+4]=k.y,e[f+5]=k.z,e[f+6]=k.x,e[f+7]=k.y,e[f+8]=k.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a," b){if(a&&a.isbuffergeometry){void="" overwriting="" original="" geometry,="" starting="" at="" offset="0." buffergeometryutils.mergebuffergeometries()="" lossless="" merge."));var="" c)if(void="" this}console.error("three.buffergeometry.merge():="" geometry="" not="" an="" instance="" of="" three.buffergeometry.",a)},normalizenormals:function(){var="" function(){for(var="" console.warn("three.buffergeometry.tononindexed():="" already="" non-indexed."),this;var="" f,b="this.index.array,c=this.attributes,d;for(d" c){var="" f.constructor(b.length*g),l="0;e=0;for(var" n="0;n<g;n++)h[l++]=" f[k++]}a.addattribute(d,new="" t(h,g))}b="this.groups;e=0;for(m=b.length;e<m;e++)c=b[e],a.addGroup(c.start,c.count,c.materialIndex);return" a},tojson:function(){var="" b)void="" a}a.data="{attributes:{}};var" {type:c.array.constructor.name,array:b});c="this.attributes;for(e" a},clone:function(){return(new="" f).copy(this)},copy:function(a){var="" b;this.index="null;this.attributes=" {};this.morphattributes="{};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var" c)this.addattribute(g,c[g].clone());var="" d){var="" null!="=g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}});kb.prototype="Object.create(N.prototype);Kb.prototype.constructor=Kb;mb.prototype=Object.create(F.prototype);mb.prototype.constructor=mb;xc.prototype=Object.create(N.prototype);xc.prototype.constructor=xc;pb.prototype=Object.create(F.prototype);pb.prototype.constructor=pb;var" cf="0;O.prototype=Object.assign(Object.create(xa.prototype)," {constructor:o,ismaterial:!0,onbeforecompile:function(){},setvalues:function(a){if(void="" a){var="" '"+b+"'="" parameter="" undefined.");else="" if("shading"="==b)console.warn("THREE."+this.type+":" .shading="" has="" been="" removed.="" boolean="" .flatshading="" instead."),this.flatshading="1===c?!0:!1;else{var" property="" this="" material."):d&&d.iscolor?d.set(c):d&&d.isvector3&&="" c&&c.isvector3?d.copy(c):this[b]="overdraw" =="=b?Number(c):c}}},toJSON:function(a){function" d.metadata;b.push(d)}return="" b}var="" a;c&&(a="{textures:{},images:{}});var" this.metalness&&(d.metalness="this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void" this.alphamap&&this.alphamap.istexture&&(d.alphamap="this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid," d.displacementscale="this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&" (d.envmap="this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void">this.opacity&&(d.opacity=this.opacity);
    !0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha= 0="==" this.premultipliedalpha);!0="==this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures)," a="b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return" d},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.name="a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=" a.blenddstalpha;this.blendequationalpha="a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));" this.clipshadows="a.clipShadows;this.clipIntersection=a.clipIntersection;var" b="a.clippingPlanes,c=null;if(null!==b){var" d="b.length;c=Array(d);for(var" e="0;e!==d;++e)c[e]=b[e].clone()}this.clippingPlanes=c;this.shadowSide=a.shadowSide;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}});za.prototype="Object.create(O.prototype);za.prototype.constructor=za;za.prototype.isMeshBasicMaterial=!0;za.prototype.copy=function(a){O.prototype.copy.call(this,a);this.color.copy(a.color);this.map=" a.map;this.lightmap="a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=" a.morphtargets;return="" this};va.prototype="Object.create(O.prototype);va.prototype.constructor=va;va.prototype.isShaderMaterial=!0;va.prototype.copy=function(a){O.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Da.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=" a.morphnormals;this.extensions="a.extensions;return" this};va.prototype.tojson="function(a){a=O.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return" a};object.assign(qb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);return="" this},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return="" this},at:function(a,b){void="" b&&(console.warn("three.ray:="" .at()="" target="" is="" now="" required"),b="new" p);return="" b.copy(this.direction).multiplyscalar(a).add(this.origin)},lookat:function(a){this.direction.copy(a).sub(this.origin).normalize();return="" this},recast:function(){var="" p;return="" function(b){this.origin.copy(this.at(b,a));return="" this}}(),closestpointtopoint:function(a,b){void="" .closestpointtopoint()="" p);b.subvectors(a,this.origin);a="b.dot(this.direction);return">
    a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new p;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);
    b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),l=-this.direction.dot(b),m=c.dot(this.direction),k=-c.dot(b),n=c.lengthSq(),p=Math.abs(1-l*l);if(0<p){d=l*k-m;e=l*m-k;var r="h*p;0<=d?e">=-r?e<=r?(h=1 p,d*="h,e*=h,l=d*(d+l*e+2*m)+e*(l*d+e+2*k)+n):(e=h,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n):(e=-h,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n):e<=-r?(d=Math.max(0,-(-l*h+m)),e=0<d?-h:Math.min(Math.max(-h,-k),h),l=-d*d+e*(e+2*k)+n):e<=r?(d=0,e=Math.min(Math.max(-h,-k),h),l=" e*(e+2*k)+n):(d="Math.max(0,-(l*h+m)),e=0<d?h:Math.min(Math.max(-h,-k),h),l=-d*d+e*(e+2*k)+n)}else" e="0<l?-h:h,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return" l}}(),intersectsphere:function(){var="" a="new" p;return="" function(b,c){a.subvectors(b.center,this.origin);var="" d="a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e">b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,
    c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distancetoplane:function(a){var 0="==a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return" b="a.normal.dot(this.direction);if(0===b)return" 0<="a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return" null="==a?null:this.at(a,b)},intersectsPlane:function(a){var">a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,
    b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g="(a.min.x-f.x)*c;c*=a.max.x-f.x}else" h="(a.min.y-f.y)*d;d*=a.max.y-f.y}else">d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0="">c?null:this.at(0<=g?g:c,b)},intersectsbox:function(){var a="new" p;return="" function(b){return="" null!="=this.intersectBox(b,a)}}(),intersectTriangle:function(){var" p,b="new" p,c="new" p,d="new" function(e,f,g,h,l){b.subvectors(f,e);c.subvectors(g,e);d.crossvectors(b,c);f="this.direction.dot(d);if(0<f){if(h)return" null;h="1}else" if(0="">f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,l)}}(),
    applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});Object.assign(Lb.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){void 0===a&&(console.warn("THREE.Line3: .getCenter() target is now required"),
    a=new p);return a.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new p);return a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){void 0===b&&(console.warn("THREE.Line3: .at() target is now required"),b=new p);return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=
    new p,b=new p;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=S.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);void 0===c&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),c=new p);return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&
    a.end.equals(this.end)}});Object.assign(Aa,{getNormal:function(){var a=new p;return function(b,c,d,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new p);e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyscalar(1 0="==h&&(console.warn("THREE.Triangle:" math.sqrt(b)):e.set(0,0,0)}}(),getbarycoord:function(){var="" a="new" p,b="new" p,c="new" p;return="" function(d,e,f,g,h){a.subvectors(g,e);b.subvectors(f,e);c.subvectors(d,e);d="a.dot(a);e=a.dot(b);f=a.dot(c);var" l="b.dot(b);g=b.dot(c);" var="" m="d*l-e*e;void" .getbarycoord()="" target="" is="" now="" required"),h="new" p);if(0="==m)return" h.set(-2,-1,-1);m="1/m;l=(l*f-e*g)*m;d=(d*g-e*f)*m;return" h.set(1-l-d,d,l)}}(),containspoint:function(){var="" function(b,c,d,e){aa.getbarycoord(b,c,d,e,a);return="" 0<="a.x&&0<=a.y&&1">=a.x+a.y}}()});Object.assign(Aa.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);
    this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},getArea:function(){var a=new p,b=new p;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),getMidpoint:function(a){void 0===a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new p);return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(a){return Aa.getNormal(this.a,
    this.b,this.c,a)},getPlane:function(a){void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),a=new p);return a.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(a,b){return Aa.getBarycoord(a,this.a,this.b,this.c,b)},containsPoint:function(a){return Aa.containsPoint(a,this.a,this.b,this.c)},intersectsBox:function(a){return a.intersectsTriangle(this)},closestPointToPoint:function(){var a=new Fa,b=[new Lb,new Lb,new Lb],c=new p,d=new p;return function(e,f){void 0===
    f&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),f=new p);var g=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestpointtopoint(c,!0,d);var h="c.distanceToSquared(d);h<g&&(g=h,f.copy(d))}return" f}}(),equals:function(a){return="" a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});oa.prototype="Object.assign(Object.create(A.prototype),{constructor:oa,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){A.prototype.copy.call(this,a);this.drawMode=a.drawMode;void" 0!="=a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void" this},updatemorphtargets:function(){var="" a="this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var" b="Object.keys(a);" if(0<b.length){var="" c="a[b[0]];if(void" d="c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else" if(c="a.morphTargets,void" a(a,b,c,d,e,f,g){aa.getbarycoord(a,="" b,c,d,v);e.multiplyscalar(v.x);f.multiplyscalar(v.y);g.multiplyscalar(v.z);e.add(f).add(g);return="" e.clone()}function="" b(a,b,c,d,e,f,g,h){if(null="==(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return" null;y.copy(h);y.applymatrix4(a.matrixworld);b="c.ray.origin.distanceTo(y);return" b<c.near||b="">c.far?null:{distance:b,point:y.clone(),object:a}}function c(c,d,e,f,m,k,n,p){g.fromBufferAttribute(f,k);h.fromBufferAttribute(f,n);l.fromBufferAttribute(f,p);if(c=b(c,c.material,
    d,e,g,h,l,x))m&&(t.fromBufferAttribute(m,k),r.fromBufferAttribute(m,n),q.fromBufferAttribute(m,p),c.uv=a(x,g,h,l,t,r,q)),m=new Wa(k,n,p),Aa.getNormal(g,h,l,m.normal),c.face=m,c.faceIndex=k;return c}var d=new M,e=new qb,f=new Ea,g=new p,h=new p,l=new p,m=new p,k=new p,n=new p,t=new C,r=new C,q=new C,v=new p,x=new p,y=new p;return function(p,u){var v=this.geometry,w=this.material,y=this.matrixWorld;if(void 0!==w&&(null===v.boundingSphere&&v.computeBoundingSphere(),f.copy(v.boundingSphere),f.applyMatrix4(y),
    !1!==p.ray.intersectsSphere(f)&&(d.getInverse(y),e.copy(p.ray).applyMatrix4(d),null===v.boundingBox||!1!==e.intersectsBox(v.boundingBox)))){var B;if(v.isBufferGeometry){w=v.index;var C=v.attributes.position;y=v.attributes.uv;var A;if(null!==w){var z=0;for(A=w.count;z<a;z+=3){v=w.getx(z);var e="w.getX(z+1);var" f="w.getX(z+2);if(B=c(this,p,e,C,y,v,E,F))B.faceIndex=Math.floor(z/3),u.push(B)}}else" if(void="" 0!="=C)for(z=0,A=C.count;z<A;z+=3)if(v=z,E=z+1,F=z+2,B=c(this,p,e,C,y,v,E,F))B.index=v,u.push(B)}else" if(v.isgeometry){y="Array.isArray(w);z=v.vertices;A=v.faces;E=v.faceVertexUvs[0];0<E.length&&(C=E);for(var" i="0,L=A.length;I<L;I++){var" q="A[I];B=y?w[Q.materialIndex]:w;if(void" n="z[Q.c];if(!0===B.morphTargets){var" m="v.morphTargets,O=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);l.set(0,0,0);for(var" t="0,S=M.length;T<S;T++){var" v="O[T];if(0!==V){var" x="M[T].vertices;g.addScaledVector(m.subVectors(X[Q.a],E),V);h.addScaledVector(k.subVectors(X[Q.b],F),V);l.addScaledVector(n.subVectors(X[Q.c]," n),v)}}g.add(e);h.add(f);l.add(n);e="g;F=h;N=l}if(B=b(this,B,p,e,E,F,N,x))C&&C[I]&&(M=C[I],t.copy(M[0]),r.copy(M[1]),q.copy(M[2]),B.uv=a(x,E,F,N,t,r,q)),B.face=Q,B.faceIndex=I,u.push(B)}}}}}}(),clone:function(){return(new" this.constructor(this.geometry,this.material)).copy(this)}});ab.prototype="Object.create(Y.prototype);ab.prototype.constructor=ab;ab.prototype.isCubeTexture=!0;Object.defineProperty(ab.prototype,"images",{get:function(){return" this.image},set:function(a){this.image="a}});var" je="new" y,="" ke="new" ab,ee="[],Ge=[],Ie=new" float32array(16),he="new" float32array(9);oe.prototype.setvalue="function(a,b){for(var" c="this.seq,d=0,e=c.length;d!==e;++d){var" ud="/([\w\d_]+)(\])?(\[|\.)?/g;bb.prototype.setValue=function(a,b,c){b=this.map[b];void" g="b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a," h.value,d)}};bb.seqwithvalue="function(a,b){for(var" in="" b&&c.push(f)}return="" c};var="" rg="0,Ag=0;cb.prototype=Object.create(O.prototype);cb.prototype.constructor=cb;cb.prototype.isMeshDepthMaterial=!0;cb.prototype.copy=function(a){O.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;" this.displacementbias="a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return" this};db.prototype="Object.create(O.prototype);db.prototype.constructor=db;db.prototype.isMeshDistanceMaterial=!0;db.prototype.copy=function(a){O.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;" this.displacementmap="a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return" this};zc.prototype="Object.create(Y.prototype);zc.prototype.constructor=zc;la.prototype=Object.assign(Object.create(Qa.prototype),{constructor:la,isPerspectiveCamera:!0,copy:function(a,b){Qa.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);" this.filmgauge="a.filmGauge;this.filmOffset=a.filmOffset;return" this},setfocallength:function(a){a=".5*this.getFilmHeight()/a;this.fov=2*S.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var" a="Math.tan(.5*S.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return" 2*s.rad2deg*math.atan(math.tan(.5*s.deg2rad*this.fov)="" this.zoom)},getfilmwidth:function(){return="" this.filmgauge*math.min(this.aspect,1)},getfilmheight:function(){return="" math.max(this.aspect,1)},setviewoffset:function(a,b,c,d,e,f){this.aspect="a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var" b="a*Math.tan(.5*S.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==this.view&&this.view.enabled){var" a.object.aspect="this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return" a}});qd.prototype="Object.assign(Object.create(la.prototype),{constructor:qd,isArrayCamera:!0});Ob.prototype.isFogExp2=!0;Ob.prototype.clone=function(){return" new="" ob(this.color.gethex(),this.density)};ob.prototype.tojson="function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};Pb.prototype.isFog=!0;Pb.prototype.clone=" function(){return="" pb(this.color.gethex(),this.near,this.far)};pb.prototype.tojson="function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};rd.prototype=Object.assign(Object.create(A.prototype),{constructor:rd,copy:function(a,b){A.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=" a.matrixautoupdate;return="" this},tojson:function(a){var="" b}});eb.prototype="Object.create(O.prototype);eb.prototype.constructor=eb;eb.prototype.isSpriteMaterial=!0;eb.prototype.copy=function(a){O.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return" this};ac.prototype="Object.assign(Object.create(A.prototype)," {constructor:ac,issprite:!0,raycast:function(){var="" p,b="new" p,c="new" p;return="" function(d,e){b.setfrommatrixposition(this.matrixworld);d.ray.closestpointtopoint(b,a);c.setfrommatrixscale(this.matrixworld);var="">f||(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)},copy:function(a){A.prototype.copy.call(this,a);void 0!==a.center&&
    this.center.copy(a.center);return this}});Bc.prototype=Object.assign(Object.create(A.prototype),{constructor:Bc,copy:function(a){A.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var 0="==b&&(b=0);b=Math.abs(b);for(var" d="a[b];this.addLevel(d.object.clone(),d.distance)}return" this},addlevel:function(a,b){void="" c="this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var" b="this.levels,c=1,d=b.length;c<" d&&!(a<b[c].distance);c++);return="" b[c-1].object},raycast:function(){var="" a="new" p;return="" function(b,c){a.setfrommatrixposition(this.matrixworld);var="" p,b="new" function(c){var="" e="1,f=d.length;e<f;e++)if(c">=d[e].distance)d[e-1].object.visible=
    !1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=a.prototype.tojson.call(this,a);a.object.levels=[];for(var 0="==b&&(this.updateMatrixWorld(!0)," b="this.levels,c=0,d=b.length;c<d;c++){var" e="b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return" a}});object.assign(cc.prototype,{calculateinverses:function(){this.boneinverses="[];for(var" a="0,b=this.bones.length;a<b;a++){var" c="new" m;this.bones[a]&&c.getinverse(this.bones[a].matrixworld);this.boneinverses.push(c)}},pose:function(){var="" a,="" b;var="" m,b="new" m;return="" function(){for(var="" h;g++)a.multiplymatrices(c[g]?c[g].matrixworld:b,d[g]),a.toarray(e,16*g);void="" 0!="=f&&(f.needsUpdate=!0)}}(),clone:function(){return" new="" cc(this.bones,this.boneinverses)},getbonebyname:function(a){for(var="" d="this.bones[b];if(d.name===a)return" d}}});sd.prototype="Object.assign(Object.create(A.prototype),{constructor:sd,isBone:!0});td.prototype=Object.assign(Object.create(oa.prototype),{constructor:td,isSkinnedMesh:!0,initBones:function(){var" void="" sd;a.push(e);e.name="d.name;e.position.fromArray(d.pos);e.quaternion.fromArray(d.rotq);void" a},bind:function(a,b){this.skeleton="a;void" this.skeleton.calculateinverses(),b="this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var" a;if(this.geometry&&this.geometry.isgeometry)for(a="0;a<this.geometry.skinWeights.length;a++){var" if(this.geometry&&this.geometry.isbuffergeometry){b="new" ea;var="" 0;a<d.count;a++)b.x="d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.manhattanLength(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){oa.prototype.updateMatrixWorld.call(this,a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh:" unrecognized="" bindmode:="" "+this.bindmode)},clone:function(){return(new="" this.constructor(this.geometry,="" this.material)).copy(this)}});u.prototype="Object.create(O.prototype);U.prototype.constructor=U;U.prototype.isLineBasicMaterial=!0;U.prototype.copy=function(a){O.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return" this};ua.prototype="Object.assign(Object.create(A.prototype),{constructor:ua,isLine:!0,computeLineDistances:function(){var" p,b="new" p;return="" function(){var="" c.index){for(var="" three.float32bufferattribute(e,1))}else="" console.warn("three.line.computelinedistances():="" computation="" only="" possible="" with="" non-indexed="" buffergeometry.");else="" if(c.isgeometry)for(d="c.vertices,e=c.lineDistances,e[0]=0,f=1,g=d.length;f<g;f++)e[f]=e[f-1],e[f]+=d[f-1].distanceTo(d[f]);return" this}}(),raycast:function(){var="" qb,c="new" ea;return="" function(d,e){var="" f="d.linePrecision;f*=f;var" g="this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var" l="new" p,m="new" p;h="new" p;var="" k="new" p,n="this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var" t="g.index,r=g.attributes.position.array;if(null!==t){t=t.array;g=0;for(var" q="t.length-1;g<q;g+=n){var" v="t[g+1];l.fromArray(r," 3*t[g]);m.fromarray(r,3*v);v="b.distanceSqToSegment(l,m,k,h);v">f||(k.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(k),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}else for(g=0,q=r.length/3-1;g<q;g+=n)l.fromarray(r,3*g),m.fromarray(r,3*g+3),v=b.distancesqtosegment(l,m,k,h),v>f||(k.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(k),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),
    index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(l=g.vertices,m=l.length,g=0;g<m-1;g+=n)v=b.distancesqtosegment(l[g],l[g+1],k,h),v>f||(k.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(k),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});aa.prototype=Object.assign(Object.create(ua.prototype),
    {constructor:aa,isLineSegments:!0,computeLineDistances:function(){var a=new p,b=new p;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,e=[],f=0,g=d.count;f<g;f+=2)a.frombufferattribute(d,f),b.frombufferattribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceto(b);c.addattribute("linedistance",new three.float32bufferattribute(e,1))}else="" console.warn("three.linesegments.computelinedistances():="" computation="" only="" possible="" with="" non-indexed="" buffergeometry.");="" else="" if(c.isgeometry)for(d="c.vertices,e=c.lineDistances,f=0,g=d.length;f<g;f+=2)a.copy(d[f]),b.copy(d[f+1]),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);return" this}}()});ud.prototype="Object.assign(Object.create(ua.prototype),{constructor:ud,isLineLoop:!0});Ha.prototype=Object.create(O.prototype);Ha.prototype.constructor=Ha;Ha.prototype.isPointsMaterial=!0;Ha.prototype.copy=function(a){O.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;" return="" this};qb.prototype="Object.assign(Object.create(A.prototype),{constructor:Qb,isPoints:!0,raycast:function(){var" a="new" m,b="new" qb,c="new" ea;return="" function(d,e){function="" f(a,c){var="" f="b.distanceSqToPoint(a);f<k&&(b.closestPointToPoint(a,n),n.applyMatrix4(l),a=d.ray.origin.distanceTo(n),a<d.near||a">d.far||e.push({distance:a,distanceToRay:Math.sqrt(f),point:n.clone(),index:c,face:null,object:g}))}var g=this,h=this.geometry,l=this.matrixWorld,m=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();
    c.copy(h.boundingSphere);c.applyMatrix4(l);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(l);b.copy(d.ray).applyMatrix4(a);m/=(this.scale.x+this.scale.y+this.scale.z)/3;var k=m*m;m=new p;var n=new p;if(h.isBufferGeometry){var t=h.index;h=h.attributes.position.array;if(null!==t){var r=t.array;t=0;for(var q=r.length;t<q;t++){var v="r[t];m.fromArray(h,3*v);f(m,v)}}else" for(t="0,r=h.length/3;t<r;t++)m.fromArray(h,3*t),f(m,t)}else" for(m="h.vertices,t=0,r=m.length;t<r;t++)f(m[t],t)}}}(),clone:function(){return(new" this.constructor(this.geometry,="" this.material)).copy(this)}});vd.prototype="Object.assign(Object.create(A.prototype),{constructor:vd,isGroup:!0});Yd.prototype=Object.assign(Object.create(Y.prototype),{constructor:Yd,isVideoTexture:!0,update:function(){var" a="this.image;a.readyState">=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Rb.prototype=Object.create(Y.prototype);Rb.prototype.constructor=Rb;Rb.prototype.isCompressedTexture=!0;Dc.prototype=Object.create(Y.prototype);Dc.prototype.constructor=Dc;Dc.prototype.isDepthTexture=!0;Sb.prototype=
    Object.create(F.prototype);Sb.prototype.constructor=Sb;Ec.prototype=Object.create(N.prototype);Ec.prototype.constructor=Ec;Tb.prototype=Object.create(F.prototype);Tb.prototype.constructor=Tb;Fc.prototype=Object.create(N.prototype);Fc.prototype.constructor=Fc;pa.prototype=Object.create(F.prototype);pa.prototype.constructor=pa;Gc.prototype=Object.create(N.prototype);Gc.prototype.constructor=Gc;Ub.prototype=Object.create(pa.prototype);Ub.prototype.constructor=Ub;Hc.prototype=Object.create(N.prototype);
    Hc.prototype.constructor=Hc;sb.prototype=Object.create(pa.prototype);sb.prototype.constructor=sb;Ic.prototype=Object.create(N.prototype);Ic.prototype.constructor=Ic;Vb.prototype=Object.create(pa.prototype);Vb.prototype.constructor=Vb;Jc.prototype=Object.create(N.prototype);Jc.prototype.constructor=Jc;Wb.prototype=Object.create(pa.prototype);Wb.prototype.constructor=Wb;Kc.prototype=Object.create(N.prototype);Kc.prototype.constructor=Kc;Xb.prototype=Object.create(F.prototype);Xb.prototype.constructor=
    Xb;Lc.prototype=Object.create(N.prototype);Lc.prototype.constructor=Lc;Yb.prototype=Object.create(F.prototype);Yb.prototype.constructor=Yb;Mc.prototype=Object.create(N.prototype);Mc.prototype.constructor=Mc;Zb.prototype=Object.create(F.prototype);Zb.prototype.constructor=Zb;var Lg={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=Xe(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var l=c;d=[];var m;var k=0;for(m=b.length;k<m;k++){var n="b[k]*l;var" p="k<m-1?b[k+1]*l:a.length;n=" xe(a,n,p,l,!1);n="==n.next&&(n.steiner=!0);d.push(Jg(n))}d.sort(Hg);for(k=0;k<d.length;k++){b=d[k];l=f;if(l=Ig(b,l))b=$e(l,b),Oc(b,b.next);f=Oc(f,f.next)}}if(a.length">80*c){var r=h=a[0];var q=d=a[1];for(l=c;l<e;l+=c)k=a[l],b=a[l+1],k<r&&(r=k),b<q&&(q=b),k>h&&(h=k),b>d&&(d=b);h=Math.max(h-r,d-q);h=0!==h?1/h:0}Pc(f,g,c,r,q,h);return g}},Xa={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},isclockwise:function(a){return 0="">Xa.area(a)},triangulateShape:function(a,
    b){var c=[],d=[],e=[];af(a);bf(c,a);var f=a.length;b.forEach(af);for(a=0;a<b.length;a++)d.push(f),f+=b[a].length,bf(c,b[a]);b=lg.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return e}};fb.prototype="Object.create(N.prototype);fb.prototype.constructor=fb;Ia.prototype=Object.create(F.prototype);Ia.prototype.constructor=Ia;Ia.prototype.getArrays=function(){var" a="this.getAttribute("position");a=a?Array.prototype.slice.call(a.array):[];var" b="this.getAttribute("uv");b=b?Array.prototype.slice.call(b.array):" [];var="" c="this.index;c=c?Array.prototype.slice.call(c.array):[];return{position:a,uv:b,index:c}};Ia.prototype.addShapeList=function(a,b){var" d="0;d<c;d++)this.addShape(a[d],b);this.setIndex(b.arrays.index);this.addAttribute("position",new" z(b.arrays.position,3));this.addattribute("uv",new="" z(b.arrays.uv,2))};ia.prototype.addshape="function(a,b){function" c(a,b,c){b||console.error("three.extrudegeometry:="" vec="" does="" not="" exist");return="" b.clone().multiplyscalar(c).add(a)}="" function="" d(a,b,c){var="" e="a.y-b.y;var" f="c.x-a.x;var" g="c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)">Number.EPSILON){var l=Math.sqrt(h),m=Math.sqrt(f*f+g*g);h=b.x-e/l;b=b.y+d/l;g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new C(f,d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(f=-e,e=math.sqrt(h)):(f=d,d=e,e=math.sqrt(h 2));return="" new="" c(f="" e,d="" e)}function="" e(a,b){for(j="a.length;0<=--J;){var" c="J;var" d="J-1;0">d&&(d=a.length-1);var e,f=B+2*x;for(e=0;e<f;e++){var g="aa*e,m=aa*(e+1),n=b+d+g,p=b+d+m;m=b+c+m;h(b+c+g);h(n);h(m);h(n);h(p);h(m);g=k.length/3;g=E.generateSideWallUV(T,k,g-6,g-3,g-2,g-1);l(g[0]);l(g[1]);l(g[3]);l(g[1]);l(g[2]);l(g[3])}}}function" f(a,b,c){r.push(a);r.push(b);r.push(c)}function="" g(a,b,c){h(a);h(b);h(c);a="k.length/3;a=E.generateTopUV(T,k,a-3,a-2,a-1);l(a[0]);l(a[1]);l(a[2])}function" h(a){n.push(k.length="" 3);k.push(r[3*a]);k.push(r[3*="" a+1]);k.push(r[3*a+2])}function="" l(a){t.push(a.x);t.push(a.y)}var="" m="b.arrays?b.arrays:this.getArrays(),k=m.position,n=m.index,t=m.uv,r=[];m=void" 0!="=b.amount?b.amount:100;var" q="void" if(g){var="" h="G.getSpacedPoints(B);A=!0;y=!1;var" f="void" i="new" p;var="" n="new" l="new" p}y||(v="q=x=0);var" m,t="this;w=a.extractPoints(w);a=w.shape;var" o="w.holes;if(!Xa.isClockWise(a)){a=a.reverse();var" s="O[Q];Xa.isClockWise(S)&&(O[Q]=S.reverse())}}var" v="Xa.triangulateShape(a,O),X=a;Q=0;for(M=O.length;Q<M;Q++)S=O[Q],a=a.concat(S);var" u,aa="a.length,Y,da=V.length;w=[];var" j="0;var" w="X.length;var" r="W-1;for(U=J+1;J<W;J++," r++,u++)r="==W&&(R=0),U===W&&(U=0),w[J]=d(X[J],X[R],X[U]);G=[];var" ea="w.concat();Q=0;for(M=O.length;Q<M;Q++){S=O[Q];var" ca="[];J=0;W=S.length;R=W-1;for(U=J+1;J<W;J++,R++,U++)R===W&&(R=0),U===W&&(U=0),ca[J]=d(S[J],S[R],S[U]);G.push(ca);ea=ea.concat(ca)}for(R=0;R<x;R++){W=R/x;var" fa="q*Math.cos(W*Math.PI/2);U=v*Math.sin(W*Math.PI/2);J=0;for(W=X.length;J<W;J++){var" ha="c(X[J],w[J],U);f(ha.x,ha.y,-fa)}Q=0;for(M=O.length;Q<M;Q++)for(S=O[Q],ca=G[Q],J=0,W=S.length;J<W;J++)ha=c(S[J],ca[J],U),f(ha.x,ha.y,-fa)}U=" v;for(j="0;J<aa;J++)ha=y?c(a[J],ea[J],U):a[J],A?(N.copy(F.normals[0]).multiplyScalar(ha.x),I.copy(F.binormals[0]).multiplyScalar(ha.y),L.copy(H[0]).add(N).add(I),f(L.x,L.y,L.z)):f(ha.x,ha.y,0);for(W=1;W<=B;W++)for(J=0;J<aa;J++)ha=y?c(a[J],ea[J],U):a[J],A?(N.copy(F.normals[W]).multiplyScalar(ha.x),I.copy(F.binormals[W]).multiplyScalar(ha.y),L.copy(H[W]).add(N).add(I),f(L.x,L.y,L.z)):f(ha.x,ha.y,m/B*W);for(R=x-1;0<=R;R--){W=R/x;fa=q*Math.cos(W*Math.PI/2);U=v*Math.sin(W*Math.PI/2);J=0;for(W=X.length;J<" w;j++)ha="c(X[J],w[J],U),f(ha.x,ha.y,m+fa);Q=0;for(M=O.length;Q<M;Q++)for(S=O[Q],ca=G[Q],J=0,W=S.length;J<W;J++)ha=c(S[J],ca[J],U),A?f(ha.x,ha.y+H[B-1].y,H[B-1].x+fa):f(ha.x,ha.y,m+fa)}(function(){var" a="k.length/3;if(y){var" b="0*aa;for(J=0;J<da;J++)Y=V[J],g(Y[2]+b,Y[1]+b,Y[0]+b);b=aa*(B+2*x);for(J=0;J<da;J++)Y=V[J],g(Y[0]+b,Y[1]+b,Y[2]+b)}else{for(J=0;J<da;J++)Y=V[J],g(Y[2],Y[1],Y[0]);for(J=0;J<da;J++)Y=V[J],g(Y[0]+aa*B,Y[1]+aa*B,Y[2]+aa*B)}T.addGroup(a,k.length/3-a,0)})();(function(){var" 3,b="0;e(X,b);b+=X.length;Q=0;for(M=O.length;Q<M;Q++)S=O[Q],e(S,b),b+=S.length;T.addGroup(a,k.length/3-a,1)})();b.arrays||(this.setIndex(n),this.addAttribute("position",new" z(k,3)),this.addattribute("uv",new="" z(t,2)))};fb.worlduvgenerator="{generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var" c(b[3*c],b[3*c+1]),new="" c(a,d),new="" c(f,e)]},generatesidewalluv:function(a,b,c,d,e,f){a="b[3*c];var" 1];e="b[3*e+2];var">Math.abs(g-l)?[new C(a,1-c),new C(h,1-d),new C(m,1-e),new C(n,1-b)]:[new C(g,1-c),new C(l,1-d),new C(k,1-e),new C(p,1-b)]}};Rc.prototype=Object.create(N.prototype);Rc.prototype.constructor=Rc;$b.prototype=Object.create(Ia.prototype);$b.prototype.constructor=$b;Sc.prototype=Object.create(N.prototype);Sc.prototype.constructor=Sc;ub.prototype=Object.create(F.prototype);ub.prototype.constructor=ub;Tc.prototype=Object.create(N.prototype);Tc.prototype.constructor=
    Tc;ac.prototype=Object.create(F.prototype);ac.prototype.constructor=ac;Uc.prototype=Object.create(N.prototype);Uc.prototype.constructor=Uc;bc.prototype=Object.create(F.prototype);bc.prototype.constructor=bc;vb.prototype=Object.create(N.prototype);vb.prototype.constructor=vb;vb.prototype.toJSON=function(){var a=N.prototype.toJSON.call(this);return cf(this.parameters.shapes,a)};wb.prototype=Object.create(F.prototype);wb.prototype.constructor=wb;wb.prototype.toJSON=function(){var a=F.prototype.toJSON.call(this);
    return cf(this.parameters.shapes,a)};cc.prototype=Object.create(F.prototype);cc.prototype.constructor=cc;xb.prototype=Object.create(N.prototype);xb.prototype.constructor=xb;Ya.prototype=Object.create(F.prototype);Ya.prototype.constructor=Ya;Vc.prototype=Object.create(xb.prototype);Vc.prototype.constructor=Vc;Wc.prototype=Object.create(Ya.prototype);Wc.prototype.constructor=Wc;Xc.prototype=Object.create(N.prototype);Xc.prototype.constructor=Xc;dc.prototype=Object.create(F.prototype);dc.prototype.constructor=
    dc;var Ca=Object.freeze({WireframeGeometry:Sb,ParametricGeometry:Ec,ParametricBufferGeometry:Tb,TetrahedronGeometry:Gc,TetrahedronBufferGeometry:Ub,OctahedronGeometry:Hc,OctahedronBufferGeometry:sb,IcosahedronGeometry:Ic,IcosahedronBufferGeometry:Vb,DodecahedronGeometry:Jc,DodecahedronBufferGeometry:Wb,PolyhedronGeometry:Fc,PolyhedronBufferGeometry:pa,TubeGeometry:Kc,TubeBufferGeometry:Xb,TorusKnotGeometry:Lc,TorusKnotBufferGeometry:Yb,TorusGeometry:Mc,TorusBufferGeometry:Zb,TextGeometry:Rc,TextBufferGeometry:$b,
    SphereGeometry:Sc,SphereBufferGeometry:ub,RingGeometry:Tc,RingBufferGeometry:ac,PlaneGeometry:xc,PlaneBufferGeometry:pb,LatheGeometry:Uc,LatheBufferGeometry:bc,ShapeGeometry:vb,ShapeBufferGeometry:wb,ExtrudeGeometry:fb,ExtrudeBufferGeometry:Ia,EdgesGeometry:cc,ConeGeometry:Vc,ConeBufferGeometry:Wc,CylinderGeometry:xb,CylinderBufferGeometry:Ya,CircleGeometry:Xc,CircleBufferGeometry:dc,BoxGeometry:Kb,BoxBufferGeometry:mb});yb.prototype=Object.create(O.prototype);yb.prototype.constructor=yb;yb.prototype.isShadowMaterial=
    !0;yb.prototype.copy=function(a){O.prototype.copy.call(this,a);this.color.copy(a.color);return this};ec.prototype=Object.create(va.prototype);ec.prototype.constructor=ec;ec.prototype.isRawShaderMaterial=!0;Sa.prototype=Object.create(O.prototype);Sa.prototype.constructor=Sa;Sa.prototype.isMeshStandardMaterial=!0;Sa.prototype.copy=function(a){O.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=
    a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=
    a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};zb.prototype=Object.create(Sa.prototype);zb.prototype.constructor=zb;zb.prototype.isMeshPhysicalMaterial=
    !0;zb.prototype.copy=function(a){Sa.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ja.prototype=Object.create(O.prototype);Ja.prototype.constructor=Ja;Ja.prototype.isMeshPhongMaterial=!0;Ja.prototype.copy=function(a){O.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=
    a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=
    a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Ab.prototype=Object.create(Ja.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isMeshToonMaterial=!0;Ab.prototype.copy=function(a){Ja.prototype.copy.call(this,
    a);this.gradientMap=a.gradientMap;return this};Bb.prototype=Object.create(O.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isMeshNormalMaterial=!0;Bb.prototype.copy=function(a){O.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;
    this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Cb.prototype=Object.create(O.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshLambertMaterial=!0;Cb.prototype.copy=function(a){O.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=
    a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Db.prototype=Object.create(U.prototype);Db.prototype.constructor=
    Db;Db.prototype.isLineDashedMaterial=!0;Db.prototype.copy=function(a){U.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Mg=Object.freeze({ShadowMaterial:yb,SpriteMaterial:eb,RawShaderMaterial:ec,ShaderMaterial:va,PointsMaterial:Ha,MeshPhysicalMaterial:zb,MeshStandardMaterial:Sa,MeshPhongMaterial:Ja,MeshToonMaterial:Ab,MeshNormalMaterial:Bb,MeshLambertMaterial:Cb,MeshDepthMaterial:cb,MeshDistanceMaterial:db,MeshBasicMaterial:za,LineDashedMaterial:Db,
    LineBasicMaterial:U,Material:O}),Hb={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},ma=new ae,$a={};Object.assign(Ka.prototype,{load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Hb.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},
    0),f;if(void 0!==$a[a])$a[a].push({onLoad:b,onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2];g=g[3];g=window.decodeURIComponent(g);h&&(g=window.atob(g));try{var l=(this.responseType||"").toLowerCase();switch(l){case "arraybuffer":case "blob":var m=new Uint8Array(g.length);for(h=0;h<g.length;h++)m[h]=g.charcodeat(h);var 0="" k="blob" =="=l?new" blob([m.buffer],{type:c}):m.buffer;break;case="" "document":k="(new" domparser).parsefromstring(g,c);break;case="" "json":k="JSON.parse(g);break;default:k=g}window.setTimeout(function(){b&&b(k);e.manager.itemEnd(a)},0)}catch(t){window.setTimeout(function(){d&&d(t);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{$a[a]=[];$a[a].push({onLoad:b,onProgress:c,onError:d});var" n="new" xmlhttprequest;n.open("get",a,!0);n.addeventlistener("load",function(b){var="" c="this.response;Hb.add(a,c);var" d="$a[a];delete" $a[a];if(200="==this.status){for(var" f="0,g=d.length;f<g;f++){var" h="d[f];if(h.onLoad)h.onLoad(c)}e.manager.itemEnd(a)}else" if(0="==" this.status){console.warn("three.fileloader:="" http="" status="" received.");f="0;for(g=d.length;f<g;f++)if(h=d[f],h.onLoad)h.onLoad(c);e.manager.itemEnd(a)}else{f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onError)h.onError(b);e.manager.itemEnd(a);e.manager.itemError(a)}},!1);n.addEventListener("progress",function(b){for(var" $a[a];for(var="" g="c[d];" if(g.onerror)g.onerror(b)}e.manager.itemend(a);e.manager.itemerror(a)},!1);void="" 0!="=this.responseType&&(n.responseType=this.responseType);void" in="" this.requestheader)n.setrequestheader(h,this.requestheader[h]);n.send(null)}e.manager.itemstart(a);return="" n}},setpath:function(a){this.path="a;return" this},setresponsetype:function(a){this.responsetype="a;return" this},setwithcredentials:function(a){this.withcredentials="a;return" this},setmimetype:function(a){this.mimetype="a;return" this},setrequestheader:function(a){this.requestheader="a;return" this}});object.assign(df.prototype,{load:function(a,b,c,d){function="" e(e){l.load(a[e],function(a){a="f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};m+=1;6===m&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var" rb;="" h.image="g;var" l="new" ka(this.manager);l.setpath(this.path);l.setresponsetype("arraybuffer");if(array.isarray(a))for(var="" m="0,k=0,n=a.length;k<n;++k)e(k);else" l.load(a,function(a){a="f._parser(a,!0);if(a.isCubemap)for(var" e="0;e<a.mipmapCount;e++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else" h.image.width="a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&" (h.minfilter="1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return" h},setpath:function(a){this.path="a;return" this}});object.assign(be.prototype,{load:function(a,b,c,d){var="" ib,g="new" ka(this.manager);g.setresponsetype("arraybuffer");g.load(a,function(a){if(a="e._parser(a))void" a.magfilter?a.magfilter:1006,f.minfilter="void" f}});object.assign(yc.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){void="" if(void="" e.manager.itemstart(a),settimeout(function(){b&&b(f);e.manager.itemend(a)},0),f;c="document.createElementNS("http://www.w3.org/1999/xhtml","img");c.addEventListener("load",function(){Hb.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener("error",function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)},!1);"data:"!==a.substr(0,5)&&void" c},setcrossorigin:function(a){this.crossorigin="a;return" this},setpath:function(a){this.path="a;return" this}});object.assign(ce.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){function="" e(c){g.load(a[c],function(a){f.images[c]="a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void" 0,d)}var="" ab,g="new" yc(this.manager);g.setcrossorigin(this.crossorigin);g.setpath(this.path);var="" f},setcrossorigin:function(a){this.crossorigin="a;return" this}});object.assign(xd.prototype,="" {crossorigin:"anonymous",load:function(a,b,c,d){var="" y,f="new" yc(this.manager);f.setcrossorigin(this.crossorigin);f.setpath(this.path);f.load(a,function(c){e.image="c;c=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data:image\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void" e},setcrossorigin:function(a){this.crossorigin="a;return" this}});object.assign(e.prototype,{getpoint:function(){console.warn("three.curve:="" .getpoint()="" not="" implemented.");="" return="" null},getpointat:function(a,b){a="this.getUtoTmapping(a);return" this.getpoint(a,b)},getpoints:function(a){void="" b="[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return" b},getspacedpoints:function(a){void="" b},getlength:function(){var="" a="this.getLengths();return" a[a.length-1]},getlengths:function(a){void="" this.cachearclengths;="" this.needsupdate="!1;var" this.cachearclengths="b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var">g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a="" (d-1);e="c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var" b="a-1E-4;a+=1E-4;0">b&&(b=0);1<a&&(a=1);b=this.getpoint(b);return this.getpoint(a).clone().sub(b).normalize()},gettangentat:function(a){a="this.getUtoTmapping(a);return" this.gettangent(a)},computefrenetframes:function(a,b){var="" c="new" p,d="[],e=[],f=[],g=new" p,h="new" m,l;for(l="0;l<=a;l++){var" m="l/a;d[l]=this.getTangentAt(m);d[l].normalize()}e[0]=new" p;f[0]="new" p;l="Number.MAX_VALUE;m=Math.abs(d[0].x);var" k="Math.abs(d[0].y),n=Math.abs(d[0].z);m<=l&&(l=m,c.set(1,0,0));k<=l&&(l=k,c.set(0,1,0));n<=l&&c.set(0," 0,1);g.crossvectors(d[0],c).normalize();e[0].crossvectors(d[0],g);f[0].crossvectors(d[0],e[0]);for(l="1;l<=a;l++)e[l]=e[l-1].clone(),f[l]=f[l-1].clone(),g.crossVectors(d[l-1],d[l]),g.length()">Number.EPSILON&&(g.normalize(),c=Math.acos(S.clamp(d[l-1].dot(d[l]),-1,1)),e[l].applyMatrix4(h.makeRotationAxis(g,c))),f[l].crossVectors(d[l],e[l]);if(!0===b)for(c=Math.acos(S.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),l=1;l<=a;l++)e[l].applymatrix4(h.makerotationaxis(d[l], c*l)),f[l].crossvectors(d[l],e[l]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.arclengthdivisions="a.arcLengthDivisions;return" this},tojson:function(){var="" a="{metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return" a},fromjson:function(a){this.arclengthdivisions="a.arcLengthDivisions;return" this}});ia.prototype="Object.create(E.prototype);ia.prototype.constructor=" ia;ia.prototype.isellipsecurve="!0;ia.prototype.getPoint=function(a,b){b=b||new" c;for(var="" c="2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0">d;)d+=c;for(;d>c;)d-=c;d<number.epsilon&&(d=e?0:c);!0!==this.aclockwise||e||(d=d===c?-c:d-c);c=this.astartangle+a*d;a=this.ax+this.xradius*math.cos(c);var f="this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return" b.set(a,="" f)};ia.prototype.copy="function(a){E.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return" this};ia.prototype.tojson="function(){var" a="E.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=" this.arotation;return="" a};ia.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return" this};fc.prototype="Object.create(ia.prototype);fc.prototype.constructor=fc;fc.prototype.isArcCurve=!0;var" qd="new" p,ye="new" de,ze="new" de,ae="new" de;x.prototype="Object.create(E.prototype);X.prototype.constructor=X;X.prototype.isCatmullRomCurve3=" !0;x.prototype.getpoint="function(a,b){b=b||new" p;var="" c="this.points,d=c.length;a*=d-(this.closed?0:1);var" e="Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/c.length)+1)*c.length:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var" qd.subvectors(c[0],c[1]).add(c[0]),f="Qd;var" g="c[e%d];var" h="c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Qd.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Qd);if("centripetal"===this.curveType||"chordal"===this.curveType){var" l="chordal" =="=this.curveType?" .5:.25;d="Math.pow(f.distanceToSquared(g),l);e=Math.pow(g.distanceToSquared(h),l);l=Math.pow(h.distanceToSquared(c),l);1E-4">e&&(e=1);1E-4>d&&(d=e);1E-4>l&&(l=e);ye.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,l);ze.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,l);Ae.initNonuniformCatmullRom(f.z,g.z,h.z,c.z,d,e,l)}else"catmullrom"===this.curveType&&(ye.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),ze.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ae.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(ye.calc(a),
    ze.calc(a),Ae.calc(a));return b};X.prototype.copy=function(a){E.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curvetype=a.curvetype;this.tension=a.tension;return this};x.prototype.tojson="function(){var" a="E.prototype.toJSON.call(this);a.points=[];for(var" b="0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return" a};="" x.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.points=[];for(var" d="a.points[b];this.points.push((new" p).fromarray(d))}this.closed="a.closed;this.curveType=a.curveType;this.tension=a.tension;return" this};la.prototype="Object.create(E.prototype);La.prototype.constructor=La;La.prototype.isCubicBezierCurve=!0;La.prototype.getPoint=function(a,b){b=b||new" c;var="" c="this.v0,d=this.v1,e=this.v2,f=this.v3;b.set($c(a,c.x,d.x,e.x,f.x),$c(a,c.y,d.y,e.y," f.y));return="" b};la.prototype.copy="function(a){E.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return" this};la.prototype.tojson="function(){var" a};la.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return" this};="" ta.prototype="Object.create(E.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isCubicBezierCurve3=!0;Ta.prototype.getPoint=function(a,b){b=b||new" p;var="" b};ta.prototype.copy="function(a){E.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return" this};ta.prototype.tojson="function(){var" a.v1="this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return" a};ta.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return" this};wa.prototype="Object.create(E.prototype);wa.prototype.constructor=wa;wa.prototype.isLineCurve=!0;wa.prototype.getPoint=function(a,b){b=b||new" c;1="==a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return" b};wa.prototype.getpointat="function(a,b){return" this.getpoint(a,b)};wa.prototype.gettangent="function(){return" this.v2.clone().sub(this.v1).normalize()};wa.prototype.copy="function(a){E.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};wa.prototype.tojson="function(){var" a};wa.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};ma.prototype="Object.create(E.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isLineCurve3=!0;Ma.prototype.getPoint=function(a,b){b=b||new" p;1="==a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return" b};ma.prototype.getpointat="function(a,b){return" this.getpoint(a,b)};ma.prototype.copy="function(a){E.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};ma.prototype.tojson="function(){var" return="" a};ma.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};na.prototype="Object.create(E.prototype);Na.prototype.constructor=Na;Na.prototype.isQuadraticBezierCurve=!0;Na.prototype.getPoint=function(a,b){b=b||new" b};na.prototype.copy="function(a){E.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return" na.prototype.tojson="function(){var" a};na.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};ua.prototype="Object.create(E.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isQuadraticBezierCurve3=!0;Ua.prototype.getPoint=function(a,b){b=b||new" d.x,e.x),zc(a,c.y,d.y,e.y),zc(a,c.z,d.z,e.z));return="" b};ua.prototype.copy="function(a){E.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};ua.prototype.tojson="function(){var" a};ua.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};oa.prototype="Object.create(E.prototype);" oa.prototype.constructor="Oa;Oa.prototype.isSplineCurve=!0;Oa.prototype.getPoint=function(a,b){b=b||new" e="c[0===a?a:a-1],f=c[a],g=c[a">c.length-2?c.length-1:a+1];c=c[a>c.length-3?c.length-1:a+2];b.set(ef(d,e.x,f.x,g.x,c.x),ef(d,e.y,f.y,g.y,c.y));return b};Oa.prototype.copy=function(a){E.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};oa.prototype.tojson="function(){var" a="E.prototype.toJSON.call(this);a.points=[];for(var" b="0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return" a};oa.prototype.fromjson="function(a){E.prototype.fromJSON.call(this,a);this.points=[];for(var" d="a.points[b];this.points.push((new" c).fromarray(d))}return="" this};var="" ng="Object.freeze({ArcCurve:fc,CatmullRomCurve3:X,CubicBezierCurve:La,CubicBezierCurve3:Ta,EllipseCurve:ia,LineCurve:wa,LineCurve3:Ma,QuadraticBezierCurve:Na,QuadraticBezierCurve3:Ua," splinecurve:oa});za.prototype="Object.assign(Object.create(E.prototype),{constructor:Za,add:function(a){this.curves.push(a)},closePath:function(){var" wa(b,a))},getpoint:function(a){var="">=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();
    return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getlength(),a.push(b);return 0="==a&&(a=40);for(var" this.cachelengths="a},getSpacedPoints:function(a){void" b="[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return" b},getpoints:function(a){a="a||12;for(var" f="e[d];f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a);for(var" g="0;g<f.length;g++){var" h="f[g];c&&c.equals(h)||(b.push(h),c=h)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return" b},copy:function(a){e.prototype.copy.call(this,a);this.curves="[];for(var" this},tojson:function(){var="" a="E.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var" a},fromjson:function(a){e.prototype.fromjson.call(this,a);this.autoclose="a.autoClose;this.curves=[];for(var" d="a.curves[b];this.curves.push((new" ng[d.type]).fromjson(d))}return="" this}});pa.prototype="Object.assign(Object.create(Za.prototype),{constructor:Pa,setFromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var" c="new" wa(this.currentpoint.clone(),new="" c(a,b));this.curves.push(c);this.currentpoint.set(a,b)},quadraticcurveto:function(a,b,c,d){a="new" na(this.currentpoint.clone(),new="" c(a,b),new="" c(c,d));this.curves.push(a);this.currentpoint.set(c,d)},beziercurveto:function(a,b,c,d,e,f){a="new" la(this.currentpoint.clone(),new="" c(c,d),new="" c(e,f));this.curves.push(a);this.currentpoint.set(e,="" f)},splinethru:function(a){var="" oa(b);this.curves.push(b);this.currentpoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a="new" ia(a,b,c,d,e,f,g,h);0<this.curves.length&&(b="a.getPoint(0)," b.equals(this.currentpoint)||this.lineto(b.x,b.y));this.curves.push(a);a="a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){Za.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return" a},fromjson:function(a){za.prototype.fromjson.call(this,a);this.currentpoint.fromarray(a.currentpoint);return="" this}});gb.prototype="Object.assign(Object.create(Pa.prototype),{constructor:gb," getpointsholes:function(a){for(var="" b},extractpoints:function(a){return{shape:this.getpoints(a),holes:this.getpointsholes(a)}},copy:function(a){pa.prototype.copy.call(this,a);this.holes="[];for(var" return="" a},fromjson:function(a){pa.prototype.fromjson.call(this,a);this.uuid="a.uuid;this.holes=[];for(var" pa).fromjson(d))}return="" this}});ca.prototype="Object.assign(Object.create(A.prototype),{constructor:ca,isLight:!0,copy:function(a){A.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return" this},tojson:function(a){a="A.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=" this.intensity;void="" 0!="=this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void" a}});yd.prototype="Object.assign(Object.create(ca.prototype),{constructor:yd,isHemisphereLight:!0,copy:function(a){ca.prototype.copy.call(this," a);this.groundcolor.copy(a.groundcolor);return="" this}});object.assign(eb.prototype,{copy:function(a){this.camera="a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return" this},clone:function(){return(new="" this.constructor).copy(this)},tojson:function(){var="" a.camera.matrix;="" a}});zd.prototype="Object.assign(Object.create(Eb.prototype),{constructor:zd,isSpotLightShadow:!0,update:function(a){var" a.penumbra;this.decay="a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return" this}});bd.prototype="Object.assign(Object.create(ca.prototype),{constructor:Bd,isPointLight:!0,copy:function(a){ca.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return" this}});cd.prototype="Object.assign(Object.create(Eb.prototype),{constructor:Cd});Dd.prototype=Object.assign(Object.create(ca.prototype),{constructor:Dd,isDirectionalLight:!0,copy:function(a){ca.prototype.copy.call(this," a);this.target="a.target.clone();this.shadow=a.shadow.clone();return" this}});ed.prototype="Object.assign(Object.create(ca.prototype),{constructor:Ed,isAmbientLight:!0});Fd.prototype=Object.assign(Object.create(ca.prototype),{constructor:Fd,isRectAreaLight:!0,copy:function(a){ca.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return" a}});gd.prototype="Object.assign(Object.create(da.prototype)," {constructor:gd,valuetypename:"string",valuebuffertype:array,defaultinterpolation:2300,interpolantfactorymethodlinear:void="" 0,interpolantfactorymethodsmooth:void="" 0});hd.prototype="Object.assign(Object.create(da.prototype),{constructor:Hd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void" 0});object.assign(na.prototype,{evaluate:function(a){var="" d)){for(var="" d;this._cachedindex="c=b.length;return" this.afterend_(c-1,a,e)}if(c="==f)break;e=d;d=b[++c];if(a<d)break" b}d="b.length;break" c}if(a="">=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a">=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(void" this.interpolate_(c,e,a,d)},settings:null,defaultsettings_:{},getsettings_:function(){return="" this.settings||this.defaultsettings_},copysamplevalue_:function(a){var="" b="this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var" e="0;e!==d;++e)b[e]=c[a+e];return" b},interpolate_:function(){throw="" error("call="" to="" abstract="" method");},intervalchanged_:function(){}});object.assign(na.prototype,{beforestart_:na.prototype.copysamplevalue_,="" afterend_:na.prototype.copysamplevalue_});id.prototype="Object.assign(Object.create(na.prototype),{constructor:Id,interpolate_:function(a,b,c,d){var" e}});ad.prototype="Object.assign(Object.create(da.prototype),{constructor:ad,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return" new="" id(this.times,this.values,this.getvaluesize(),="" a)},interpolantfactorymethodsmooth:void="" 0});jd.prototype="Object.assign(Object.create(da.prototype),{constructor:Jd,ValueTypeName:"color"});gc.prototype=Object.assign(Object.create(da.prototype),{constructor:gc,ValueTypeName:"number"});Kd.prototype=Object.assign(Object.create(na.prototype),{constructor:Kd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var" d="this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void" 2401:e="a;g=2*b-c;break;case" 2402:e="d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void" 2401:f="a;h=2*c-b;break;case" 2402:f="1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var" h="a-g,l=this._offsetPrev,m=this._offsetNext,k=this._weightPrev,n=this._weightNext," p="(c-b)/(d-b);c=p*p;d=c*p;b=-k*d+2*k*c-k*p;k=(1+k)*d+(-1.5-2*k)*c+(-.5+k)*p+1;p=(-1-n)*d+(1.5+n)*c+.5*p;n=n*d-n*c;for(c=0;c!==g;++c)e[c]=b*f[l+c]+k*f[h+c]+p*f[a+c]+n*f[m+c];return" e}});bd.prototype="Object.assign(Object.create(na.prototype),{constructor:bd,interpolate_:function(a,b,c,d){var" e}});ld.prototype="Object.assign(Object.create(na.prototype),{constructor:Ld," interpolate_:function(a){return="" this.copysamplevalue_(a-1)}});var="" fa="{arraySlice:function(a,b,c){return" fa.istypedarray(a)?new="" a.constructor(a.subarray(b,void="" 0!="=c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof" b.bytes_per_element?new="" b(a):array.prototype.slice.call(a)},istypedarray:function(a){return="" arraybuffer.isview(a)&&!(a="" instanceof="" dataview)},getkeyframeorder:function(a){for(var="" c){return="" a[b]-a[c]});return="" c},sortedarray:function(a,b,c){for(var="" a.constructor(d),f="0,g=0;g!==d;++f)for(var" e},flattenjson:function(a,b,c,d){for(var="" g="f[d];if(void" if(void="" while(void="" error("three.keyframetrack:="" track="" type="" undefined,="" can="" not="" parse");var="" c="[],d=[];fa.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return" void="" b(a.name,a.times,a.values,a.interpolation)},tojson:function(a){var="" b.tojson)b="b.toJSON(a);else{b={name:a.name,times:fa.convertArray(a.times,Array),values:fa.convertArray(a.values,Array)};var" b},_gettracktypeforvaluetypename:function(a){switch(a.tolowercase()){case="" "scalar":case="" "double":case="" "float":case="" "number":case="" "integer":return="" gc;case="" "vector":case="" "vector2":case="" "vector3":case="" "vector4":return="" hc;case="" "color":return="" jd;case="" "quaternion":return="" ad;case="" "bool":case="" "boolean":return="" hd;="" case="" "string":return="" gd}throw="" unsupported="" typename:="" "+a);}});object.assign(da.prototype,{constructor:da,timebuffertype:float32array,valuebuffertype:float32array,defaultinterpolation:2301,interpolantfactorymethoddiscrete:function(a){return="" ld(this.times,this.values,this.getvaluesize(),a)},interpolantfactorymethodlinear:function(a){return="" bd(this.times,this.values,this.getvaluesize(),a)},interpolantfactorymethodsmooth:function(a){return="" kd(this.times,this.values,="" this.getvaluesize(),a)},setinterpolation:function(a){switch(a){case="" 2300:var="" 2301:b="this.InterpolantFactoryMethodLinear;break;case" 2302:b="this.InterpolantFactoryMethodSmooth}if(void" interpolation="" for="" "+this.valuetypename+"="" keyframe="" named="" "+this.name;if(void="" throw="" error(b);console.warn("three.keyframetrack:",="" b)}else="" this.createinterpolant="b},getInterpolation:function(){switch(this.createInterpolant){case" this.interpolantfactorymethoddiscrete:return="" 2300;case="" this.interpolantfactorymethodlinear:return="" 2301;case="" this.interpolantfactorymethodsmooth:return="" 2302}},getvaluesize:function(){return="" this.values.length="" this.times.length},shift:function(a){if(0!="=a)for(var" this},scale:function(a){if(1!="=a)for(var" this},="" trim:function(a,b){for(var="">b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=fa.arraySlice(c,e,f),this.values=fa.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times;b=this.values;var d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",
    this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&fa.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,
    c=this.getValueSize(),d=2302===this.getInterpolation(),e=1,f=a.length-1,g=1;g<f;++g){var 0="==d.length?" h="!1,l=a[g];if(l!==a[g+1]&&(1!==g||l!==l[0]))if(d)h=!0;else{var" k="g*c,p=k-c,n=k+c;for(l=0;l!==c;++l){var" t="b[k+l];if(t!==b[p+l]||t!==b[n+l]){h=!0;break}}}if(h){if(g!==e)for(a[e]=a[g],h=g*c,k=e*c,l=0;l!==c;++l)b[k+l]=b[h+l];++e}}if(0<f){a[e]=a[f];h=f*c;k=e*c;for(l=0;l!==c;++l)b[k+l]=b[h+l];++e}e!==a.length&&(this.times=fa.arraySlice(a,0,e),this.values=fa.arraySlice(b,0,e*c));return" this}});hc.prototype="Object.assign(Object.create(da.prototype)," {constructor:hc,valuetypename:"vector"});object.assign(ba,{parse:function(a){for(var="" b="[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(da.parse(c[e]).scale(d));return" new="" ba(a.name,a.duration,b)},tojson:function(a){var="" d="0,e=c.length;d!==e;++d)b.push(da.toJSON(c[d]));return" a},createfrommorphtargetsequence:function(a,b,c,d){for(var="" e="b.length,f=[],g=0;g<e;g++){var" var="" gc(".morphtargetinfluences["+b[g].name+"]",h,l)).scale(1="" c))}return="" ba(a,-1,f)},findbyname:function(a,b){var="" c="a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return" c[a];return="" null},createclipsfrommorphtargetsequences:function(a,b,c){for(var="" l="h.name.match(e);if(l&&1<l.length){var" in="" d)a.push(ba.createfrommorphtargetsequence(k,d[k],b,c));return="" a},parseanimation:function(a,b){if(!a)return="" console.error("three.animationclip:="" no="" animation="" jsonloader="" data."),null;var="" f="[],g=[];fa.flattenJSON(c,f,g,d);0!==f.length&&e.push(new" a(b,f,g))}},d="[],e=a.name||"default",f=a.length||-1,g=a.fps||30;a=a.hierarchy||[];for(var" if(l&&0!="=l.length)if(l[0].morphTargets){f={};for(var" p="0;p<l[k].morphTargets.length;p++)f[l[k].morphTargets[p]]=-1;for(var" n="" f){var="" q="l[k];t.push(q.time);r.push(q.morphTarget===n?1:0)}d.push(new" gc(".morphtargetinfluence["+n+"]",t,r))}f="f.length*(g||1)}else" +b[h].name+"]",c(hc,k+".position",l,"pos",d),c(ad,k+".quaternion",l,"rot",d),c(hc,k+".scale",l,"scl",d)}return="" null:new="" ba(e,f,d)}});object.assign(ba.prototype,{resetduration:function(){for(var="" a="0,b=0,c=this.tracks.length;b!==c;++b){var" this},optimize:function(){for(var="" this}});object.assign(md.prototype,{load:function(a,b,c,d){var="" ka(e.manager)).load(a,function(a){b(e.parse(json.parse(a)))},="" c,d)},settextures:function(a){this.textures="a},parse:function(a){function" b(a){void="" undefined="" texture",a);return="" c[a]}var="" mg[a.type];void="" 0!="=a.uuid&&(d.uuid=a.uuid);void" void="" a.blending);void="" a.wireframelinecap);void="" (d.bumpmap="b(a.bumpMap));void" c).fromarray(e)}void="" d}});object.assign(ee.prototype,{load:function(a,b,c,d){var="" ka(e.manager)).load(a,function(a){b(e.parse(json.parse(a)))},c,d)},parse:function(a){var="" f,c="a.data.index;void" uf[c.type](c.array),b.setindex(new="" t(c,1)));var="" d){var="" uf[e.type](e.array);b.addattribute(f,new="" t(c,e.itemsize,e.normalized))}var="" p,void="" ea(f,a.radius));return="" b}});var="" uf="{Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof" uint8clampedarray?uint8clampedarray:uint8array,int16array:int16array,uint16array:uint16array,int32array:int32array,uint32array:uint32array,="" float32array:float32array,float64array:float64array};ic.handlers="{handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var" e}return="" null}};object.assign(ic.prototype,{crossorigin:void="" 0,onloadstart:function(){},onloadprogress:function(){},onloadcomplete:function(){},initmaterials:function(a,b,c){for(var="" d},creatematerial:function(){var="" i,c="new" xd,d="new" md;return="" function(e,f,g){function="" h(a,b,d,e,h){a="f+a;var" e[1]&&(a.wrapt="1002));void" b}var="" e){var="" "dbgcolor":case="" "dbgindex":case="" "opticaldensity":case="" "illumination":break;case="" "dbgname":k.name="n;break;case" "blending":k.blending="a[n];break;case" "colorambient":case="" "mapambient":console.warn("three.loader.creatematerial:",p,"is="" longer="" supported.");break;case="" "colordiffuse":k.color="b.fromArray(n).getHex();break;" case="" "colorspecular":k.specular="b.fromArray(n).getHex();break;case" "coloremissive":k.emissive="b.fromArray(n).getHex();break;case" "specularcoef":k.shininess="n;break;case" "shading":"basic"="==n.toLowerCase()&&(k.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&(k.type="MeshPhongMaterial");"standard"===n.toLowerCase()&&(k.type="MeshStandardMaterial");break;case" "mapdiffuse":k.map="h(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case" "mapdiffuserepeat":case="" "mapdiffuseoffset":case="" "mapdiffusewrap":case="" "mapdiffuseanisotropy":break;="" "mapemissive":k.emissivemap="h(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case" "mapemissiverepeat":case="" "mapemissiveoffset":case="" "mapemissivewrap":case="" "mapemissiveanisotropy":break;case="" "maplight":k.lightmap="h(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case" "maplightrepeat":case="" "maplightoffset":case="" "maplightwrap":case="" "maplightanisotropy":break;case="" "mapao":k.aomap="h(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap," e.mapaoanisotropy);break;case="" "mapaorepeat":case="" "mapaooffset":case="" "mapaowrap":case="" "mapaoanisotropy":break;case="" "mapbump":k.bumpmap="h(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case" "mapbumpscale":k.bumpscale="n;break;case" "mapbumprepeat":case="" "mapbumpoffset":case="" "mapbumpwrap":case="" "mapbumpanisotropy":break;case="" "mapnormal":k.normalmap="h(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case" "mapnormalfactor":k.normalscale="n;break;" "mapnormalrepeat":case="" "mapnormaloffset":case="" "mapnormalwrap":case="" "mapnormalanisotropy":break;case="" "mapspecular":k.specularmap="h(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case" "mapspecularrepeat":case="" "mapspecularoffset":case="" "mapspecularwrap":case="" "mapspecularanisotropy":break;case="" "mapmetalness":k.metalnessmap="h(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case" "mapmetalnessrepeat":case="" "mapmetalnessoffset":case="" "mapmetalnesswrap":case="" "mapmetalnessanisotropy":break;="" "maproughness":k.roughnessmap="h(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case" "maproughnessrepeat":case="" "maproughnessoffset":case="" "maproughnesswrap":case="" "maproughnessanisotropy":break;case="" "mapalpha":k.alphamap="h(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case" "mapalpharepeat":case="" "mapalphaoffset":case="" "mapalphawrap":case="" "mapalphaanisotropy":break;case="" "flipsided":k.side="1;break;case" "doublesided":k.side="2;break;case" "transparency":console.warn("three.loader.creatematerial:="" transparency="" has="" been="" renamed="" to="" opacity");k.opacity="n;break;case" "depthtest":case="" "depthwrite":case="" "colorwrite":case="" "opacity":case="" "reflectivity":case="" "transparent":case="" "visible":case="" "wireframe":k[p]="n;break;case" "vertexcolors":!0="==n&&(k.vertexColors=2);"face"===n&&(k.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial:" unsupported",p,n)}}"meshbasicmaterial"="==k.type&&delete" k.emissive;"meshphongmaterial"!="=" k.type&&delete="" k.specular;1="">k.opacity&&(k.transparent=!0);d.setTextures(l);return d.parse(k)}}()});var Be={decodeText:function(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",c=0,d=a.length;c<d;c++)b+=string.fromcharcode(a[c]);return 1="" decodeuricomponent(escape(b))},extracturlbase:function(a){a="a.split("/");if(1===a.length)return"./";a.pop();return" a.join("="" ")+"="" "}};object.assign(fe.prototype,{load:function(a,b,c,d){var="" e="this,f=this.texturePath&&"string"===typeof" this.texturepath?="" this.texturepath:be.extracturlbase(a),g="new" ka(this.manager);g.setwithcredentials(this.withcredentials);g.load(a,function(c){c="JSON.parse(c);var" d="c.metadata;if(void" 0!="=d&&(d=d.type,void" "+a+"="" should="" be="" loaded="" with="" three.objectloader="" instead.");return}c="e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(){return" function(a,b){void="" a.scale:1;var="" c="new" n,d="a,e,f,g,h=d.faces;var" l="d.vertices;var" k="d.normals,u=d.colors;var" n="d.scale;var" t="0;if(void" r="0;for(g=l.length;r<g;)e=new" p,e.x="l[r++]*n,e.y=l[r++]*n,e.z=l[r++]*n,c.vertices.push(e);r=0;for(g=h.length;r<g;){l=h[r++];var" q="l&1;var" v="l&2;e=l&8;var" x="l&16;var" y="l&32;n=l&64;l&=128;if(q){q=new" wa;q.a="h[r];q.b=h[r+1];q.c=h[r+3];var" w="new" wa;w.a="h[r+1];w.b=h[r+2];w.c=h[r+3];r+=4;" v&&(v="h[r++],q.materialIndex=v,w.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<t;e++){var" b="d.uvs[e];c.faceVertexUvs[e][v]=[];c.faceVertexUvs[e][v+1]=[];for(f=0;4">f;f++){var z=h[r++];var A=B[2*z];z=B[2*z+1];A=new C(A,z);2!==f&&c.faceVertexUvs[e][v].push(A);0!==f&&c.faceVertexUvs[e][v+1].push(A)}}x&&(x=3*h[r++],q.normal.set(k[x++],k[x++],k[x]),w.normal.copy(q.normal));if(y)for(e=0;4>e;e++)x=3*h[r++],y=new p(k[x++],k[x++],k[x]),2!==e&&q.vertexNormals.push(y),0!==e&&w.vertexNormals.push(y);n&&(n=
    h[r++],n=u[n],q.color.setHex(n),w.color.setHex(n));if(l)for(e=0;4>e;e++)n=h[r++],n=u[n],2!==e&&q.vertexColors.push(new I(n)),0!==e&&w.vertexColors.push(new I(n));c.faces.push(q);c.faces.push(w)}else{q=new Wa;q.a=h[r++];q.b=h[r++];q.c=h[r++];v&&(v=h[r++],q.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<t;e++)for(b=d.uvs[e],c.facevertexuvs[e][v]=[],f=0;3>f;f++)z=h[r++],A=B[2*z],z=B[2*z+1],A=new C(A,z),c.faceVertexUvs[e][v].push(A);x&&(x=3*h[r++],q.normal.set(k[x++],k[x++],k[x]));if(y)for(e=0;3>e;e++)x=
    3*h[r++],y=new p(k[x++],k[x++],k[x]),q.vertexNormals.push(y);n&&(n=h[r++],q.color.setHex(u[n]));if(l)for(e=0;3>e;e++)n=h[r++],q.vertexColors.push(new I(u[n]));c.faces.push(q)}}d=a;r=void 0!==d.influencesPerVertex?d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=r)c.skinweights.push(new 0="==a.materials||0===a.materials.length)return{geometry:c};a=ic.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(ff.prototype,{load:function(a," ea(d.skinweights[g],1<r?d.skinweights[g+1]:0,2<r?d.skinweights[g+2]:0,3<r?d.skinweights[g+3]:0));if(d.skinindices)for(g="0,h=d.skinIndices.length;g<h;g+=r)c.skinIndices.push(new" ea(d.skinindices[g],="" 1<r?d.skinindices[g+1]:0,2<r?d.skinindices[g+2]:0,3<r?d.skinindices[g+3]:0));c.bones="d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When" skinning,="" number="" of="" vertices="" ("+c.vertices.length+"),="" skinindices="" ("+c.skinindices.length+"),="" and="" skinweights="" ("+c.skinweights.length+")="" should="" match.");g="a;h=g.scale;if(void" 0!="=g.morphTargets)for(d=0,r=g.morphTargets.length;d<r;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=" g.morphtargets[d].name,c.morphtargets[d].vertices="[],k=c.morphTargets[d].vertices,u=g.morphTargets[d].vertices,t=0,l=u.length;t<l;t+=3)n=new" p,n.x="u[t]*h,n.y=u[t+1]*h,n.z=u[t+2]*h,k.push(n);if(void" "morphcolors"="" no="" longer="" supported.="" using="" them="" as="" face="" colors.'),h="c.faces,g=g.morphColors[0].colors,d=0,r=h.length;d<r;d++)h[d].color.fromArray(g,3*d);g=a;d=[];r=[];void" (g.animations.length?r="r.concat(g.animations):r.push(g.animations));for(g=0;g<r.length;g++)(h=Ba.parseAnimation(r[g],c.bones))&&d.push(h);c.morphTargets&&(r=Ba.CreateClipsFromMorphTargetSequences(c.morphTargets,10),d=d.concat(r));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void" b,c,d){""="==this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var" e="this;(new" ka(e.manager)).load(a,function(c){var="" f="null;try{f=JSON.parse(c)}catch(h){void" can't="" parse="" "+a+".",h.message);return}c="f.metadata;void" load="" "+a+".="" use="" three.jsonloader="" instead."):e.parse(f,b)},c,d)},settexturepath:function(a){this.texturepath="a},setCrossOrigin:function(a){this.crossOrigin=" a},parse:function(a,b){var="" c="this.parseShape(a.shapes);c=this.parseGeometries(a.geometries,c);var" d="this.parseImages(a.images,function(){void" e},parseshape:function(a){var="" b="{};if(void" gb).fromjson(a[c]);="" b[e.uuid]="e}return" b},parsegeometries:function(a,b){var="" fe,e="new" ee,f="0,g=a.length;f<g;f++){var" h="a[f];switch(h.type){case" "planegeometry":case="" "planebuffergeometry":var="" l="new" ca[h.type](h.width,h.height,h.widthsegments,h.heightsegments);break;case="" "boxgeometry":case="" "boxbuffergeometry":case="" "cubegeometry":l="new" ca[h.type](h.width,h.height,h.depth,h.widthsegments,h.heightsegments,h.depthsegments);break;case="" "circlegeometry":case="" "circlebuffergeometry":l="new" ca[h.type](h.radius,="" h.segments,h.thetastart,h.thetalength);break;case="" "cylindergeometry":case="" "cylinderbuffergeometry":l="new" ca[h.type](h.radiustop,h.radiusbottom,h.height,h.radialsegments,h.heightsegments,h.openended,h.thetastart,h.thetalength);break;case="" "conegeometry":case="" "conebuffergeometry":l="new" ca[h.type](h.radius,h.height,h.radialsegments,h.heightsegments,h.openended,h.thetastart,h.thetalength);break;case="" "spheregeometry":case="" "spherebuffergeometry":l="new" ca[h.type](h.radius,h.widthsegments,h.heightsegments,="" h.phistart,h.philength,h.thetastart,h.thetalength);break;case="" "dodecahedrongeometry":case="" "dodecahedronbuffergeometry":case="" "icosahedrongeometry":case="" "icosahedronbuffergeometry":case="" "octahedrongeometry":case="" "octahedronbuffergeometry":case="" "tetrahedrongeometry":case="" "tetrahedronbuffergeometry":l="new" ca[h.type](h.radius,h.detail);break;case="" "ringgeometry":case="" "ringbuffergeometry":l="new" ca[h.type](h.innerradius,h.outerradius,h.thetasegments,h.phisegments,h.thetastart,h.thetalength);break;case="" "torusgeometry":case="" "torusbuffergeometry":l="new" ca[h.type](h.radius,h.tube,h.radialsegments,h.tubularsegments,h.arc);break;case="" "torusknotgeometry":case="" "torusknotbuffergeometry":l="new" ca[h.type](h.radius,h.tube,h.tubularsegments,h.radialsegments,h.p,h.q);break;case="" "lathegeometry":case="" "lathebuffergeometry":l="new" ca[h.type](h.points,h.segments,h.phistart,h.philength);break;case="" "polyhedrongeometry":case="" "polyhedronbuffergeometry":l="new" ca[h.type](h.vertices,h.indices,h.radius,h.details);break;case="" "shapegeometry":case="" "shapebuffergeometry":l="[];f=0;for(g=h.shapes.length;f<g;f++)l.push(b[h.shapes[f]]);l=new" ca[h.type](l,h.curvesegments);break;case="" "buffergeometry":l="e.parse(h);break;case" "geometry":l="d.parse(h,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader:" unsupported="" geometry="" type="" "'+h.type+'"');continue}l.uuid="h.uuid;void" c},parsematerials:function(a,b){var="" md;d.settextures(b);b="0;for(var" f.type){for(var="" g="[],h=0;h<f.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else" c[f.uuid]="d.parse(f)}}return" c},parseanimations:function(a){for(var="" b},parseimages:function(a,b){function="" c(a){d.manager.itemstart(a);return="" f.load(a,function(){d.manager.itemend(a)},void="" 0,function(){d.manager.itemend(a);d.manager.itemerror(a)})}var="" ae(b);var="" yc(b);f.setcrossorigin(this.crossorigin);="" e},parsetextures:function(a,b){function="" c(a,b){if("number"="==typeof" a)return="" a;console.warn("three.objectloader.parsetexture:="" constant="" be="" in="" numeric="" form.",a);return="" b[a]}var="" "image"="" specified="" for',g.uuid);void="" undefined="" image",="" g.image);var="" y(b[g.image]);h.needsupdate="!0;h.uuid=g.uuid;void" g.magfilter&&(h.magfilter="c(g.magFilter,wf));void" d},parseobject:function(a,b,c){function="" d(a){void="" geometry",a);return="" b[a]}function="" e(a){if(void="" material",f);b.push(c[f])}return="" b}void="" material",="" a);return="" c[a]}}switch(a.type){case="" "scene":var="" rd;void="" i(a.background));void="" pb(a.fog.color,a.fog.near,a.fog.far):"fogexp2"="==a.fog.type&&(f.fog=new" ob(a.fog.color,a.fog.density)));break;case="" "perspectivecamera":f="new" la(a.fov,a.aspect,a.near,a.far);void="" (f.filmoffset="a.filmOffset);void" "orthographiccamera":f="new" jb(a.left,a.right,a.top,a.bottom,a.near,a.far);void="" "ambientlight":f="new" ed(a.color,a.intensity);break;case="" "directionallight":f="new" dd(a.color,a.intensity);break;case="" "pointlight":f="new" bd(a.color,a.intensity,a.distance,a.decay);break;case="" "rectarealight":f="new" fd(a.color,a.intensity,a.width,="" a.height);break;case="" "spotlight":f="new" ad(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case="" "hemispherelight":f="new" yd(a.color,a.groundcolor,a.intensity);break;case="" "skinnedmesh":console.warn("three.objectloader.parseobject()="" does="" not="" support="" skinnedmesh="" yet.");case="" "mesh":f="d(a.geometry);var" td(f,g):new="" oa(f,g);break;case="" "lod":f="new" bc;break;case="" "line":f="new" ua(d(a.geometry),e(a.material),a.mode);break;case="" "lineloop":f="new" ud(d(a.geometry),="" e(a.material));break;case="" "linesegments":f="new" aa(d(a.geometry),e(a.material));break;case="" "pointcloud":case="" "points":f="new" qb(d(a.geometry),e(a.material));break;case="" "sprite":f="new" ac(e(a.material));break;case="" "group":f="new" vd;break;default:f="new" a}f.uuid="a.uuid;void" void="" a.visible&&(f.visible="a.visible);void" f}});var="" og="{UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302," equirectangularreflectionmapping:303,equirectangularrefractionmapping:304,sphericalreflectionmapping:305,cubeuvreflectionmapping:306,cubeuvrefractionmapping:307},vf="{RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},wf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ge.prototype={constructor:ge,setOptions:function(a){this.options=a;return" this},load:function(a,="" b,c,d){void="" e.manager.itemstart(a),settimeout(function(){b&&b(f);e.manager.itemend(a)},0),f;fetch(a).then(function(a){return="" a.blob()}).then(function(a){return="" createimagebitmap(a,e.options)}).then(function(c){hb.add(a,c);b&&b(c);e.manager.itemend(a)}).catch(function(b){d&&d(b);e.manager.itemend(a);e.manager.itemerror(a)})},setcrossorigin:function(){return="" this},setpath:function(a){this.path="a;return" this}};="" object.assign(he.prototype,{moveto:function(a,b){this.currentpath="new" pa;this.subpaths.push(this.currentpath);this.currentpath.moveto(a,b)},lineto:function(a,b){this.currentpath.lineto(a,b)},quadraticcurveto:function(a,b,c,d){this.currentpath.quadraticcurveto(a,b,c,d)},beziercurveto:function(a,b,c,d,e,f){this.currentpath.beziercurveto(a,b,c,d,e,f)},splinethru:function(a){this.currentpath.splinethru(a)},toshapes:function(a,b){function="" c(a){for(var="" gb;f.curves="e.curves;b.push(f)}return" b}function="" d(a,b){for(var="">Number.EPSILON){if(0>k&&(g=b[f],l=-l,h=b[e],k=-k),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=k*(a.x-g.x)-l*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return 0="==b&&(b=100);c=[];var" d}var="" e="Xa.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return" c(f);b="[];if(1===f.length){var" g="f[0];" var="" h="new" gb;h.curves="g.curves;b.push(h);return" b}var="" l="!e(f[0].getPoints());l=a?!l:l;h=[];var" k="[],p=[],n=0;k[n]=void" 0;p[n]="[];for(var" t="0,r=f.length;t<r;t++){g=f[t];var" q="g.getPoints();var" v="e(q);(v=a?!v:v)?(!l&&k[n]&&n++,k[n]={s:new" gb,p:q},k[n].s.curves="g.curves,l&&n++,p[n]=[]):p[n].push({h:g,p:q[0]})}if(!k[0])return" c(f);if(1<k.length){t="!1;a=[];e=0;for(f=k.length;e<f;e++)h[e]=[];e=0;for(f=k.length;e<f;e++)for(g=p[e],v=0;v<g.length;v++){l=g[v];n=!0;for(q=0;q<k.length;q++)d(l.p,k[q].p)&&(e!==" q&&a.push({froms:e,tos:q,hole:v}),n?(n="!1,h[q].push(l)):t=!0);n&&h[e].push(l)}0<a.length&&(t||(p=h))}t=0;for(e=k.length;t<e;t++)for(h=k[t].s,b.push(h),a=p[t],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return" b}});object.assign(ie.prototype,{isfont:!0,generateshapes:function(a,b,c){void="" d="b;b=this.data;var" f="(b.boundingBox.yMax-b.boundingBox.yMin+b.underlineThickness)*d;a=[];for(var" k)g="0,h-=f;else{var" p="d;var" n="g,t=h;if(k=b.glyphs[k]||b.glyphs["?"]){var" r="new" he;if(k.o)for(var="" ")),v="0,x=q.length;v<x;)switch(q[v++]){case" "m":var="" y="q[v++]*p+n;var" w="q[v++]*p+t;r.moveTo(y,w);break;case" "l":y="q[v++]*p+n;w=q[v++]*p+t;r.lineTo(y,w);break;case" "q":var="" z="q[v++]*p+n;var" a="q[v++]*p+t;var" c="q[v++]*p+n;var" "b":z="q[v++]*p+n,A=q[v++]*p+t,C=q[v++]*p+n,E=q[v++]*p+t,y=q[v++]*p+n,w=q[v++]*p+t," r.beziercurveto(c,e,y,w,z,a)}p="{offsetX:k.ha*p,path:r}}else" 0;g+="p.offsetX;a.push(p.path)}}b=0;for(e=a.length;b<e;b++)Array.prototype.push.apply(c,a[b].toShapes());return" c}});object.assign(gf.prototype,{load:function(a,b,c,d){var="" ka(this.manager);f.setpath(this.path);f.load(a,function(a){try{var="" typeface.js="" support="" is="" being="" deprecated.="" use="" typeface.json="" instead."),c="JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&" b(a)},c,d)},parse:function(a){return="" new="" ie(a)},setpath:function(a){this.path="a;return" this}});var="" rd,le="{getContext:function(){void" (window.audiocontext||window.webkitaudiocontext));return="" rd},setcontext:function(a){rd="a}};Object.assign(je.prototype,{load:function(a,b,c,d){var" ka(this.manager);e.setresponsetype("arraybuffer");e.load(a,function(a){le.getcontext().decodeaudiodata(a,function(a){b(a)})},c,d)}});object.assign(hf.prototype,{update:function(){var="" a,b,c,d,e,f,g,h,l="new" m,k="new" m;return="" function(m){if(a!="=this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=m.focus;c=m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var" u="r*d+p;n.elements[0]=2*e/(u-q);n.elements[8]=(u+q)/(u-q);this.cameraL.projectionMatrix.copy(n);q=-r*d-p;u=r*d-p;n.elements[0]=2*e/(u-q);" n.elements[8]="(u+q)/(u-q);this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(k);this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(l)}}()});cd.prototype=Object.create(A.prototype);cd.prototype.constructor=cd;ke.prototype=Object.assign(Object.create(A.prototype),{constructor:ke,getInput:function(){return" this.gain},removefilter:function(){null!="=this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination)," this.filter="null)},getFilter:function(){return" this.filter},setfilter:function(a){null!="=this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return" this.gain.gain.value},setmastervolume:function(a){this.gain.gain.value="a},updateMatrixWorld:function(){var" p,b="new" ja,c="new" p,d="new" p;return="" function(e){a.prototype.updatematrixworld.call(this,="" e);e="this.context.listener;var" e.upy.setvalueattime(f.y,this.context.currenttime),e.upz.setvalueattime(f.z,this.context.currenttime)):(e.setposition(a.x,a.y,a.z),e.setorientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});jc.prototype="Object.assign(Object.create(A.prototype),{constructor:jc,getOutput:function(){return" this.gain},setnodesource:function(a){this.hasplaybackcontrol="!1;this.sourceType="audioNode";this.source=a;this.connect();return" this},setbuffer:function(a){this.buffer="a;this.sourceType="buffer";this.autoplay&&this.play();return" this},="" play:function(){if(!0="==this.isPlaying)console.warn("THREE.Audio:" audio="" already="" playing.");else="" if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this="" has="" no="" playback="" control.");else{var="" this.connect()}},="" pause:function(){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" control.");else="" return!0="==this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio:" return="" this.source.stop(),this.offset="0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);" for(var="" this.source.connect(this.getoutput());return="" this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var="" this.source.disconnect(this.getoutput());return="" getfilters:function(){return="" this.filters},setfilters:function(a){a||(a="[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return" this},getfilter:function(){return="" this.getfilters()[0]},setfilter:function(a){return="" this.setfilters(a?[a]:[])},setplaybackrate:function(a){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this.playbackrate="a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate," this.context.currenttime),this},getplaybackrate:function(){return="" this.playbackrate},onended:function(){this.isplaying="!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio:" control."),!1):this.loop},setloop:function(a){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this.loop="a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return" this.gain.gain.value},="" setvolume:function(a){this.gain.gain.value="a;return" this}});me.prototype="Object.assign(Object.create(jc.prototype),{constructor:me,getOutput:function(){return" this.panner},getrefdistance:function(){return="" this.panner.refdistance},setrefdistance:function(a){this.panner.refdistance="a},getRolloffFactor:function(){return" this.panner.rollofffactor},setrollofffactor:function(a){this.panner.rollofffactor="a},getDistanceModel:function(){return" this.panner.distancemodel},setdistancemodel:function(a){this.panner.distancemodel="a},getMaxDistance:function(){return" this.panner.maxdistance},setmaxdistance:function(a){this.panner.maxdistance="a},updateMatrixWorld:function(){var" function(b){a.prototype.updatematrixworld.call(this,b);a.setfrommatrixposition(this.matrixworld);this.panner.setposition(a.x,a.y,a.z)}}()});object.assign(ne.prototype,{getfrequencydata:function(){this.analyser.getbytefrequencydata(this.data);return="" this.data},getaveragefrequency:function(){for(var="" b[c];return="" b.length}});object.assign(oe.prototype,{accumulate:function(a,b){var="" e+="b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var" b="this.valueSize,c=this.buffer;a=a*b+b;var">d&&this._mixBufferRegion(c,a,3*b,1-d,b);d=b;for(var f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},
    saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ja.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var 0="==a[c]){console.error("THREE.PropertyBinding:" f="1-d,g=0;g!==e;++g){var" h="b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(jf.prototype,{getValue:function(a," b){this.bind();var="" c="this._bindings[this._targetGroup.nCachedObjects_];void" 0!="=c&&c.getValue(a,b)},setValue:function(a,b){for(var" a="this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var" b,c){return="" a&&a.isanimationobjectgroup?new="" qa.composite(a,b,c):new="" qa(a,b,c)},sanitizenodename:function(){var="" function(b){return="" b.replace(="" \s="" g,"_").replace(a,"")}}(),parsetrackname:function(){var="" +"\\[\\]\\.:\\="" ".replace("\\.","")+"]",b="/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");a=/(WCOD+)?/.source.replace("WCOD",a);var" e="new" regexp("^"+b+a+c+d+"$"),f="["material","materials","bones"];return" function(a){var="" b="e.exec(a);if(!b)throw" error("propertybinding:="" cannot="" parse="" trackname:="" "+a);b="{nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};var" d="b.nodeName.substring(c+1);-1!==f.indexOf(d)&&(b.nodeName=b.nodeName.substring(0,c),b.objectName=d)}if(null===b.propertyName||0===b.propertyName.length)throw" can="" not="" propertyname="" from="" "+="" a);return="" b}}(),findnode:function(a,b){if(!b||""="==b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return" a;if(a.skeleton){var="" c}if(a.children){var="" e}return="" null};if(a="d(a.children))return" a}return="" null}});object.assign(qa.prototype,{_getvalue_unavailable:function(){},_setvalue_unavailable:function(){},bindingtype:{direct:0,entirearray:1,="" arrayelement:2,hasfromtoarray:3},versioning:{none:0,needsupdate:1,matrixworldneedsupdate:2},getterbybindingtype:[function(a,b){a[b]="this.node[this.propertyName]},function(a,b){for(var" a[b];this.targetobject.needsupdate="!0},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var" a[b]},function(a,b){this.resolvedproperty[this.propertyindex]="a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a," b){this.bind();this.setvalue(a,b)},bind:function(){var="" "materials":if(!a.material){console.error("three.propertybinding:="" bind="" to="" material="" as="" node="" does="" have="" material.",this);return}if(!a.material.materials){console.error("three.propertybinding:="" material.materials="" node.material="" materials="" array.",="" this);return}a="a.material.materials;break;case" "bones":if(!a.skeleton){console.error("three.propertybinding:="" bones="" skeleton.",this);return}a="a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void" objectname="" of="" undefined.",this);return}a="a[c]}if(void" trying="" objectindex="" objectname,="" but="" is="" undefined.",="" this,a);return}a="a[f]}}f=a[d];if(void" update="" property="" for="" track:="" "+b.nodename+"."+d+"="" it="" wasn't="" found.",a);else{b="this.Versioning.None;void" morphtargetinfluences="" because="" geometry.",="" this);return}if(a.geometry.isbuffergeometry){if(!a.geometry.morphattributes){console.error("three.propertybinding:="" geometry.morphattributes.",this);return}for(c="0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error("THREE.PropertyBinding:" geometry.morphtargets.",="" this);return}for(c="0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else" void="" console.error("three.propertybinding:="" this.path+"="" found.")},unbind:function(){this.node="null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(qa.prototype,{_getValue_unbound:qa.prototype.getValue,_setValue_unbound:qa.prototype.setValue});Object.assign(kf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var" 0,m="0,p=arguments.length;m!==" p;++m){var="" n="arguments[m],t=n.uuid,r=d[t];if(void" q="h;t!==q;++t)g[t].push(new" qa(n,e[t],f[t]))}else="" if(r<c){k="a[r];var" v="--c;q=a[v];d[q.uuid]=r;a[r]=q;d[t]=v;a[v]=n;t=0;for(q=h;t!==q;++t){var" x="g[t],y=x[r];x[r]=x[v];void" qa(n,e[t],f[t]));x[v]="y}}else" a[r]!="=k&&console.error("THREE.AnimationObjectGroup:" different="" objects="" with="" the="" same="" uuid="" detected.="" clean="" caches="" or="" recreate="" your="" infrastructure="" when="" reloading="" scenes.")}this.ncachedobjects_="c},remove:function(){for(var">=b){var p=b++,n=a[p];c[n.uuid]=m;a[m]=n;c[k]=p;a[p]=h;h=0;for(k=e;h!==k;++h){n=d[h];var t=n[m];n[m]=n[p];n[p]=t}}}this.nCachedObjects_=b},uncache:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=
    arguments[g].uuid,m=d[k];if(void 0!==m)if(delete d[k],m<c){k=--c;var p="a[k],n=--b,t=a[n];d[p.uuid]=m;a[m]=p;d[t.uuid]=k;a[k]=t;a.pop();p=0;for(t=f;p!==t;++p){var" r="e[p],q=r[n];r[m]=r[k];r[k]=q;r.pop()}}else" for(n="--b,t=a[n],d[t.uuid]=m,a[m]=t,a.pop(),p=0,t=f;p!==t;++p)r=e[p],r[m]=r[n],r.pop()}this.nCachedObjects_=c},subscribe_:function(a,b){var" c="this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void" 0!="=d)return" e[d];var="" f="this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_," m="Array(h.length);d=e.length;c[a]=d;f.push(a);g.push(b);e.push(m);c=k;for(d=h.length;c!==d;++c)m[c]=new" qa(h[c],a,b);return="" m},unsubscribe_:function(a){var="" b="this._bindingsIndicesByPath,c=b[a];if(void" d="this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(lf.prototype,{play:function(){this._mixer._activateAction(this);return" this},stop:function(){this._mixer._deactivateaction(this);return="" this.reset()},="" reset:function(){this.paused="!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return" this.stopfading().stopwarping()},isrunning:function(){return="" this.enabled&&!this.paused&&0!="=this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return" this._mixer._isactiveaction(this)},startat:function(a){this._starttime="a;return" this},setloop:function(a,b){this.loop="a;this.repetitions=b;return" this},seteffectiveweight:function(a){this.weight="a;" this._effectiveweight="this.enabled?a:0;return" this.stopfading()},geteffectiveweight:function(){return="" this._effectiveweight},fadein:function(a){return="" this._schedulefading(a,0,1)},fadeout:function(a){return="" this._schedulefading(a,1,0)},crossfadefrom:function(a,b,c){a.fadeout(b);this.fadein(b);if(c){c="this._clip.duration;var" this},crossfadeto:function(a,b,c){return="" a.crossfadefrom(this,b,c)},stopfading:function(){var="" a="this._weightInterpolant;" null!="=a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return" this},seteffectivetimescale:function(a){this.timescale="a;this._effectiveTimeScale=this.paused?0:a;return" this.stopwarping()},geteffectivetimescale:function(){return="" this._effectivetimescale},setduration:function(a){this.timescale="this._clip.duration/a;return" this.stopwarping()},syncwith:function(a){this.time="a.time;this.timeScale=a.timeScale;return" this.stopwarping()},halt:function(a){return="" this.warp(this._effectivetimescale,="" 0,a)},warp:function(a,b,c){var="" this},stopwarping:function(){var="" this},getmixer:function(){return="" this._mixer},getclip:function(){return="" this._clip},getroot:function(){return="" this._localroot||="" this._mixer._root},_update:function(a,b,c,d){if(this.enabled){var="" e="this._startTime;if(null!==e){b=(a-e)*c;if(0">b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;e=this._propertybindings;for(var f="0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else" this._updateweight(a)},_updateweight:function(a){var="" b="0;if(this.enabled){b=this.weight;var" c="this._weightInterpolant;if(null!==c){var" d="c.evaluate(a)[0];" b*="d;a">c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===
    d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setendings(!0,0===this.repetitions,d)):this._setendings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c);b-=c*f;e+=Math.abs(f);var g=this.repetitions-e;0>=g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=
    0<a?c:0,this._mixer.dispatchevent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,
    b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});pe.prototype=Object.assign(Object.create(xa.prototype),{constructor:pe,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var m=
    d[h],p=m.name,n=k[p];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,p));continue}n=new oe(qa.create(c,p,b&&b._propertyBindings[h].binding.parsedPath),m.ValueTypeName,m.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,p)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,
    d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip=
    {};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;
    return null!==a&&a<this._nactiveactions},_addinactiveaction:function(a,b,c){var 0="==f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var" d="this._actions,e=this._actionsByClip,f=e[b];void" b="this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;d=c[b];var" e="d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete" d.actionbyroot[(a._localroot||this._root).uuid];0="==e.length&&delete" c[b];this._removeinactivebindingsforaction(a)},_removeinactivebindingsforaction:function(a){a="a._propertyBindings;for(var" d;b[d]="a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var" g._cacheindex="a;b[a]=g;b.pop();delete" f[c];a:{for(var="" h="" in="" f)break="" a;delete="" e[d]}},_lendbinding:function(a){var="" a="this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void" bd(new="" float32array(2),="" new="" float32array(2),1,this._controlinterpolantsresultbuffer),c.__cacheindex="b,a[b]=c);return" c},_takebackcontrolinterpolant:function(a){var="" float32array(1),clipaction:function(a,b){var="" c="b||this._root,d=c.uuid;c="string"===typeof" a?ba.findbyname(c,a):a;a="null!==c?c.uuid:a;var" 0!="=e){f=" e.actionbyroot[d];if(void="" f;f="e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return" null;b="new" lf(this,c,b);this._bindaction(b,f);this._addinactiveaction(b,a,d);return="" b},existingaction:function(a,b){var="" void="" this._nactiveactions="0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return" this},update:function(a){a*="this.timeScale;for(var" this},getroot:function(){return="" this._root},uncacheclip:function(a){var="" for(var="" g="d[e];this._deactivateAction(g);var" c[a]}},uncacheroot:function(a){a="a.uuid;var" b){var="" d)a="d[e],a.restoreOriginalState()," this._removeinactivebinding(a)},uncacheaction:function(a,b){a="this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Nd.prototype.clone=function(){return" nd(void="" this},clone:function(){return(new="" this.constructor).copy(this)}});="" object.defineproperties(re.prototype,{count:{get:function(){return="" this.data.count}},array:{get:function(){return="" this.data.array}}});object.assign(re.prototype,{isinterleavedbufferattribute:!0,setx:function(a,b){this.data.array[a*this.data.stride+this.offset]="b;return" this},sety:function(a,b){this.data.array[a*this.data.stride+this.offset+1]="b;return" this},setz:function(a,b){this.data.array[a*this.data.stride+this.offset+2]="b;return" this},setw:function(a,b){this.data.array[a*this.data.stride+this.offset+="" 3]="b;return" this},getx:function(a){return="" this.data.array[a*this.data.stride+this.offset]},gety:function(a){return="" this.data.array[a*this.data.stride+this.offset+1]},getz:function(a){return="" this.data.array[a*this.data.stride+this.offset+2]},getw:function(a){return="" this.data.array[a*this.data.stride+this.offset+3]},setxy:function(a,b,c){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return" this},setxyz:function(a,b,c,d){a="a*this.data.stride+this.offset;this.data.array[a+" 0]="b;this.data.array[a+1]=c;this.data.array[a+2]=d;return" this},setxyzw:function(a,b,c,d,e){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return" this}});object.defineproperty(kc.prototype,"needsupdate",{set:function(a){!0="==a&&this.version++}});Object.assign(kc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw" typeerror("three.bufferattribute:="" array="" should="" be="" typed="" array.");="" this.count="void" this},copy:function(a){this.array="new" a.array.constructor(a.array);this.count="a.count;this.stride=a.stride;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.stride;c*=b.stride;for(var" this},set:function(a,b){void="" this.constructor).copy(this)},onupload:function(a){this.onuploadcallback="a;return" this}});se.prototype="Object.assign(Object.create(kc.prototype),{constructor:se,isInstancedInterleavedBuffer:!0,copy:function(a){kc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this}});te.prototype="Object.assign(Object.create(T.prototype),{constructor:te,isInstancedBufferAttribute:!0,copy:function(a){T.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this}});object.assign(mf.prototype,{lineprecision:1,set:function(a,b){this.ray.set(a,="" b)},setfromcamera:function(a,b){b&&b.isperspectivecamera?(this.ray.origin.setfrommatrixposition(b.matrixworld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isorthographiccamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)="" (b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformdirection(b.matrixworld)):console.error("three.raycaster:="" unsupported="" camera="" type.")},intersectobject:function(a,b,c){c="c||[];ue(a,this,c,b);c.sort(nf);return" c},intersectobjects:function(a,="" b,c){c="c||[];if(!1===Array.isArray(a))return" console.warn("three.raycaster.intersectobjects:="" objects="" is="" not="" an="" array."),c;for(var="" c}});object.assign(of.prototype,{start:function(){this.oldtime="this.startTime=("undefined"===typeof" performance?date:performance).now();this.elapsedtime="0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return" this.elapsedtime},getdelta:function(){var="" this.start(),0;if(this.running){var="" performance?date:performance).now();a="(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return" a}});object.assign(pf.prototype,{set:function(a,b,c){this.radius="a;this.phi=b;this.theta=c;return" this.constructor).copy(this)},copy:function(a){this.radius="a.radius;this.phi=a.phi;this.theta=a.theta;return" this},makesafe:function(){this.phi="Math.max(1E-6,Math.min(Math.PI-" 1e-6,this.phi));return="" this},setfromvector3:function(a){this.radius="a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(S.clamp(a.y/this.radius,-1,1)));return" this}});object.assign(qf.prototype,{set:function(a,b,c){this.radius="a;this.theta=b;this.y=c;return" a.x+a.z*a.z);this.theta="Math.atan2(a.x,a.z);this.y=a.y;return" this}});object.assign(ve.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return="" this},setfrompoints:function(a){this.makeempty();for(var="" this},setfromcenterandsize:function(){var="" c;return="" function(b,c){c="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return" this}}(),clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);="" this.max.copy(a.max);return="" this},makeempty:function(){this.min.x="this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return" this},isempty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y},getcenter:function(a){void="" .getcenter()="" target="" now="" required"),a="new" c);return="" this.isempty()?a.set(0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){void="" .getsize()="" this.isempty()?="" a.set(0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return="" this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return="" this},containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a, 0="==b&&(console.warn("THREE.Box2:" b){void="" .getparameter()="" target="" is="" now="" required"),b="new" c);return="" b.set((a.x-this.min.x)="" (this.max.x-this.min.x),(a.y-this.min.y)="" (this.max.y-this.min.y))},intersectsbox:function(a){return="" a.max.x<this.min.x||a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box2: .clampPoint() target is now required"),b=new C);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new C;
    return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});dd.prototype=Object.create(A.prototype);dd.prototype.constructor=dd;dd.prototype.isImmediateRenderObject=!0;ed.prototype=Object.create(aa.prototype);
    ed.prototype.constructor=ed;ed.prototype.update=function(){var a=new p,b=new p,c=new sa;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,k=g.faces,m=g=0,p=k.length;m<p;m++)for(var n="k[m],t=0,r=n.vertexNormals.length;t<r;t++){var" q="n.vertexNormals[t];a.copy(h[n[d[t]]]).applyMatrix4(e);b.copy(q).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);" f.setxyz(g,a.x,a.y,a.z);g+="1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else" if(g&&g.isbuffergeometry)for(d="g.attributes.position,h=g.attributes.normal,t=g=0,r=d.count;t<r;t++)a.set(d.getX(t),d.getY(t),d.getZ(t)).applyMatrix4(e),b.set(h.getX(t),h.getY(t),h.getZ(t)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0}}();lc.prototype=Object.create(A.prototype);lc.prototype.constructor=lc;lc.prototype.dispose=function(){this.cone.geometry.dispose();" this.cone.material.dispose()};lc.prototype.update="function(){var" a="new" p,b="new" p;return="" function(){this.light.updatematrixworld();var="" c="this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));void" 0!="=this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();mc.prototype=Object.create(aa.prototype);" mc.prototype.constructor="mc;mc.prototype.updateMatrixWorld=function(){var" m,c="new" m;return="" function(d){var="" e="this.bones,f=this.geometry,g=f.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var" h="0,k=0;h<e.length;h++){var" m="e[h];m.parent&&m.parent.isBone&&(b.multiplyMatrices(c,m.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,m.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute("position").needsUpdate=" !0;a.prototype.updatematrixworld.call(this,d)}}();nc.prototype="Object.create(oa.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};nc.prototype.update=function(){void" oc.prototype.update="function(){var" this.children[0].material.dispose()};pc.prototype.update="function(){var" i,c="new" i;return="" function(){var="" d="this.children[0];if(void" f="0,g=e.count;f<g;f++){var" fd;od.prototype="Object.create(aa.prototype);Od.prototype.constructor=Od;gd.prototype=Object.create(aa.prototype);gd.prototype.constructor=gd;gd.prototype.update=function(){var" p,c="new" sa;return="" function(){this.object.updatematrixworld(!0);c.getnormalmatrix(this.object.matrixworld);var="" p="f[k],n=p.normal;a.copy(g[p.a]).add(g[p.b]).add(g[p.c]).divideScalar(3).applyMatrix4(d);" b.copy(n).applymatrix3(c).normalize().multiplyscalar(this.size).add(a);e.setxyz(h,a.x,a.y,a.z);h+="1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();qc.prototype=Object.create(A.prototype);qc.prototype.constructor=qc;qc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};qc.prototype.update=function(){var" function(){a.setfrommatrixposition(this.light.matrixworld);="" b.setfrommatrixposition(this.light.target.matrixworld);c.subvectors(b,a);this.lightplane.lookat(c);void="" a(a,="" g,h,k){d.set(g,h,k).unproject(e);a="c[a];if(void" b,c,d="new" p,e="new" qa;return="" function(){b="this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3"," 0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.getattribute("position").needsupdate="!0}}();Fb.prototype=Object.create(aa.prototype);Fb.prototype.constructor=Fb;Fb.prototype.update=function(){var" va;return="" function(b){void="" .update()="" has="" no="" longer="" arguments.");void="" c.z;e[3]="b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Fb.prototype.setFromObject=function(a){this.object=a;this.update();return" this};id.prototype="Object.create(aa.prototype);id.prototype.constructor=id;id.prototype.updateMatrixWorld=function(a){var" b="this.box;b.isEmpty()||(b.getCenter(this.position)," b.getsize(this.scale),this.scale.multiplyscalar(.5),a.prototype.updatematrixworld.call(this,a))};jd.prototype="Object.create(ua.prototype);jd.prototype.constructor=jd;jd.prototype.updateMatrixWorld=function(a){var">Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.lookAt(this.plane.normal);A.prototype.updateMatrixWorld.call(this,a)};var Pd,we;Gb.prototype=Object.create(A.prototype);Gb.prototype.constructor=Gb;Gb.prototype.setDirection=function(){var a=
    new p,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Gb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Gb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};
    kd.prototype=Object.create(aa.prototype);kd.prototype.constructor=kd;E.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(E.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(Za.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
    a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new N,c=0,d=a.length;c</c.y?this.quaternion.set(0,0,0,1):-.99999></p;m++)for(var></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a,></this.min.y||a.y></this._nactiveactions},_addinactiveaction:function(a,b,c){var></a?c:0,this._mixer.dispatchevent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0></=a?(e=0,this._setendings(!0,0===this.repetitions,d)):this._setendings(0===this.repetitions,!0,d));if(b></a){b=this._interpolants;e=this._propertybindings;for(var></c){k=--c;var></=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ja.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var></=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return></g.y||a.y></h;g+=r)c.skinweights.push(new></t;e++)for(b=d.uvs[e],c.facevertexuvs[e][v]=[],f=0;3></d;c++)b+=string.fromcharcode(a[c]);return></f;++g){var></b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void></d;)e=c+d></f&&(c=2,e=f);for(f=c-2;;){if(void></d;c++)b+=this.curves[c].getlength(),a.push(b);return></c;b++)this.points.push(a.points[b].clone());return></c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curvetype=a.curvetype;this.tension=a.tension;return></number.epsilon&&(d=e?0:c);!0!==this.aclockwise||e||(d=d===c?-c:d-c);c=this.astartangle+a*d;a=this.ax+this.xradius*math.cos(c);var></d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),l=1;l<=a;l++)e[l].applymatrix4(h.makerotationaxis(d[l],></a&&(a=1);b=this.getpoint(b);return></g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return></g.length;h++)m[h]=g.charcodeat(h);var></f;e++){var></-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(f=-e,e=math.sqrt(h)):(f=d,d=e,e=math.sqrt(h></b.length;a++)d.push(f),f+=b[a].length,bf(c,b[a]);b=lg.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return></b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},isclockwise:function(a){return></e;l+=c)k=a[l],b=a[l+1],k<r&&(r=k),b<q&&(q=b),k></m;k++){var></q;t++){var></g;f+=2)a.frombufferattribute(d,f),b.frombufferattribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceto(b);c.addattribute("linedistance",new></d.near||v></m-1;g+=n)v=b.distancesqtosegment(l[g],l[g+1],k,h),v></d.near||v></q;g+=n)l.fromarray(r,3*g),m.fromarray(r,3*g+3),v=b.distancesqtosegment(l,m,k,h),v></d.near||v></f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=a.prototype.tojson.call(this,a);a.object.levels=[];for(var></c;b++){var></d.near||f></a;z+=3){v=w.getx(z);var></b.length;e++){b[e].closestpointtopoint(c,!0,d);var></b?e.multiplyscalar(1></=g?g:c,b)},intersectsbox:function(){var></c||c!==c)c=a;return></c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g></=c){var></=a.radius},distancetoplane:function(a){var></=r?(h=1></p){d=l*k-m;e=l*m-k;var></this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha=></=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.facevertexuvs.length;c<e;c++)this.facevertexuvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=b;return></a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return></d?6:0);break;case></a.length&&(c=kg[a],></2></d&&--d;return></a.length;c++){var></fog_vertex></shadowmap_vertex></worldpos_vertex></project_vertex></begin_vertex></shadowmap_pars_vertex></fog_pars_vertex></fog_fragment></shadowmask_pars_fragment></shadowmap_pars_fragment></lights_pars_begin></bsdfs></fog_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></begin_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></alphatest_fragment></color_fragment></map_particle_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></shadowmap_pars_fragment></fog_pars_fragment></map_particle_pars_fragment></color_pars_fragment></packing></common></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></uv_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></normal_fragment_maps></normal_fragment_begin></logdepthbuf_fragment></logdepthbuf_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></uv_pars_fragment></packing></fog_vertex></shadowmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></aomap_fragment></lights_fragment_end></lights_fragment_maps></lights_fragment_begin></lights_physical_fragment></emissivemap_fragment></normal_fragment_maps></normal_fragment_begin></metalnessmap_fragment></roughnessmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></metalnessmap_pars_fragment></roughnessmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_physical_pars_fragment></lights_pars_maps></lights_pars_begin></cube_uv_reflection_fragment></bsdfs></fog_pars_fragment></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></envmap_fragment></aomap_fragment></lights_fragment_end></lights_fragment_maps></lights_fragment_begin></lights_phong_fragment></emissivemap_fragment></normal_fragment_maps></normal_fragment_begin></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_phong_pars_fragment></lights_pars_maps></lights_pars_begin></bsdfs></fog_pars_fragment></gradientmap_pars_fragment></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></lights_lambert_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></lights_pars_maps></lights_pars_begin></bsdfs></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></envmap_fragment></aomap_fragment></lightmap_fragment></emissivemap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></shadowmask_pars_fragment></shadowmap_pars_fragment></fog_pars_fragment></lights_pars_maps></lights_pars_begin></bsdfs></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></envmap_vertex></clipping_planes_vertex></worldpos_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></envmap_fragment></aomap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></fog_pars_fragment></envmap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></common></fog_vertex></clipping_planes_vertex></logdepthbuf_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></color_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></color_pars_fragment></common></project_vertex></begin_vertex></common></common></clipping_planes_vertex></worldpos_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></uv_vertex></clipping_planes_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></alphatest_fragment></alphamap_fragment></map_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></packing></common></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></logdepthbuf_fragment></alphatest_fragment></alphamap_fragment></map_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></packing></common></project_vertex></begin_vertex></common></=></=></f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var></a)return!1;return!0},intersectsbox:function(){var></b},intersectsbox:function(a){return></a||0></e))return></=this.radius*this.radius},distancetopoint:function(a){return></f;e++)c=math.max(c,d.distancetosquared(b[e]));this.radius=math.sqrt(c);return></=e;f+=3){h.fromarray(a,f);var></=b.radius*b.radius}}(),intersectsplane:function(a){if(0<a.normal.x){var></this.min.z||a.min.z></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&></this.min.z||a.z></this.min.y||a.y></c;b++)this.expandbypoint(a[b]);return></l;h++){var></l;h+=3){var></a.y)switch(this.wrapt){case></a.x)switch(this.wraps){case></h.width||2048<h.height?h.todataurl("image></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return></=g)return></m?></=></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix4(this),b.setxyz(c,a.x,a.y,a.z);return></=b)return></=b)return></a?1:+a});!1==="name"in></a.children.length;c++)b.push.apply(b,rf(a.children[c]));return></e;d++)ue(a[d],b,c,!0)}}function></=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addattribute("position",new></b&&a[b-1].equals(a[0])&&a.pop()}function></=ra(a,b,a.next)&&0<=ra(a,a.prev,b):0></8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function></l?d:f,e,g,l,e<l?f:d,e,c.x,c.y)){var></c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return></=d&&g></(q.next.x-q.x)*(p-q.y)></=ra(x.prev,x,x.next)){q=!1;break></n.x?u.x<r.x?u.x:r.x:n.x<r.x?n.x:r.x,u.y<n.y?u.y<r.y?u.y:r.y:n.y<r.y?n.y:r.y,k,x,y);k=zd(w,b,k,x,y);for(x=q.nextz;x&&x.z<=k;){if(x!==q.prev&&x!==q.next&&wd(u.x,u.y,n.x,n.y,r.x,r.y,x.x,x.y)&&0<=ra(x.prev,x,x.next)){q=!1;break></r&&(n++,p=p.nextz,p);m++);for(k=r;0<n||0<k&&p;)0!==n&&(0===k||!p||l.z<=p.z)?(m=l,l=l.nextz,n--):(m=p,p=p.nextz,k--),q?q.nextz=m:h=m,m.prevz=q,q=m;l=p}q.nextz=null;r*=2}while(1<u)}for(h=a;a.prev!==a.next;){l=a.prev;p=a.next;if(f)a:{q=a;k=d;var></=d;k++){var></=b;m++){g[m]=[];var></=c;t++){var></d;m++)for(c=0;3></e;++a)for(m=></=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&d.readpixels(b,c,d,e,ia.convert(m),ia.convert(n),f):console.error("three.webglrenderer.readrendertargetpixels:></=r){var></a.maxmorphtargets;h++)0<=></h;g++){var></c;p++)b=g[p],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(k)?></b.version&&k.__version!==b.version)if(r=b.image,void></l;q++){var></parseint(d);c++)a+=e.replace(></"+c+></d)return></y;c++){var></arguments.length&&console.error("three.matrix4:>